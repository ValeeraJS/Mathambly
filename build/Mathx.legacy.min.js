/*
 *****************************************************************************
 Copyright (c) Microsoft Corporation.

 Permission to use, copy, modify, and/or distribute this software for any
 purpose with or without fee is hereby granted.

 THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
 REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
 AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
 INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
 LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
 OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
 PERFORMANCE OF THIS SOFTWARE.
*****************************************************************************/
(function(m,Ba){"object"===typeof exports&&"undefined"!==typeof module?Ba(exports):"function"===typeof define&&define.amd?define(["exports"],Ba):(m="undefined"!==typeof globalThis?globalThis:m||self,Ba(m.Mathx={}))})(this,function(m){function Ba(f,d){function a(){this.constructor=f}if("function"!==typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");bc(f,d);f.prototype=null===d?Object.create(d):(a.prototype=d.prototype,new a)}function cc(f,d,a,b,
c){Kb=0;for(xc=f.length-3;Kb<=xc;Kb+=3)if(h.fromArray(f,Kb,ib),yc=c[0]*Math.abs(ib[0])+c[1]*Math.abs(ib[1])+c[2]*Math.abs(ib[2]),dc=h.dot(d,ib),ec=h.dot(a,ib),fc=h.dot(b,ib),Math.max(-Math.max(dc,ec,fc),Math.min(dc,ec,fc))>yc)return!1;return!0}var zc=2*Math.PI,Pa=Math.pow(2,-52),Lc=Object.freeze({__proto__:null,DEG_TO_RAD:Math.PI/180,DEG_360_RAD:zc,DEG_90_RAD:Math.PI/2,DEG_60_RAD:Math.PI/3,DEG_45_RAD:Math.PI/4,DEG_30_RAD:Math.PI/6,EPSILON:Pa,RAD_TO_DEG:180/Math.PI}),jb={aliceblue:15792383,antiquewhite:16444375,
aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,
darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,
indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,
maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,
papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,
violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},bc=function(f,d){bc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return bc(f,d)},Mc=function(f){function d(a,b,c,e){void 0===a&&(a=0);void 0===b&&(b=0);void 0===c&&(c=0);void 0===e&&(e=1);var g=f.call(this,4)||this;g[0]=a;g[1]=b;g[2]=c;g[3]=e;return g}Ba(d,f);Object.defineProperty(d.prototype,
"r",{get:function(){return this[0]},set:function(a){this[0]=a},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"g",{get:function(){return this[1]},set:function(a){this[1]=a},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"b",{get:function(){return this[2]},set:function(a){this[2]=a},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"a",{get:function(){return this[4]},set:function(a){this[4]=a},enumerable:!1,configurable:!0});d.average=function(a){return(a[0]+
a[1]+a[2])/3};d.averageWeighted=function(a,b,c,e){void 0===b&&(b=.299);void 0===c&&(c=.587);void 0===e&&(e=.114);return a[0]*b+a[1]*c+a[2]*e};d.clone=function(a){return new d(a[0],a[1],a[2],a[3])};d.create=function(a,b,c,e){void 0===a&&(a=0);void 0===b&&(b=0);void 0===c&&(c=0);void 0===e&&(e=1);return new d(a,b,c,e)};d.equals=function(a,b){var c,e,g,n,k,t,q,r;return(null!==(c=a.r)&&void 0!==c?c:a[0])===(null!==(e=b.r)&&void 0!==e?e:b[0])&&(null!==(g=a.g)&&void 0!==g?g:a[1])===(null!==(n=b.g)&&void 0!==
n?n:b[1])&&(null!==(k=a.b)&&void 0!==k?k:a[2])===(null!==(t=b.b)&&void 0!==t?t:b[2])&&(null!==(q=a.a)&&void 0!==q?q:a[3])===(null!==(r=b.a)&&void 0!==r?r:b[3])};d.fromArray=function(a,b){void 0===b&&(b=new d);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b};d.fromHex=function(a,b,c){void 0===b&&(b=255);void 0===c&&(c=new d);c[0]=a>>16;c[1]=a>>8&255;c[2]=a&255;c[3]=b;return c};d.fromJson=function(a,b){void 0===b&&(b=new d);b[0]=a.r;b[1]=a.g;b[2]=a.b;b[3]=a.a;return b};d.fromScalar=function(a,b,c){void 0===
b&&(b=255);void 0===c&&(c=new d);c[0]=a;c[1]=a;c[2]=a;c[3]=b;return c};d.fromString=function(a,b){void 0===b&&(b=new d);if(a in jb)return d.fromHex(jb[a],255,b);if(a.startsWith("#"))return a=a.substr(1),d.fromScalar(parseInt(a,16),255,b);a.startsWith("rgba(")&&(a=a.substring(4,a.length-1),a=a.split(","),b[0]=parseInt(a[0],10),b[1]=parseInt(a[1],10),b[2]=parseInt(a[2],10),b[3]=parseInt(a[3],10));return b};d.grayscale=function(a,b,c,e,g){void 0===b&&(b=.299);void 0===c&&(c=.587);void 0===e&&(e=.114);
void 0===g&&(g=new d);b=d.averageWeighted(a,b,c,e);d.fromScalar(b,a[3],g);return g};return d}(Uint8Array),Nc=function(f){function d(a,b,c){void 0===a&&(a=0);void 0===b&&(b=0);void 0===c&&(c=0);var e=f.call(this,3)||this;e[0]=a;e[1]=b;e[2]=c;return e}Ba(d,f);Object.defineProperty(d.prototype,"r",{get:function(){return this[0]},set:function(a){this[0]=a},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"g",{get:function(){return this[1]},set:function(a){this[1]=a},enumerable:!1,configurable:!0});
Object.defineProperty(d.prototype,"b",{get:function(){return this[2]},set:function(a){this[2]=a},enumerable:!1,configurable:!0});d.average=function(a){return(a[0]+a[1]+a[2])/3};d.averageWeighted=function(a,b,c,e){void 0===b&&(b=.299);void 0===c&&(c=.587);void 0===e&&(e=.114);return a[0]*b+a[1]*c+a[2]*e};d.clone=function(a){return new d(a[0],a[1],a[2])};d.create=function(a,b,c){void 0===a&&(a=0);void 0===b&&(b=0);void 0===c&&(c=0);return new d(a,b,c)};d.equals=function(a,b){var c,e,g,n,k,t;return(null!==
(c=a.r)&&void 0!==c?c:a[0])===(null!==(e=b.r)&&void 0!==e?e:b[0])&&(null!==(g=a.g)&&void 0!==g?g:a[1])===(null!==(n=b.g)&&void 0!==n?n:b[1])&&(null!==(k=a.b)&&void 0!==k?k:a[2])===(null!==(t=b.b)&&void 0!==t?t:b[2])};d.fromArray=function(a,b){void 0===b&&(b=new d);b[0]=a[0];b[1]=a[1];b[2]=a[2];return b};d.fromHex=function(a,b){void 0===b&&(b=new d);b[0]=a>>16;b[1]=a>>8&255;b[2]=a&255;return b};d.fromJson=function(a,b){void 0===b&&(b=new d);b[0]=a.r;b[1]=a.g;b[2]=a.b;return b};d.fromScalar=function(a,
b){void 0===b&&(b=new d);b[0]=a;b[1]=a;b[2]=a;return b};d.fromString=function(a,b){void 0===b&&(b=new d);if(a in jb)return d.fromHex(jb[a],b);if(a.startsWith("#"))return a=a.substr(1),d.fromScalar(parseInt(a,16),b);a.startsWith("rgb(")&&(a=a.substring(4,a.length-1),a=a.split(","),b[0]=parseInt(a[0],10),b[1]=parseInt(a[1],10),b[2]=parseInt(a[2],10));return b};d.grayscale=function(a,b,c,e,g){void 0===b&&(b=.299);void 0===c&&(c=.587);void 0===e&&(e=.114);void 0===g&&(g=new d);a=d.averageWeighted(a,b,
c,e);d.fromScalar(a,g);return g};return d}(Uint8Array),Oc=function(f){function d(a,b,c,e){void 0===a&&(a=0);void 0===b&&(b=0);void 0===c&&(c=0);void 0===e&&(e=0);var g=f.call(this,4)||this;g[0]=a;g[1]=b;g[2]=c;g[3]=e;return g}Ba(d,f);d.fromColorRGB=function(a,b){void 0===b&&(b=new d);b[0]=a[0]/255;b[1]=a[1]/255;b[2]=a[2]/255;b[3]=1;return b};d.fromColorRGBA=function(a,b){void 0===b&&(b=new d);b[0]=a[0]/255;b[1]=a[1]/255;b[2]=a[2]/255;b[3]=a[3]/255;return b};Object.defineProperty(d.prototype,"r",{get:function(){return this[0]},
set:function(a){this[0]=a},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"g",{get:function(){return this[1]},set:function(a){this[1]=a},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"b",{get:function(){return this[2]},set:function(a){this[2]=a},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"a",{get:function(){return this[3]},set:function(a){this[3]=a},enumerable:!1,configurable:!0});d.average=function(a){return(a[0]+a[1]+a[2])/3};d.averageWeighted=
function(a,b,c,e){void 0===b&&(b=.299);void 0===c&&(c=.587);void 0===e&&(e=.114);return a[0]*b+a[1]*c+a[2]*e};d.clone=function(a){return new d(a[0],a[1],a[2],a[3])};d.create=function(a,b,c,e){void 0===a&&(a=0);void 0===b&&(b=0);void 0===c&&(c=0);void 0===e&&(e=0);return new d(a,b,c,e)};d.equals=function(a,b){var c,e,g,n,k,t,q,r;return(null!==(c=a.r)&&void 0!==c?c:a[0])===(null!==(e=b.r)&&void 0!==e?e:b[0])&&(null!==(g=a.g)&&void 0!==g?g:a[1])===(null!==(n=b.g)&&void 0!==n?n:b[1])&&(null!==(k=a.b)&&
void 0!==k?k:a[2])===(null!==(t=b.b)&&void 0!==t?t:b[2])&&(null!==(q=a.a)&&void 0!==q?q:a[3])===(null!==(r=b.a)&&void 0!==r?r:b[3])};d.fromArray=function(a,b){void 0===b&&(b=new d);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b};d.fromHex=function(a,b,c){void 0===b&&(b=1);void 0===c&&(c=new d);c[0]=(a>>16)/255;c[1]=(a>>8&255)/255;c[2]=(a&255)/255;c[3]=b;return c};d.fromJson=function(a,b){void 0===b&&(b=new d);b[0]=a.r;b[1]=a.g;b[2]=a.b;b[3]=a.a;return b};d.fromScalar=function(a,b){void 0===b&&(b=
new d);b[0]=a;b[1]=a;b[2]=a;return b};d.fromString=function(a,b){void 0===b&&(b=new d);if(a in jb)return d.fromHex(jb[a],1,b);if(a.startsWith("#"))return a=a.substr(1),d.fromHex(parseInt(a,16),1,b);a.startsWith("rgb(")&&(a=a.substring(4,a.length-1),a=a.split(","),b[0]=parseInt(a[0],10)/255,b[1]=parseInt(a[1],10)/255,b[2]=parseInt(a[2],10)/255);return b};d.grayscale=function(a,b,c,e,g){void 0===b&&(b=.299);void 0===c&&(c=.587);void 0===e&&(e=.114);void 0===g&&(g=new d);a=d.averageWeighted(a,b,c,e);
d.fromScalar(a,g);return g};return d}(Float32Array),na=function(f,d,a){return Math.max(d,Math.min(a,f))},Lb=function(f){return 0>f?Math.ceil(f):Math.floor(f)},pb,qb,ab=function(f,d,a){return d>a?Math.max(a,Math.min(d,f)):a>d?Math.max(d,Math.min(a,f)):d},ta=function(f,d,a){void 0===a&&(a=Pa);return Math.abs(f-d)<=a},gc=0,Ac=0,Bc=0,hc=0,Cc=function(f){hc=0;Bc=f.length;for(var d=0;d<Bc;d++)hc+=f[d];return hc},ic=function(f){return f<1/2.75?7.5625*f*f:f<2/2.75?7.5625*(f-=1.5/2.75)*f+.75:f<2.5/2.75?7.5625*
(f-=2.25/2.75)*f+.9375:7.5625*(f-=2.625/2.75)*f+.984375},Dc=function(f){return 1-ic(1-f)},Pc=Object.freeze({__proto__:null,BackIn:function(f){return 1===f?1:f*f*(2.70158*f-1.70158)},BackOut:function(f){return 0===f?0:--f*f*(2.70158*f+1.70158)+1},BackInOut:function(f){if(1>(f*=2))return.5*f*f*(3.5949095*f-2.5949095);f-=2;return.5*(f*f*(3.5949095*f+2.5949095)+2)},BounceIn:Dc,BounceInOut:function(f){return.5>f?.5*Dc(2*f):.5*ic(2*f-1)+.5},BounceOut:ic,CircularIn:function(f){return 1-Math.sqrt(1-f*f)},
CircularInOut:function(f){if(1>(f*=2))return-.5*(Math.sqrt(1-f*f)-1);f-=2;return.5*(Math.sqrt(1-f*f)+1)},CircularOut:function(f){return Math.sqrt(1- --f*f)},CubicIn:function(f){return f*f*f},CubicInOut:function(f){if(1>(f*=2))return.5*f*f*f;f-=2;return.5*(f*f*f+2)},CubicOut:function(f){return--f*f*f+1},ElasticIn:function(f){return 0===f||1===f?f:-Math.pow(2,10*(f-1))*Math.sin(5*(f-1.1)*Math.PI)},ElasticInOut:function(f){if(0===f||1===f)return f;f*=2;return 1>f?-.5*Math.pow(2,10*(f-1))*Math.sin(5*
(f-1.1)*Math.PI):.5*Math.pow(2,-10*(f-1))*Math.sin(5*(f-1.1)*Math.PI)+1},ElasticOut:function(f){return 0===f||1===f?f:Math.pow(2,-10*f)*Math.sin(5*(f-.1)*Math.PI)+1},ExponentialIn:function(f){return 0===f?0:Math.pow(1024,f-1)},ExponentialInOut:function(f){return 0===f||1===f?f:1>(f*=2)?.5*Math.pow(1024,f-1):.5*(-Math.pow(2,-10*(f-1))+2)},ExponentialOut:function(f){return 1===f?1:1-Math.pow(2,-10*f)},Linear:function(f){return f},QuadraticIn:function(f){return f*f},QuadraticInOut:function(f){return 1>
(f*=2)?.5*f*f:-.5*(--f*(f-2)-1)},QuadraticOut:function(f){return f*(2-f)},QuarticIn:function(f){return f*f*f*f},QuarticInOut:function(f){if(1>(f*=2))return.5*f*f*f*f;f-=2;return-.5*(f*f*f*f-2)},QuarticOut:function(f){return 1- --f*f*f*f},QuinticIn:function(f){return f*f*f*f*f},QuinticInOut:function(f){if(1>(f*=2))return.5*f*f*f*f*f;f-=2;return.5*(f*f*f*f*f+2)},QuinticOut:function(f){return--f*f*f*f*f+1},SinusoidalIn:function(f){return 1-Math.sin((1-f)*Math.PI/2)},SinusoidalInOut:function(f){return.5*
(1-Math.sin(Math.PI*(.5-f)))},SinusoidalOut:function(f){return Math.sin(f*Math.PI/2)}});m.EulerRotationOrders=void 0;(function(f){f.XYZ="xyz";f.ZXY="zxy";f.YZX="yzx";f.XZY="xzy";f.ZYX="zyx";f.YXZ="yxz"})(m.EulerRotationOrders||(m.EulerRotationOrders={}));var Qc=function(f){function d(a,b,c,e){void 0===a&&(a=0);void 0===b&&(b=0);void 0===c&&(c=0);void 0===e&&(e=m.EulerRotationOrders.XYZ);var g=f.call(this,3)||this;g[0]=a;g[1]=b;g[2]=c;g.order=e;return g}Ba(d,f);d.clone=function(a){return new d(a.x,
a.y,a.z,a.order)};d.create=function(a,b,c,e){void 0===a&&(a=0);void 0===b&&(b=0);void 0===c&&(c=0);void 0===e&&(e=m.EulerRotationOrders.XYZ);return new d(a,b,c,e)};d.fromMatrix4=function(a,b){void 0===b&&(b=new d);var c=a[0],e=a[4],g=a[8],n=a[1],k=a[5],t=a[9],q=a[2],r=a[6];a=a[10];switch(b.order){case m.EulerRotationOrders.XYZ:b.y=Math.asin(na(g,-1,1));.9999999>Math.abs(g)?(b.x=Math.atan2(-t,a),b.z=Math.atan2(-e,c)):(b.x=Math.atan2(r,k),b.z=0);break;case m.EulerRotationOrders.YXZ:b.x=Math.asin(-na(t,
-1,1));.9999999>Math.abs(t)?(b.y=Math.atan2(g,a),b.z=Math.atan2(n,k)):(b.y=Math.atan2(-q,c),b.z=0);break;case m.EulerRotationOrders.ZXY:b.x=Math.asin(na(r,-1,1));.9999999>Math.abs(r)?(b.y=Math.atan2(-q,a),b.z=Math.atan2(-e,k)):(b.y=0,b.z=Math.atan2(n,c));break;case m.EulerRotationOrders.ZYX:b.y=Math.asin(-na(q,-1,1));.9999999>Math.abs(q)?(b.x=Math.atan2(r,a),b.z=Math.atan2(n,c)):(b.x=0,b.z=Math.atan2(-e,k));break;case m.EulerRotationOrders.YZX:b.z=Math.asin(na(n,-1,1));.9999999>Math.abs(n)?(b.x=Math.atan2(-t,
k),b.y=Math.atan2(-q,c)):(b.x=0,b.y=Math.atan2(g,a));break;case m.EulerRotationOrders.XZY:b.z=Math.asin(-na(e,-1,1)),.9999999>Math.abs(e)?(b.x=Math.atan2(r,k),b.y=Math.atan2(g,c)):(b.x=Math.atan2(-t,a),b.y=0)}return b};Object.defineProperty(d.prototype,"x",{get:function(){return this[0]},set:function(a){this[0]=a},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"y",{get:function(){return this[1]},set:function(a){this[1]=a},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,
"z",{get:function(){return this[2]},set:function(a){this[2]=a},enumerable:!1,configurable:!0});d.ORDERS=m.EulerRotationOrders;return d}(Float32Array),Ga=0,Ha=0,Qa=0,Ra=0,Bb=0,Cb=0,Db=0,Eb=0,bb=0,Ua=0,Va=0,jc=[1,0,0,1],Rc=function(f){function d(a){void 0===a&&(a=jc);return f.call(this,a)||this}Ba(d,f);d.UNIT_MATRIX2=new d(jc);d.add=function(a,b,c){c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];return c};d.adjoint=function(a,b){Ga=a[0];b[0]=a[3];b[1]=-a[1];b[2]=-a[2];b[3]=Ga;return b};
d.clone=function(a){return new d(a)};d.closeTo=function(a,b){Ga=a[0];Qa=a[1];Ha=a[2];Ra=a[3];Bb=b[0];Db=b[1];Cb=b[2];Eb=b[3];return ta(Ga,Bb)&&ta(Ha,Cb)&&ta(Qa,Db)&&ta(Ra,Eb)};d.create=function(a){void 0===a&&(a=jc);return new d(a)};d.determinant=function(a){return a[0]*a[3]-a[1]*a[2]};d.equals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]};d.frobNorm=function(a){return Math.hypot(a[0],a[1],a[2],a[3])};d.fromArray=function(a,b){void 0===b&&(b=new d);b.set(a);return b};d.fromRotation=
function(a,b){void 0===b&&(b=new d);Va=Math.sin(a);Ua=Math.cos(a);b[0]=Ua;b[1]=Va;b[2]=-Va;b[3]=Ua;return b};d.fromScaling=function(a,b){void 0===b&&(b=new d);b[0]=a[0];b[1]=0;b[2]=0;b[3]=a[1];return b};d.identity=function(a){void 0===a&&(a=new d);a[0]=1;a[1]=0;a[2]=0;a[3]=1;return a};d.invert=function(a,b){void 0===b&&(b=new d);Ga=a[0];Qa=a[1];Ha=a[2];Ra=a[3];bb=d.determinant(a);if(!bb)return null;bb=1/bb;b[0]=Ra*bb;b[1]=-Qa*bb;b[2]=-Ha*bb;b[3]=Ga*bb;return b};d.minus=function(a,b,c){void 0===c&&
(c=new d);c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];c[3]=a[3]-b[3];return c};d.multiply=function(a,b,c){void 0===c&&(c=new d);Ga=a[0];Qa=a[1];Ha=a[2];Ra=a[3];Bb=b[0];Db=b[1];Cb=b[2];Eb=b[3];c[0]=Ga*Bb+Ha*Db;c[1]=Qa*Bb+Ra*Db;c[2]=Ga*Cb+Ha*Eb;c[3]=Qa*Cb+Ra*Eb;return c};d.multiplyScalar=function(a,b,c){void 0===c&&(c=new d);c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;return c};d.rotate=function(a,b,c){void 0===c&&(c=new d);Ga=a[0];Qa=a[1];Ha=a[2];Ra=a[3];Va=Math.sin(b);Ua=Math.cos(b);c[0]=Ga*
Ua+Ha*Va;c[1]=Qa*Ua+Ra*Va;c[2]=Ga*-Va+Ha*Ua;c[3]=Qa*-Va+Ra*Ua;return c};d.scale=function(a,b,c){void 0===c&&(c=new d);Ga=a[0];Qa=a[1];Ha=a[2];Ra=a[3];Ua=b[0];Va=b[1];c[0]=Ga*Ua;c[1]=Qa*Ua;c[2]=Ha*Va;c[3]=Ra*Va;return c};d.toString=function(a){return"mat2(".concat(a[0],", ").concat(a[1],", ").concat(a[2],", ").concat(a[3],")")};d.transpose=function(a,b){void 0===b&&(b=new d);b===a?(Ha=a[1],b[1]=a[2],b[2]=Ha):(b[0]=a[0],b[1]=a[2],b[2]=a[1],b[3]=a[3]);return b};return d}(Float32Array),oa=0,ia=0,ja=0,
pa=0,qa=0,ka=0,ua=0,va=0,wa=0,Mb=0,kb=0,Nb=0,lb=0,Ob=0,Pb=0,Qb=0,mb=0,Rb=0,ra=0,sa=0,kc=[1,0,0,0,1,0,0,0,1],Sc=function(f){function d(a){void 0===a&&(a=kc);return f.call(this,a)||this}Ba(d,f);d.UNIT_MATRIX3=new d(kc);d.clone=function(a){return new d(a)};d.cofactor00=function(a){return a[4]*a[8]-a[5]*a[7]};d.cofactor01=function(a){return a[1]*a[8]-a[7]*a[2]};d.cofactor02=function(a){return a[1]*a[5]-a[4]*a[2]};d.cofactor10=function(a){return a[3]*a[8]-a[6]*a[5]};d.cofactor11=function(a){return a[0]*
a[8]-a[6]*a[2]};d.cofactor12=function(a){return a[0]*a[5]-a[3]*a[2]};d.cofactor20=function(a){return a[3]*a[7]-a[6]*a[4]};d.cofactor21=function(a){return a[0]*a[7]-a[6]*a[1]};d.cofactor22=function(a){return a[0]*a[4]-a[3]*a[1]};d.create=function(){return new d(kc)};d.determinant=function(a){oa=a[0];ia=a[1];ja=a[2];qa=a[3];pa=a[4];ka=a[5];ua=a[6];va=a[7];wa=a[8];return oa*(wa*pa-ka*va)+ia*(-wa*qa+ka*ua)+ja*(va*qa-pa*ua)};d.fromArray=function(a,b){void 0===b&&(b=new d);b.set(a);return b};d.fromMatrix4=
function(a,b){void 0===b&&(b=new d);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[4];b[4]=a[5];b[5]=a[6];b[6]=a[8];b[7]=a[9];b[8]=a[10];return b};d.fromRotation=function(a,b){void 0===b&&(b=new d);sa=Math.sin(a);ra=Math.cos(a);b[0]=ra;b[1]=sa;b[2]=0;b[3]=-sa;b[4]=ra;b[5]=0;b[6]=0;b[7]=0;b[8]=1;return b};d.fromScaling=function(a,b){void 0===b&&(b=new d);b[0]=a[0];b[1]=0;b[2]=0;b[3]=0;b[4]=a[1];b[5]=0;b[6]=0;b[7]=0;b[8]=1;return b};d.fromTranslation=function(a,b){void 0===b&&(b=new d);b[0]=1;b[1]=0;b[2]=0;b[3]=
0;b[4]=1;b[5]=0;b[6]=a[0];b[7]=a[1];b[8]=1;return b};d.identity=function(a){void 0===a&&(a=new d);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};d.invert=function(a,b){void 0===b&&(b=new d);oa=a[0];ia=a[1];ja=a[2];qa=a[3];pa=a[4];ka=a[5];ua=a[6];va=a[7];wa=a[8];kb=wa*pa-ka*va;lb=-wa*qa+ka*ua;mb=va*qa-pa*ua;a=oa*kb+ia*lb+ja*mb;if(!a)return null;a=1/a;b[0]=kb*a;b[1]=(-wa*ia+ja*va)*a;b[2]=(ka*ia-ja*pa)*a;b[3]=lb*a;b[4]=(wa*oa-ja*ua)*a;b[5]=(-ka*oa+ja*qa)*a;b[6]=mb*a;b[7]=(-va*
oa+ia*ua)*a;b[8]=(pa*oa-ia*qa)*a;return b};d.multiply=function(){return function(a,b,c){void 0===c&&(c=new d);oa=a[0];ia=a[1];ja=a[2];qa=a[3];pa=a[4];ka=a[5];ua=a[6];va=a[7];wa=a[8];Mb=b[0];kb=b[1];Nb=b[2];Ob=b[3];lb=b[4];Pb=b[5];Qb=b[6];mb=b[7];Rb=b[8];c[0]=Mb*oa+kb*qa+Nb*ua;c[1]=Mb*ia+kb*pa+Nb*va;c[2]=Mb*ja+kb*ka+Nb*wa;c[3]=Ob*oa+lb*qa+Pb*ua;c[4]=Ob*ia+lb*pa+Pb*va;c[5]=Ob*ja+lb*ka+Pb*wa;c[6]=Qb*oa+mb*qa+Rb*ua;c[7]=Qb*ia+mb*pa+Rb*va;c[8]=Qb*ja+mb*ka+Rb*wa;return c}};d.rotate=function(a,b,c){void 0===
c&&(c=new d);oa=a[0];ia=a[1];ja=a[2];qa=a[3];pa=a[4];ka=a[5];ua=a[6];va=a[7];wa=a[8];sa=Math.sin(b);ra=Math.cos(b);c[0]=ra*oa+sa*qa;c[1]=ra*ia+sa*pa;c[2]=ra*ja+sa*ka;c[3]=sa*qa-ra*oa;c[4]=sa*pa-ra*ia;c[5]=sa*ka-ra*ja;c[6]=ua;c[7]=va;c[8]=wa;return c};d.scale=function(a,b,c){void 0===c&&(c=new d);ra=b[0];sa=b[1];c[0]=ra*a[0];c[1]=ra*a[1];c[2]=ra*a[2];c[3]=sa*a[3];c[4]=sa*a[4];c[5]=sa*a[5];c[6]=a[6];c[7]=a[7];c[8]=a[8];return c};d.translate=function(a,b,c){void 0===c&&(c=new d);oa=a[0];ia=a[1];ja=a[2];
qa=a[3];pa=a[4];ka=a[5];ua=a[6];va=a[7];wa=a[8];ra=b[0];sa=b[1];c[0]=oa;c[1]=ia;c[2]=ja;c[3]=qa;c[4]=pa;c[5]=ka;c[6]=ra*oa+sa*qa+ua;c[7]=ra*ia+sa*pa+va;c[8]=ra*ja+sa*ka+wa;return c};d.transpose=function(a,b){void 0===b&&(b=new d);b===a?(ia=a[1],ja=a[2],ka=a[5],b[1]=a[3],b[2]=a[6],b[3]=ia,b[5]=a[7],b[6]=ja,b[7]=ka):(b[0]=a[0],b[1]=a[3],b[2]=a[6],b[3]=a[1],b[4]=a[4],b[5]=a[7],b[6]=a[2],b[7]=a[5],b[8]=a[8]);return b};return d}(Float32Array),A,S,T,xa,Sa,Ta,Ia,lc,h=function(f){function d(a,b,c){void 0===
a&&(a=0);void 0===b&&(b=0);void 0===c&&(c=0);var e=f.call(this,3)||this;e[0]=a;e[1]=b;e[2]=c;return e}Ba(d,f);Object.defineProperty(d.prototype,"x",{get:function(){return this[0]},set:function(a){this[0]=a},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"y",{get:function(){return this[1]},set:function(a){this[1]=a},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"z",{get:function(){return this[2]},set:function(a){this[2]=a},enumerable:!1,configurable:!0});d.VECTOR3_ZERO=
new Float32Array([0,0,0]);d.VECTOR3_ONE=new Float32Array([1,1,1]);d.VECTOR3_TOP=new Float32Array([0,1,0]);d.VECTOR3_BOTTOM=new Float32Array([0,-1,0]);d.VECTOR3_LEFT=new Float32Array([-1,0,0]);d.VECTOR3_RIGHT=new Float32Array([1,0,0]);d.VECTOR3_FRONT=new Float32Array([0,0,-1]);d.VECTOR3_BACK=new Float32Array([0,0,1]);d.add=function(a,b,c){void 0===c&&(c=new d);c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];return c};d.addScalar=function(a,b,c){void 0===c&&(c=new d);c[0]=a[0]+b;c[1]=a[1]+b;c[2]=a[2]+
b;return c};d.angle=function(a,b){A=a[0];S=a[1];T=a[2];xa=b[0];Sa=b[1];Ta=b[2];var c=Math.sqrt(A*A+S*S+T*T)*Math.sqrt(xa*xa+Sa*Sa+Ta*Ta);a=c&&d.dot(a,b)/c;return Math.acos(na(a,-1,1))};d.clamp=function(a,b,c,e){void 0===e&&(e=new d);e[0]=na(a[0],b[0],c[0]);e[1]=na(a[1],b[1],c[1]);e[2]=na(a[2],b[2],c[2]);return e};d.clampSafe=function(a,b,c,e){void 0===e&&(e=new d);e[0]=ab(a[0],b[0],c[0]);e[1]=ab(a[1],b[1],c[1]);e[1]=ab(a[2],b[2],c[2]);return e};d.clampScalar=function(a,b,c,e){void 0===e&&(e=new d);
e[0]=na(a[0],b,c);e[1]=na(a[1],b,c);e[2]=na(a[2],b,c);return e};d.clone=function(a,b){void 0===b&&(b=new d);b[0]=a[0];b[1]=a[1];b[2]=a[2];return b};d.closeTo=function(a,b){return ta(a[0],b[0])&&ta(a[1],b[1])&&ta(a[2],b[2])};d.create=function(a,b,c,e){void 0===a&&(a=0);void 0===b&&(b=0);void 0===c&&(c=0);void 0===e&&(e=new d);e[0]=a;e[1]=b;e[2]=c;return e};d.cross=function(a,b,c){void 0===c&&(c=new d);A=a[0];S=a[1];T=a[2];xa=b[0];Sa=b[1];Ta=b[2];c[0]=S*Ta-T*Sa;c[1]=T*xa-A*Ta;c[2]=A*Sa-S*xa;return c};
d.distanceTo=function(a,b){A=b[0]-a[0];S=b[1]-a[1];T=b[2]-a[2];return Math.hypot(A,S,T)};d.distanceToManhattan=function(a,b){return Math.abs(a[0]-b[0])+Math.abs(a[1]-b[1])+Math.abs(a[2]-b[2])};d.distanceToSquared=function(a,b){A=a[0]-b[0];S=a[1]-b[1];T=a[2]-b[2];return A*A+S*S+T*T};d.divide=function(a,b,c){void 0===c&&(c=new d);c[0]=a[0]/b[0];c[1]=a[1]/b[1];c[2]=a[2]/b[2];return c};d.divideScalar=function(a,b,c){void 0===c&&(c=new d);c[0]=a[0]/b;c[1]=a[1]/b;c[2]=a[2]/b;return c};d.dot=function(a,
b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]};d.equals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]};d.fromArray=function(a,b,c){void 0===b&&(b=0);void 0===c&&(c=new d);c[0]=a[b];c[1]=a[b+1];c[2]=a[b+2];return c};d.fromScalar=function(a,b){void 0===b&&(b=new d(3));b[0]=b[1]=b[2]=a;return b};d.fromValues=function(a,b,c,e){void 0===e&&(e=new d(3));e[0]=a;e[1]=b;e[2]=c;return e};d.hermite=function(a,b,c,e,g,n){void 0===n&&(n=new d);Ia=g*g;var k=Ia*(2*g-3)+1,t=Ia*(g-2)+g,q=Ia*(g-1);g=Ia*(3-2*
g);n[0]=a[0]*k+b[0]*t+c[0]*q+e[0]*g;n[1]=a[1]*k+b[1]*t+c[1]*q+e[1]*g;n[2]=a[2]*k+b[2]*t+c[2]*q+e[2]*g;return n};d.inverse=function(a,b){void 0===b&&(b=new d);b[0]=1/a[0];b[1]=1/a[1];b[2]=1/a[2];return b};d.norm=function(a){return Math.sqrt(d.lengthSquared(a))};d.lengthManhattan=function(a){return Math.abs(a[0])+Math.abs(a[1])+Math.abs(a[2])};d.lengthSquared=function(a){return a[0]*a[0]+a[1]*a[1]+a[2]*a[2]};d.lerp=function(a,b,c,e){void 0===e&&(e=new d);e[0]+=(b[0]-a[0])*c;e[1]+=(b[1]-a[1])*c;e[2]+=
(b[2]-a[2])*c;return e};d.max=function(a,b,c){void 0===c&&(c=new d);c[0]=Math.max(a[0],b[0]);c[1]=Math.max(a[1],b[1]);c[2]=Math.max(a[2],b[2]);return c};d.min=function(a,b,c){void 0===c&&(c=new d);c[0]=Math.min(a[0],b[0]);c[1]=Math.min(a[1],b[1]);c[2]=Math.min(a[2],b[2]);return c};d.minus=function(a,b,c){void 0===c&&(c=new d);c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];return c};d.minusScalar=function(a,b,c){void 0===c&&(c=new d);c[0]=a[0]-b;c[1]=a[1]-b;c[2]=a[2]-b;return c};d.multiply=function(a,
b,c){void 0===c&&(c=new d);c[0]=a[0]*b[0];c[1]=a[1]*b[1];c[2]=a[2]*b[2];return c};d.multiplyScalar=function(a,b,c){void 0===c&&(c=new d);c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;return c};d.negate=function(a,b){void 0===b&&(b=new d);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];return b};d.normalize=function(a,b){void 0===b&&(b=new d);return d.divideScalar(a,d.norm(a)||1,b)};d.rotateX=function(a,b,c,e){void 0===e&&(e=new d);A=a[0]-b[0];S=a[1]-b[1];T=a[2]-b[2];xa=A;Sa=S*Math.cos(c)-T*Math.sin(c);Ta=S*Math.sin(c)+T*
Math.cos(c);e[0]=xa+b[0];e[1]=Sa+b[1];e[2]=Ta+b[2];return e};d.rotateY=function(a,b,c,e){void 0===e&&(e=new d);A=a[0]-b[0];S=a[1]-b[1];T=a[2]-b[2];xa=T*Math.sin(c)+A*Math.cos(c);Sa=S;Ta=T*Math.cos(c)-A*Math.sin(c);e[0]=xa+b[0];e[1]=Sa+b[1];e[2]=Ta+b[2];return e};d.rotateZ=function(a,b,c,e){void 0===e&&(e=new d);A=a[0]-b[0];S=a[1]-b[1];T=a[2]-b[2];xa=A*Math.cos(c)-S*Math.sin(c);Sa=A*Math.sin(c)+S*Math.cos(c);Ta=T;e[0]=xa+b[0];e[1]=Sa+b[1];e[2]=Ta+b[2];return e};d.round=function(a,b){void 0===b&&(b=
new d);b[0]=Math.round(a[0]);b[1]=Math.round(a[1]);b[2]=Math.round(a[2]);return b};d.set=function(a,b,c,e){void 0===a&&(a=0);void 0===b&&(b=0);void 0===c&&(c=0);void 0===e&&(e=new d);e[0]=a;e[1]=b;e[2]=c;return e};d.setNorm=function(a,b,c){void 0===c&&(c=new d);return d.multiplyScalar(d.normalize(a,c),b,c)};d.slerp=function(a,b,c,e){void 0===e&&(e=new d);Ia=Math.acos(Math.min(Math.max(d.dot(a,b),-1),1));lc=Math.sin(Ia);A=Math.sin((1-c)*Ia)/lc;xa=Math.sin(c*Ia)/lc;e[0]=A*a[0]+xa*b[0];e[1]=A*a[1]+xa*
b[1];e[2]=A*a[2]+xa*b[2];return e};d.toString=function(a){return"(".concat(a[0],", ").concat(a[1],", ").concat(a[2],")")};d.transformMatrix3=function(a,b,c){void 0===c&&(c=new d);A=a[0];S=a[1];T=a[2];c[0]=A*b[0]+S*b[3]+T*b[6];c[1]=A*b[1]+S*b[4]+T*b[7];c[2]=A*b[2]+S*b[5]+T*b[8];return c};d.transformMatrix4=function(a,b,c){void 0===c&&(c=new d);A=a[0];S=a[1];T=a[2];Ia=(Ia=b[3]*A+b[7]*S+b[11]*T+b[15])||1;c[0]=(b[0]*A+b[4]*S+b[8]*T+b[12])/Ia;c[1]=(b[1]*A+b[5]*S+b[9]*T+b[13])/Ia;c[2]=(b[2]*A+b[6]*S+b[10]*
T+b[14])/Ia;return c};d.transformQuat=function(a,b,c){void 0===c&&(c=new d);var e=b[0],g=b[1],n=b[2],k=a[0],t=a[1];a=a[2];var q=g*a-n*t,r=n*k-e*a,B=e*t-g*k;b=2*b[3];c[0]=k+q*b+2*(g*B-n*r);c[1]=t+r*b+2*(n*q-e*B);c[2]=a+B*b+2*(e*r-g*q);return c};return d}(Float32Array),I=0,C=0,D=0,J=0,K=0,L=0,E=0,M=0,N=0,O=0,P=0,Q=0,ya=0,za=0,Aa=0,Ja=0,x=0,y=0,z=0,R=0,cb=0,db=0,nb=0,Ec=0,Na=0,Oa=0,Wa=0,rb=0,sb=0,tb=0,ub=0,vb=0,u=0,v=0,w=0,la=0,Ka=0,p=0,ma=0,ca=0,da=0,l=0,ea=0,ha=0,Z=0,mc=[1,0,0,0,0,1,0,0,0,0,1,0,0,
0,0,1],Tc=function(f){function d(a){void 0===a&&(a=mc);return f.call(this,a)||this}Ba(d,f);d.UNIT_MATRIX4=new d(mc);d.clone=function(a){return new d(a)};d.create=function(){return new d(mc)};d.determinant=function(a){I=a[0];C=a[1];D=a[2];J=a[3];L=a[4];K=a[5];E=a[6];M=a[7];N=a[8];O=a[9];P=a[10];Q=a[11];za=a[12];ya=a[13];Aa=a[14];Ja=a[15];x=I*K-C*L;y=I*E-D*L;z=C*E-D*K;R=N*ya-O*za;db=N*Aa-P*za;cb=O*Aa-P*ya;nb=I*cb-C*db+D*R;Ec=L*cb-K*db+E*R;Na=N*z-O*y+P*x;Oa=za*z-ya*y+Aa*x;return M*nb-J*Ec+Ja*Na-Q*Oa};
d.fromArray=function(a,b){void 0===b&&(b=new d);b.set(a);return b};d.fromEuler=function(a,b){void 0===b&&(b=new d);u=a.x;v=a.y;w=a.z;ca=Math.cos(u);da=Math.sin(u);l=Math.cos(v);ea=Math.sin(v);ha=Math.cos(w);Z=Math.sin(w);if(a.order===m.EulerRotationOrders.XYZ){a=ca*ha;var c=ca*Z,e=da*ha,g=da*Z;b[0]=l*ha;b[4]=-l*Z;b[8]=ea;b[1]=c+e*ea;b[5]=a-g*ea;b[9]=-da*l;b[2]=g-a*ea;b[6]=e+c*ea;b[10]=ca*l}else a.order===m.EulerRotationOrders.YXZ?(a=l*ha,c=l*Z,e=ea*ha,g=ea*Z,b[0]=a+g*da,b[4]=e*da-c,b[8]=ca*ea,b[1]=
ca*Z,b[5]=ca*ha,b[9]=-da,b[2]=c*da-e,b[6]=g+a*da,b[10]=ca*l):a.order===m.EulerRotationOrders.ZXY?(a=l*ha,c=l*Z,e=ea*ha,g=ea*Z,b[0]=a-g*da,b[4]=-ca*Z,b[8]=e+c*da,b[1]=c+e*da,b[5]=ca*ha,b[9]=g-a*da,b[2]=-ca*ea,b[6]=da,b[10]=ca*l):a.order===m.EulerRotationOrders.ZYX?(a=ca*ha,c=ca*Z,e=da*ha,g=da*Z,b[0]=l*ha,b[4]=e*ea-c,b[8]=a*ea+g,b[1]=l*Z,b[5]=g*ea+a,b[9]=c*ea-e,b[2]=-ea,b[6]=da*l,b[10]=ca*l):a.order===m.EulerRotationOrders.YZX?(a=ca*l,c=ca*ea,e=da*l,g=da*ea,b[0]=l*ha,b[4]=g-a*Z,b[8]=e*Z+c,b[1]=Z,b[5]=
ca*ha,b[9]=-da*ha,b[2]=-ea*ha,b[6]=c*Z+e,b[10]=a-g*Z):a.order===m.EulerRotationOrders.XZY&&(a=ca*l,c=ca*ea,e=da*l,g=da*ea,b[0]=l*ha,b[4]=-Z,b[8]=ea*ha,b[1]=a*Z+g,b[5]=ca*ha,b[9]=c*Z-e,b[2]=e*Z-c,b[6]=da*ha,b[10]=g*Z+a);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};d.fromQuaternion=function(a,b){void 0===b&&(b=new d);var c=a[0],e=a[1],g=a[2];a=a[3];var n=c+c,k=e+e,t=g+g;c*=n;var q=e*n;e*=k;var r=g*n,B=g*k;g*=t;n*=a;k*=a;a*=t;b[0]=1-e-g;b[1]=q+a;b[2]=r-k;b[3]=0;b[4]=q-a;b[5]=1-c-g;
b[6]=B+n;b[7]=0;b[8]=r+k;b[9]=B-n;b[10]=1-c-e;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};d.fromRotation=function(a,b,c){void 0===c&&(c=new d);u=b[0];v=b[1];w=b[2];Ka=Math.hypot(u,v,w);if(Ka<Pa)return null;Ka=1/Ka;u*=Ka;v*=Ka;w*=Ka;p=Math.sin(a);l=Math.cos(a);ma=1-l;c[0]=u*u*ma+l;c[1]=v*u*ma+w*p;c[2]=w*u*ma-v*p;c[3]=0;c[4]=u*v*ma-w*p;c[5]=v*v*ma+l;c[6]=w*v*ma+u*p;c[7]=0;c[8]=u*w*ma+v*p;c[9]=v*w*ma-u*p;c[10]=w*w*ma+l;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c};d.fromRotationX=function(a,
b){void 0===b&&(b=new d);p=Math.sin(a);l=Math.cos(a);b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=l;b[6]=p;b[7]=0;b[8]=0;b[9]=-p;b[10]=l;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};d.fromRotationY=function(a,b){void 0===b&&(b=new d);p=Math.sin(a);l=Math.cos(a);b[0]=l;b[1]=0;b[2]=-p;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=p;b[9]=0;b[10]=l;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};d.fromRotationZ=function(a,b){void 0===b&&(b=new d);p=Math.sin(a);l=Math.cos(a);b[0]=l;b[1]=p;b[2]=0;b[3]=0;b[4]=
-p;b[5]=l;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};d.fromScaling=function(a,b){void 0===b&&(b=new d);b[0]=a[0];b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=a[1];b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=a[2];b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};d.fromTranslation=function(a,b){void 0===b&&(b=new d);b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=a[0];b[13]=a[1];b[14]=a[2];b[15]=1;return b};d.identity=function(a){void 0===
a&&(a=new d);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};d.invert=function(a,b){void 0===b&&(b=new d);I=a[0];C=a[1];D=a[2];J=a[3];L=a[4];K=a[5];E=a[6];M=a[7];N=a[8];O=a[9];P=a[10];Q=a[11];za=a[12];ya=a[13];Aa=a[14];Ja=a[15];x=I*K-C*L;y=I*E-D*L;z=I*M-J*L;R=C*E-D*K;Na=C*M-J*K;Oa=D*M-J*E;Wa=N*ya-O*za;rb=N*Aa-P*za;tb=N*Ja-Q*za;sb=O*Aa-P*ya;ub=O*Ja-Q*ya;vb=P*Ja-Q*Aa;la=x*vb-y*ub+z*sb+R*tb-Na*rb+Oa*Wa;if(!la)return null;
la=1/la;b[0]=(K*vb-E*ub+M*sb)*la;b[1]=(D*ub-C*vb-J*sb)*la;b[2]=(ya*Oa-Aa*Na+Ja*R)*la;b[3]=(P*Na-O*Oa-Q*R)*la;b[4]=(E*tb-L*vb-M*rb)*la;b[5]=(I*vb-D*tb+J*rb)*la;b[6]=(Aa*z-za*Oa-Ja*y)*la;b[7]=(N*Oa-P*z+Q*y)*la;b[8]=(L*ub-K*tb+M*Wa)*la;b[9]=(C*tb-I*ub-J*Wa)*la;b[10]=(za*Na-ya*z+Ja*x)*la;b[11]=(O*z-N*Na-Q*x)*la;b[12]=(K*rb-L*sb-E*Wa)*la;b[13]=(I*sb-C*rb+D*Wa)*la;b[14]=(ya*y-za*R-Aa*x)*la;b[15]=(N*R-O*y+P*x)*la;return b};d.lookAt=function(a,b,c,e){void 0===c&&(c=h.VECTOR3_TOP);void 0===e&&(e=new d);var g=
a[0],n=a[1];a=a[2];var k=c[0];var t=c[1];var q=c[2];var r=b[0];c=b[1];var B=b[2];if(ta(g,r)&&ta(n,c)&&ta(a,B))return d.identity(e);b=g-r;c=n-c;r=a-B;var fa=1/Math.hypot(b,c,r);b*=fa;c*=fa;r*=fa;B=t*r-q*c;q=q*b-k*r;k=k*c-t*b;(fa=Math.hypot(B,q,k))?(fa=1/fa,B*=fa,q*=fa,k*=fa):k=q=B=0;t=c*k-r*q;var Fb=r*B-b*k;var Gb=b*q-c*B;(fa=Math.hypot(t,Fb,Gb))?(fa=1/fa,t*=fa,Fb*=fa,Gb*=fa):Gb=Fb=t=0;e[0]=B;e[1]=t;e[2]=b;e[3]=0;e[4]=q;e[5]=Fb;e[6]=c;e[7]=0;e[8]=k;e[9]=Gb;e[10]=r;e[11]=0;e[12]=-(B*g+q*n+k*a);e[13]=
-(t*g+Fb*n+Gb*a);e[14]=-(b*g+c*n+r*a);e[15]=1;return e};d.multiply=function(a,b,c){void 0===c&&(c=new d);I=a[0];C=a[1];D=a[2];J=a[3];L=a[4];K=a[5];E=a[6];M=a[7];N=a[8];O=a[9];P=a[10];Q=a[11];za=a[12];ya=a[13];Aa=a[14];Ja=a[15];x=b[0];y=b[1];z=b[2];R=b[3];c[0]=x*I+y*L+z*N+R*za;c[1]=x*C+y*K+z*O+R*ya;c[2]=x*D+y*E+z*P+R*Aa;c[3]=x*J+y*M+z*Q+R*Ja;x=b[4];y=b[5];z=b[6];R=b[7];c[4]=x*I+y*L+z*N+R*za;c[5]=x*C+y*K+z*O+R*ya;c[6]=x*D+y*E+z*P+R*Aa;c[7]=x*J+y*M+z*Q+R*Ja;x=b[8];y=b[9];z=b[10];R=b[11];c[8]=x*I+y*L+
z*N+R*za;c[9]=x*C+y*K+z*O+R*ya;c[10]=x*D+y*E+z*P+R*Aa;c[11]=x*J+y*M+z*Q+R*Ja;x=b[12];y=b[13];z=b[14];R=b[15];c[12]=x*I+y*L+z*N+R*za;c[13]=x*C+y*K+z*O+R*ya;c[14]=x*D+y*E+z*P+R*Aa;c[15]=x*J+y*M+z*Q+R*Ja;return c};d.orthogonal=function(a,b,c,e,g,n,k){void 0===k&&(k=new d);var t=1/(a-b),q=1/(c-e),r=1/(g-n);k[0]=-2*t;k[1]=0;k[2]=0;k[3]=0;k[4]=0;k[5]=-2*q;k[6]=0;k[7]=0;k[8]=0;k[9]=0;k[10]=2*r;k[11]=0;k[12]=(a+b)*t;k[13]=(e+c)*q;k[14]=(n+g)*r;k[15]=1;return k};d.perspective=function(a,b,c,e,g){void 0===
g&&(g=new d);Z=1/Math.tan(a/2);g[0]=Z/b;g[1]=0;g[2]=0;g[3]=0;g[4]=0;g[5]=Z;g[6]=0;g[7]=0;g[8]=0;g[9]=0;g[11]=-1;g[12]=0;g[13]=0;g[15]=0;null!==e&&Infinity!==e?(ca=1/(c-e),g[10]=(e+c)*ca,g[14]=2*e*c*ca):(g[10]=-1,g[14]=-2*c);return g};d.rotate=function(a,b,c,e){void 0===e&&(e=new d);u=c[0];v=c[1];w=c[2];Ka=Math.hypot(u,v,w);if(Ka<Pa)return null;Ka=1/Ka;u*=Ka;v*=Ka;w*=Ka;p=Math.sin(b);l=Math.cos(b);ma=1-l;I=a[0];C=a[1];D=a[2];J=a[3];L=a[4];K=a[5];E=a[6];M=a[7];N=a[8];O=a[9];P=a[10];Q=a[11];x=u*u*ma+
l;y=v*u*ma+w*p;z=w*u*ma-v*p;db=u*v*ma-w*p;cb=v*v*ma+l;nb=w*v*ma+u*p;Na=u*w*ma+v*p;Oa=v*w*ma-u*p;Wa=w*w*ma+l;e[0]=I*x+L*y+N*z;e[1]=C*x+K*y+O*z;e[2]=D*x+E*y+P*z;e[3]=J*x+M*y+Q*z;e[4]=I*db+L*cb+N*nb;e[5]=C*db+K*cb+O*nb;e[6]=D*db+E*cb+P*nb;e[7]=J*db+M*cb+Q*nb;e[8]=I*Na+L*Oa+N*Wa;e[9]=C*Na+K*Oa+O*Wa;e[10]=D*Na+E*Oa+P*Wa;e[11]=J*Na+M*Oa+Q*Wa;a!==e&&(e[12]=a[12],e[13]=a[13],e[14]=a[14],e[15]=a[15]);return e};d.rotateX=function(a,b,c){void 0===c&&(c=new d);p=Math.sin(b);l=Math.cos(b);L=a[4];K=a[5];E=a[6];
M=a[7];N=a[8];O=a[9];P=a[10];Q=a[11];a!==c&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]);c[4]=L*l+N*p;c[5]=K*l+O*p;c[6]=E*l+P*p;c[7]=M*l+Q*p;c[8]=N*l-L*p;c[9]=O*l-K*p;c[10]=P*l-E*p;c[11]=Q*l-M*p;return c};d.rotateY=function(a,b,c){void 0===c&&(c=new d);p=Math.sin(b);l=Math.cos(b);I=a[0];C=a[1];D=a[2];J=a[3];N=a[8];O=a[9];P=a[10];Q=a[11];a!==c&&(c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]);c[0]=I*l-N*p;c[1]=C*
l-O*p;c[2]=D*l-P*p;c[3]=J*l-Q*p;c[8]=I*p+N*l;c[9]=C*p+O*l;c[10]=D*p+P*l;c[11]=J*p+Q*l;return c};d.rotateZ=function(a,b,c){void 0===c&&(c=new d);p=Math.sin(b);l=Math.cos(b);I=a[0];C=a[1];D=a[2];J=a[3];L=a[4];K=a[5];E=a[6];M=a[7];a!==c&&(c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]);c[0]=I*l+L*p;c[1]=C*l+K*p;c[2]=D*l+E*p;c[3]=J*l+M*p;c[4]=L*l-I*p;c[5]=K*l-C*p;c[6]=E*l-D*p;c[7]=M*l-J*p;return c};d.scale=function(a,b,c){void 0===c&&(c=new d);u=b[0];v=b[1];
w=b[2];c[0]=a[0]*u;c[1]=a[1]*u;c[2]=a[2]*u;c[3]=a[3]*u;c[4]=a[4]*v;c[5]=a[5]*v;c[6]=a[6]*v;c[7]=a[7]*v;c[8]=a[8]*w;c[9]=a[9]*w;c[10]=a[10]*w;c[11]=a[11]*w;c!==a&&(c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]);return c};d.targetTo=function(a,b,c,e){void 0===c&&(c=h.VECTOR3_TOP);void 0===e&&(e=new d);var g=a[0],n=a[1];a=a[2];var k=c[0],t=c[1],q=c[2];c=g-b[0];var r=n-b[1];b=a-b[2];var B=c*c+r*r+b*b;0<B&&(B=1/Math.sqrt(B),c*=B,r*=B,b*=B);var fa=t*b-q*r;q=q*c-k*b;k=k*r-t*c;B=fa*fa+q*q+k*k;0<B&&(B=1/
Math.sqrt(B),fa*=B,q*=B,k*=B);e[0]=fa;e[1]=q;e[2]=k;e[3]=0;e[4]=r*k-b*q;e[5]=b*fa-c*k;e[6]=c*q-r*fa;e[7]=0;e[8]=c;e[9]=r;e[10]=b;e[11]=0;e[12]=g;e[13]=n;e[14]=a;e[15]=1;return e};d.translate=function(a,b,c){void 0===c&&(c=new d);u=b[0];v=b[1];w=b[2];a===c?(c[12]=a[0]*u+a[4]*v+a[8]*w+a[12],c[13]=a[1]*u+a[5]*v+a[9]*w+a[13],c[14]=a[2]*u+a[6]*v+a[10]*w+a[14],c[15]=a[3]*u+a[7]*v+a[11]*w+a[15]):(I=a[0],C=a[1],D=a[2],J=a[3],L=a[4],K=a[5],E=a[6],M=a[7],N=a[8],O=a[9],P=a[10],Q=a[11],c[0]=I,c[1]=C,c[2]=D,c[3]=
J,c[4]=L,c[5]=K,c[6]=E,c[7]=M,c[8]=N,c[9]=O,c[10]=P,c[11]=Q,c[12]=I*u+L*v+N*w+a[12],c[13]=C*u+K*v+O*w+a[13],c[14]=D*u+E*v+P*w+a[14],c[15]=J*u+M*v+Q*w+a[15]);return c};d.transpose=function(a,b){void 0===b&&(b=new d);b===a?(C=a[1],D=a[2],J=a[3],E=a[6],M=a[7],Q=a[11],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=C,b[6]=a[9],b[7]=a[13],b[8]=D,b[9]=E,b[11]=a[14],b[12]=J,b[13]=M,b[14]=Q):(b[0]=a[0],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=a[1],b[5]=a[5],b[6]=a[9],b[7]=a[13],b[8]=a[2],b[9]=a[6],b[10]=a[10],b[11]=a[14],
b[12]=a[3],b[13]=a[7],b[14]=a[11],b[15]=a[15]);return b};return d}(Float32Array),F,G,H,U,Ca,Da,Ea,ba,Fa=0,La=0,nc=0,Za=0,Sb=0,eb=0,wb=0,xb=0,Ya=new Float32Array(3),Uc=function(f){function d(a,b,c,e){void 0===a&&(a=0);void 0===b&&(b=0);void 0===c&&(c=0);void 0===e&&(e=0);var g=f.call(this,4)||this;g[0]=a;g[1]=b;g[2]=c;g[3]=e;return g}Ba(d,f);Object.defineProperty(d.prototype,"x",{get:function(){return this[0]},set:function(a){this[0]=a},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,
"y",{get:function(){return this[1]},set:function(a){this[1]=a},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"z",{get:function(){return this[2]},set:function(a){this[2]=a},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"w",{get:function(){return this[3]},set:function(a){this[3]=a},enumerable:!1,configurable:!0});d.angleTo=function(a,b){Za=d.dot(a,b);return Math.acos(2*Za*Za-1)};d.conjugate=function(a,b){void 0===b&&(b=new d);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];
b[3]=a[3];return b};d.create=function(a,b,c,e,g){void 0===a&&(a=0);void 0===b&&(b=0);void 0===c&&(c=0);void 0===e&&(e=1);void 0===g&&(g=new d);g[0]=a;g[1]=b;g[2]=c;g[3]=e;return g};d.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};d.fromAxisAngle=function(a,b,c){void 0===c&&(c=new d);b*=.5;Fa=Math.sin(b);c[0]=Fa*a[0];c[1]=Fa*a[1];c[2]=Fa*a[2];c[3]=Math.cos(b);return c};d.fromMatrix3=function(a,b){void 0===b&&(b=new d);var c=a[0]+a[4]+a[8];if(0<c)c=Math.sqrt(c+1),b[3]=.5*c,c=.5/c,
b[0]=(a[5]-a[7])*c,b[1]=(a[6]-a[2])*c,b[2]=(a[1]-a[3])*c;else{var e=0;a[4]>a[0]&&(e=1);a[8]>a[3*e+e]&&(e=2);var g=(e+1)%3,n=(e+2)%3;c=Math.sqrt(a[3*e+e]-a[3*g+g]-a[3*n+n]+1);b[e]=.5*c;c=.5/c;b[3]=(a[3*g+n]-a[3*n+g])*c;b[g]=(a[3*g+e]+a[3*e+g])*c;b[n]=(a[3*n+e]+a[3*e+n])*c}return b};d.identity=function(a){void 0===a&&(a=new d);a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};d.invert=function(a,b){void 0===b&&(b=new d);F=a[0];G=a[1];H=a[2];U=a[3];(Za=F*F+G*G+H*H+U*U)?(La=1/Za,b[0]=-F*La,b[1]=-G*La,b[2]=-H*La,
b[3]=U*La):(b[0]=0,b[1]=0,b[2]=0,b[3]=0);return b};d.lerp=function(a,b,c,e){void 0===e&&(e=new d);F=a[0];G=a[1];H=a[2];U=a[3];e[0]=F+c*(b[0]-F);e[1]=G+c*(b[1]-G);e[2]=H+c*(b[2]-H);e[3]=U+c*(b[3]-U);return e};d.multiply=function(a,b,c){void 0===c&&(c=new d);F=a[0];G=a[1];H=a[2];U=a[3];Ca=b[0];Da=b[1];Ea=b[2];ba=b[3];c[0]=F*ba+U*Ca+G*Ea-H*Da;c[1]=G*ba+U*Da+H*Ca-F*Ea;c[2]=H*ba+U*Ea+F*Da-G*Ca;c[3]=U*ba-F*Ca-G*Da-H*Ea;return c};d.normalize=function(a,b){void 0===b&&(b=new d);F=a[0];G=a[1];H=a[2];U=a[3];
eb=F*F+G*G+H*H+U*U;0<eb&&(eb=1/Math.sqrt(eb));b[0]=F*eb;b[1]=G*eb;b[2]=H*eb;b[3]=U*eb;return b};d.random=function(a){void 0===a&&(a=new d);F=Math.random();G=Math.random();H=Math.random();La=Math.sqrt(1-F);Fa=Math.sqrt(F);a[0]=La*Math.sin(2*Math.PI*G);a[1]=La*Math.cos(2*Math.PI*G);a[2]=Fa*Math.sin(2*Math.PI*H);a[3]=Fa*Math.cos(2*Math.PI*H);return a};d.rotationTo=function(a,b,c){void 0===c&&(c=new d);Za=h.dot(a,b);if(Za<-1+Pa)return h.cross(h.VECTOR3_LEFT,a,Ya),h.norm(Ya)<Pa&&h.cross(h.VECTOR3_TOP,
a,Ya),h.normalize(Ya,Ya),d.fromAxisAngle(Ya,Math.PI,c),c;if(Za>1-Pa)return c[0]=0,c[1]=0,c[2]=0,c[3]=1,c;h.cross(Ya,a,b);c[0]=Ya[0];c[1]=Ya[1];c[2]=Ya[2];c[3]=1+Za;return d.normalize(c,c)};d.rotateX=function(a,b,c){void 0===c&&(c=new d);b*=.5;F=a[0];G=a[1];H=a[2];U=a[3];Ca=Math.sin(b);ba=Math.cos(b);c[0]=F*ba+U*Ca;c[1]=G*ba+H*Ca;c[2]=H*ba-G*Ca;c[3]=U*ba-F*Ca;return c};d.rotateY=function(a,b,c){void 0===c&&(c=new d);b*=.5;F=a[0];G=a[1];H=a[2];U=a[3];Da=Math.sin(b);ba=Math.cos(b);c[0]=F*ba-H*Da;c[1]=
G*ba+U*Da;c[2]=H*ba+F*Da;c[3]=U*ba-G*Da;return c};d.rotateZ=function(a,b,c){void 0===c&&(c=new d);b*=.5;F=a[0];G=a[1];H=a[2];U=a[3];Ea=Math.sin(b);ba=Math.cos(b);c[0]=F*ba+G*Ea;c[1]=G*ba-F*Ea;c[2]=H*ba+U*Ea;c[3]=U*ba-H*Ea;return c};d.slerp=function(a,b,c,e){void 0===e&&(e=new d);F=a[0];G=a[1];H=a[2];U=a[3];Ca=b[0];Da=b[1];Ea=b[2];ba=b[3];La=F*Ca+G*Da+H*Ea+U*ba;0>La&&(La=-La,Ca=-Ca,Da=-Da,Ea=-Ea,ba=-ba);1-La>Pa?(Sb=Math.acos(La),Fa=Math.sin(Sb),wb=Math.sin((1-c)*Sb)/Fa,xb=Math.sin(c*Sb)/Fa):(wb=1-
c,xb=c);e[0]=wb*F+xb*Ca;e[1]=wb*G+xb*Da;e[2]=wb*H+xb*Ea;e[3]=wb*U+xb*ba;return e};d.toAxisAngle=function(a,b){nc=2*Math.acos(a[3]);Fa=Math.sin(nc/2);Fa>Pa?(b[0]=a[0]/Fa,b[1]=a[1]/Fa,b[2]=a[2]/Fa):(b[0]=1,b[1]=0,b[2]=0);return nc};d.toString=function(a){return'quat("'.concat(a[0],", ").concat(a[1],", ").concat(a[2],", ").concat(a[3],")")};return d}(Float32Array),yb=new h,zb=new h,Ab=new h,fb=new h,ob=new h,gb=new h,$a=new h,Tb=new h,ib=new h,Vc=[1,1,1],Fc=function(){function f(d,a){void 0===d&&(d=
new h);void 0===a&&(a=h.fromArray(Vc));this.min=new h;this.max=new h;h.min(d,a,this.min);h.max(d,a,this.max)}f.clampPoint=function(d,a,b){void 0===b&&(b=new h);return h.clamp(a,d.min,d.max,b)};f.containsPoint=function(d,a){return a[0]>=d.min[0]&&a[0]<=d.max[0]&&a[1]>=d.min[1]&&a[1]<=d.max[1]&&a[2]>=d.min[2]&&a[2]<=d.max[2]};f.containsCube=function(d,a){return d.min[0]<=a.min[0]&&a.max[0]<=d.max[0]&&d.min[1]<=a.min[1]&&a.max[1]<=d.max[1]&&d.min[2]<=a.min[2]&&a.max[2]<=d.max[2]};f.depth=function(d){return d.max[2]-
d.min[2]};f.equals=function(d,a){return h.equals(d.min,a.min)&&h.equals(d.max,a.max)};f.getCenter=function(d,a){void 0===a&&(a=new h);h.add(d.min,d.max,a);return h.multiplyScalar(a,.5,a)};f.getSize=function(d,a){void 0===a&&(a=new h);return h.minus(d.max,d.min,a)};f.height=function(d){return d.max[1]-d.min[1]};f.intersect=function(d,a,b){void 0===b&&(b=new f);h.max(d.min,a.min,b.min);h.min(d.max,a.max,b.max);return b};f.intersectsBox=function(d,a){return!(a.max[0]<d.min[0]||a.min[0]>d.max[0]||a.max[1]<
d.min[1]||a.min[1]>d.max[1]||a.max[2]<d.min[2]||a.min[2]>d.max[2])};f.intersectsSphere=function(d,a){f.clampPoint(d,a.position,$a);return h.distanceToSquared($a,a.position)<=a.radius*a.radius};f.intersectsTriangle=function(d,a){if(f.isEmpty(d))return!1;f.getCenter(d,$a);h.minus(d.max,$a,Tb);h.minus(a.a,$a,Ab);h.minus(a.b,$a,yb);h.minus(a.c,$a,zb);h.minus(yb,Ab,gb);h.minus(zb,yb,fb);h.minus(Ab,zb,ob);d=[0,-gb[2],gb[1],0,-fb[2],fb[1],0,-ob[2],ob[1],gb[2],0,-gb[0],fb[2],0,-fb[0],ob[2],0,-ob[0],-gb[1],
gb[0],0,-fb[1],fb[0],0,-ob[1],ob[0],0];if(!cc(d,Ab,yb,zb,Tb)||!cc(d,Ab,yb,zb,Tb))return!1;h.cross(gb,fb,$a);return cc($a,Ab,yb,zb,Tb)};f.isEmpty=function(d){return d.max[0]<d.min[0]||d.max[0]<d.min[0]||d.max[0]<d.min[0]};f.round=function(d,a){void 0===a&&(a=new f);h.round(d.min,a.min);h.round(d.max,a.max);return a};f.size=function(d,a){void 0===a&&(a=new h);return h.minus(d.max,d.min,a)};f.stretch=function(d,a,b,c){void 0===c&&(c=new f);h.add(d.min,a,c.min);h.add(d.max,b,c.max);return c};f.translate=
function(d,a,b){void 0===b&&(b=new f);h.add(d.min,a,b.min);h.add(d.max,a,b.max);return b};f.union=function(d,a,b){void 0===b&&(b=new f);h.min(d.min,a.min,b.min);h.max(d.max,a.max,b.max);return b};f.volume=function(d){return(d.max[0]-d.min[0])*(d.max[1]-d.min[1])*(d.max[2]-d.min[2])};f.width=function(d){return d.max[0]-d.min[0]};return f}(),Kb,xc,dc,ec,fc,yc,Ma=0,Xa=0,oc=0,pc=0,aa=function(f){function d(a,b){void 0===a&&(a=0);void 0===b&&(b=0);var c=f.call(this,2)||this;c[0]=a;c[1]=b;return c}Ba(d,
f);Object.defineProperty(d.prototype,"x",{get:function(){return this[0]},set:function(a){this[0]=a},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"y",{get:function(){return this[1]},set:function(a){this[1]=a},enumerable:!1,configurable:!0});d.VECTOR2_ZERO=new Float32Array([0,0]);d.VECTOR2_TOP=new Float32Array([0,1]);d.VECTOR2_BOTTOM=new Float32Array([0,-1]);d.VECTOR2_LEFT=new Float32Array([-1,0]);d.VECTOR2_RIGHT=new Float32Array([1,0]);d.add=function(a,b,c){void 0===c&&(c=new d);
c[0]=a[0]+b[0];c[1]=a[1]+b[1];return c};d.addScalar=function(a,b,c){void 0===c&&(c=new d(2));c[0]=a[0]+b;c[1]=a[1]+b;return c};d.angle=function(a){return Math.atan2(a[1],a[0])};d.ceil=function(a,b){void 0===b&&(b=new d);b[0]=Math.ceil(a[0]);b[1]=Math.ceil(a[1]);return b};d.clamp=function(a,b,c,e){void 0===e&&(e=new d);e[0]=na(a[0],b[0],c[0]);e[1]=na(a[1],b[1],c[1]);return e};d.clampSafe=function(a,b,c,e){void 0===e&&(e=new d);e[0]=ab(a[0],b[0],c[0]);e[1]=ab(a[1],b[1],c[1]);return e};d.clampLength=
function(a,b,c,e){void 0===e&&(e=new d);e[0]=ab(a[0],b[0],c[0]);e[1]=ab(a[1],b[1],c[1]);return e};d.clampScalar=function(a,b,c,e){void 0===e&&(e=new d);e[0]=na(a[0],b,c);e[1]=na(a[1],b,c);return e};d.closeTo=function(a,b,c){void 0===c&&(c=Pa);return d.distanceTo(a,b)<=c};d.closeToRect=function(a,b,c){void 0===c&&(c=Pa);return ta(a[0],b[0],c)&&ta(a[1],b[1],c)};d.closeToManhattan=function(a,b,c){void 0===c&&(c=Pa);return d.distanceToManhattan(a,b)<=c};d.clone=function(a,b){void 0===b&&(b=new d);b[0]=
a[0];b[1]=a[1];return b};d.cross=function(a,b){return a[0]*b[1]-a[1]*b[0]};d.create=function(a,b,c){void 0===a&&(a=0);void 0===b&&(b=0);void 0===c&&(c=new d);c[0]=a;c[1]=b;return c};d.distanceTo=function(a,b){Ma=b[0]-a[0];Xa=b[1]-a[1];return Math.hypot(Ma,Xa)};d.distanceToManhattan=function(a,b){return Math.abs(a[0]-b[0])+Math.abs(a[1]-b[1])};d.distanceToSquared=function(a,b){Ma=a[0]-b[0];Xa=a[1]-b[1];return Ma*Ma+Xa*Xa};d.divide=function(a,b,c){void 0===c&&(c=new d);c[0]=a[0]/b[0];c[1]=a[1]/b[1];
return c};d.divideScalar=function(a,b,c){void 0===c&&(c=new d);return d.multiplyScalar(a,1/b,c)};d.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]};d.equals=function(a,b){return a[0]===b[0]&&a[1]===b[1]};d.floor=function(a,b){void 0===b&&(b=new d);b[0]=Math.floor(a[0]);b[1]=Math.floor(a[1]);return b};d.floorToZero=function(a,b){void 0===b&&(b=new d);b[0]=Lb(a[0]);b[1]=Lb(a[1]);return b};d.fromArray=function(a,b,c){void 0===b&&(b=0);void 0===c&&(c=new d);c[0]=a[b];c[1]=a[b+1];return c};d.fromJson=function(a,
b){void 0===b&&(b=new d);b[0]=a.x;b[1]=a.y;return b};d.fromPolar=function(a,b){void 0===b&&(b=new d);b[0]=Math.cos(a.a)*a.r;b[1]=Math.sin(a.a)*a.r;return b};d.fromScalar=function(a,b){void 0===a&&(a=0);void 0===b&&(b=new d);b[0]=b[1]=a;return b};d.inverse=function(a,b){void 0===b&&(b=new d);b[0]=1/a[0]||0;b[1]=1/a[1]||0;return b};d.norm=function(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])};d.lengthManhattan=function(a){return Math.abs(a[0])+Math.abs(a[1])};d.lengthSquared=function(a){return a[0]*a[0]+
a[1]*a[1]};d.lerp=function(a,b,c,e){void 0===e&&(e=new d);e[0]=(b[0]-a[0])*c+a[0];e[1]=(b[1]-a[1])*c+a[1];return e};d.max=function(a,b,c){void 0===c&&(c=new d);c[0]=Math.max(a[0],b[0]);c[1]=Math.max(a[1],b[1]);return c};d.min=function(a,b,c){void 0===c&&(c=new d);c[0]=Math.min(a[0],b[0]);c[1]=Math.min(a[1],b[1]);return c};d.minus=function(a,b,c){void 0===c&&(c=new d);c[0]=a[0]-b[0];c[1]=a[1]-b[0];return c};d.minusScalar=function(a,b,c){void 0===c&&(c=new d);c[0]=a[0]-b;c[1]=a[1]-b;return c};d.multiply=
function(a,b,c){void 0===c&&(c=new d);c[0]=a[0]*b[0];c[1]=a[1]*b[1];return c};d.multiplyScalar=function(a,b,c){void 0===c&&(c=new d);c[0]=a[0]*b;c[1]=a[1]*b;return c};d.negate=function(a,b){void 0===b&&(b=new d);b[0]=-a[0];b[1]=-a[1];return b};d.normalize=function(a,b){void 0===b&&(b=new d);return d.divideScalar(a,d.norm(a)||1,b)};d.random=function(a,b){void 0===a&&(a=1);void 0===b&&(b=new d);Ma=Math.random()*zc;b[0]=Math.cos(Ma)*a;b[1]=Math.sin(Ma)*a;return b};d.rotate=function(a,b,c,e){void 0===
c&&(c=d.VECTOR2_ZERO);void 0===e&&(e=new d(2));oc=Math.cos(b);pc=Math.sin(b);Ma=a[0]-c[0];Xa=a[1]-c[1];e[0]=Ma*oc-Xa*pc+c[0];e[1]=Ma*pc+Xa*oc+c[1];return e};d.round=function(a,b){void 0===b&&(b=new d);b[0]=Math.round(a[0]);b[1]=Math.round(a[1]);return b};d.set=function(a,b,c){void 0===a&&(a=0);void 0===b&&(b=0);void 0===c&&(c=new d);c[0]=a;c[1]=b;return c};d.setLength=function(a,b,c){void 0===c&&(c=new d(2));d.normalize(a,c);d.multiplyScalar(c,b,c);return c};d.toArray=function(a,b){void 0===b&&(b=
[]);b[0]=a[0];b[1]=a[1];return b};d.toPalorJson=function(a,b){void 0===b&&(b={a:0,r:0});b.r=d.norm(a);b.a=d.angle(a);return b};d.toString=function(a){return"(".concat(a[0],", ").concat(a[1],")")};d.transformMatrix3=function(a,b,c){Ma=a[0];Xa=a[1];c[0]=b[0]*Ma+b[3]*Xa+b[6];c[1]=b[1]*Ma+b[4]*Xa+b[7];return c};return d}(Float32Array),Wc=function(){function f(d,a){void 0===d&&(d=aa.create());void 0===a&&(a=aa.create(1,1));this.min=aa.create();this.max=aa.create();aa.min(d,a,this.min);aa.max(d,a,this.max)}
f.area=function(d){return(d.max[0]-d.min[0])*(d.max[1]-d.min[1])};f.containsPoint=function(d,a){return a[0]>=d.min[0]&&a[0]<=d.max[0]&&a[1]>=d.min[1]&&a[1]<=d.max[1]};f.containsRectangle=function(d,a){return d.min[0]<=a.min[0]&&a.max[0]<=d.max[0]&&d.min[1]<=a.min[1]&&a.max[1]<=d.max[1]};f.create=function(d,a){void 0===d&&(d=aa.create());void 0===a&&(a=aa.create(1,1));return{max:aa.max(d,a),min:aa.min(d,a)}};f.equals=function(d,a){return aa.equals(d.min,a.min)&&aa.equals(d.max,a.max)};f.getCenter=
function(d,a){void 0===a&&(a=aa.create());aa.add(d.min,d.max,a);return aa.multiplyScalar(a,.5,a)};f.getSize=function(d,a){void 0===a&&(a=aa.create());return aa.minus(d.max,d.min,a)};f.height=function(d){return d.max[1]-d.min[1]};f.intersect=function(d,a,b){void 0===b&&(b=new f);aa.max(d.min,a.min,b.min);aa.min(d.max,a.max,b.max);return b};f.stretch=function(d,a,b,c){void 0===c&&(c=new f);aa.add(d.min,a,c.min);aa.add(d.max,b,c.max);return c};f.translate=function(d,a,b){void 0===b&&(b=new f);aa.add(d.min,
a,b.min);aa.add(d.max,a,b.max);return b};f.union=function(d,a,b){void 0===b&&(b=new f);aa.min(d.min,a.min,b.min);aa.max(d.max,a.max,b.max);return b};f.width=function(d){return d.max[0]-d.min[0]};return f}(),qc=0,Xc=function(){function f(d,a){void 0===d&&(d=new h);void 0===a&&(a=1);this.position=d;this.radius=a}f.boundingBox=function(d,a){void 0===a&&(a=new Fc);h.minusScalar(d.position,d.radius,a.min);h.addScalar(d.position,d.radius,a.max);return a};f.containsPoint=function(d,a){return h.distanceToSquared(d.position,
a)<=d.radius*d.radius};f.distanceToPoint=function(d,a){return h.distanceTo(d.position,a)-d.radius};f.equals=function(d,a){return h.equals(d.position,a.position)&&d.radius===a.radius};f.intersectsSphere=function(d,a){qc=d.radius+a.radius;return h.distanceToSquared(d.position,a.position)<=qc*qc};return f}(),Gc=[-1,-1,0],Hc=[1,-1,0],Ic=[0,1,0],Jc=new h,Kc=new h,Yc=function(){function f(d,a,b){void 0===d&&(d=new Float32Array(Gc));void 0===a&&(a=new Float32Array(Hc));void 0===b&&(b=new Float32Array(Ic));
this.a=d;this.b=a;this.c=b}f.area=function(d){var a=f.getABLength(d),b=f.getBCLength(d);d=f.getCALength(d);var c=(a+b+d)/2;return Math.sqrt(c*(c-b)*(c-d)*(c-a))};f.create=function(d,a,b){void 0===d&&(d=new Float32Array(Gc));void 0===a&&(a=new Float32Array(Hc));void 0===b&&(b=new Float32Array(Ic));return{a:d,b:a,c:b}};f.getABLength=function(d){return h.distanceTo(d.a,d.b)};f.getBCLength=function(d){return h.distanceTo(d.b,d.c)};f.getCALength=function(d){return h.distanceTo(d.c,d.a)};f.normal=function(d,
a){void 0===a&&(a=h.create());h.minus(d.c,d.b,Kc);h.minus(d.b,d.a,Jc);h.cross(Jc,Kc,a);return h.normalize(a)};f.toFloat32Array=function(d,a){void 0===a&&(a=new Float32Array(3));a.set(d.a,0);a.set(d.b,3);a.set(d.c,6);return h.normalize(a)};return f}(),V,W,X,Y,Hb,Ib,Jb,hb,Ub,Vb,Wb,Xb,rc,sc,tc,uc,vc,wc,Yb,Zb,$b,ac,Zc=function(f){function d(a,b,c,e){void 0===a&&(a=0);void 0===b&&(b=0);void 0===c&&(c=0);void 0===e&&(e=0);var g=f.call(this,4)||this;g[0]=a;g[1]=b;g[2]=c;g[3]=e;return g}Ba(d,f);Object.defineProperty(d.prototype,
"x",{get:function(){return this[0]},set:function(a){this[0]=a},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"y",{get:function(){return this[1]},set:function(a){this[1]=a},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"z",{get:function(){return this[2]},set:function(a){this[2]=a},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"w",{get:function(){return this[3]},set:function(a){this[3]=a},enumerable:!1,configurable:!0});d.add=function(a,b,
c){void 0===c&&(c=new d);c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];return c};d.ceil=function(a,b){void 0===b&&(b=new d);b[0]=Math.ceil(a[0]);b[1]=Math.ceil(a[1]);b[2]=Math.ceil(a[2]);b[3]=Math.ceil(a[3]);return b};d.closeTo=function(a,b){return ta(a[0],b[0])&&ta(a[1],b[1])&&ta(a[2],b[2])&&ta(a[3],b[3])};d.create=function(a,b,c,e,g){void 0===a&&(a=0);void 0===b&&(b=0);void 0===c&&(c=0);void 0===e&&(e=0);void 0===g&&(g=new d);g[0]=a;g[1]=b;g[2]=c;g[3]=e;return g};d.cross=function(a,
b,c,e){void 0===e&&(e=new Float32Array(4));rc=b[0]*c[1]-b[1]*c[0];sc=b[0]*c[2]-b[2]*c[0];tc=b[0]*c[3]-b[3]*c[0];uc=b[1]*c[2]-b[2]*c[1];vc=b[1]*c[3]-b[3]*c[1];wc=b[2]*c[3]-b[3]*c[2];Yb=a[0];Zb=a[1];$b=a[2];ac=a[3];e[0]=Zb*wc-$b*vc+ac*uc;e[1]=-(Yb*wc)+$b*tc-ac*sc;e[2]=Yb*vc-Zb*tc+ac*rc;e[3]=-(Yb*uc)+Zb*sc-$b*rc;return e};d.distanceTo=function(a,b){V=b[0]-a[0];W=b[1]-a[1];X=b[2]-a[2];Y=b[3]-a[3];return Math.hypot(V,W,X,Y)};d.distanceToSquared=function(a,b){V=b[0]-a[0];W=b[1]-a[1];X=b[2]-a[2];Y=b[3]-
a[3];return V*V+W*W+X*X+Y*Y};d.divide=function(a,b,c){void 0===c&&(c=new d);c[0]=a[0]/b[0];c[1]=a[1]/b[1];c[2]=a[2]/b[2];c[3]=a[3]/b[3];return c};d.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};d.equals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]};d.floor=function(a,b){void 0===b&&(b=new d);b[0]=Math.floor(a[0]);b[1]=Math.floor(a[1]);b[2]=Math.floor(a[2]);b[3]=Math.floor(a[3]);return b};d.fromValues=function(a,b,c,e,g){void 0===g&&(g=new d);g[0]=a;g[1]=
b;g[2]=c;g[3]=e;return g};d.inverse=function(a,b){void 0===b&&(b=new d);b[0]=1/a[0];b[1]=1/a[1];b[2]=1/a[2];b[3]=1/a[3];return b};d.norm=function(a){return Math.hypot(a[0],a[1],a[2],a[3])};d.lengthSquared=function(a){V=a[0];W=a[1];X=a[2];Y=a[3];return V*V+W*W+X*X+Y*Y};d.lerp=function(a,b,c,e){void 0===e&&(e=new d);V=a[0];W=a[1];X=a[2];Y=a[3];e[0]=V+c*(b[0]-V);e[1]=W+c*(b[1]-W);e[2]=X+c*(b[2]-X);e[3]=Y+c*(b[3]-Y);return e};d.max=function(a,b,c){void 0===c&&(c=new d);c[0]=Math.max(a[0],b[0]);c[1]=Math.max(a[1],
b[1]);c[2]=Math.max(a[2],b[2]);c[3]=Math.max(a[3],b[3]);return c};d.min=function(a,b,c){void 0===c&&(c=new d);c[0]=Math.min(a[0],b[0]);c[1]=Math.min(a[1],b[1]);c[2]=Math.min(a[2],b[2]);c[3]=Math.min(a[3],b[3]);return c};d.minus=function(a,b,c){void 0===c&&(c=new d);c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];c[3]=a[3]-b[3];return c};d.multiply=function(a,b,c){void 0===c&&(c=new d);c[0]=a[0]*b[0];c[1]=a[1]*b[1];c[2]=a[2]*b[2];c[3]=a[3]*b[3];return c};d.multiplyScalar=function(a,b,c){void 0===c&&(c=
new d);c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;return c};d.negate=function(a,b){void 0===b&&(b=new d);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=-a[3];return b};d.normalize=function(a,b){void 0===b&&(b=new d);V=a[0];W=a[1];X=a[2];Y=a[3];hb=V*V+W*W+X*X+Y*Y;0<hb&&(hb=1/Math.sqrt(hb));b[0]=V*hb;b[1]=W*hb;b[2]=X*hb;b[3]=Y*hb;return b};d.round=function(a,b){void 0===b&&(b=new d);b[0]=Math.round(a[0]);b[1]=Math.round(a[1]);b[2]=Math.round(a[2]);b[3]=Math.round(a[3]);return b};d.toString=function(a){return"(".concat(a[0],
", ").concat(a[1],", ").concat(a[2],", ").concat(a[3],")")};d.transformMatrix4=function(a,b,c){void 0===c&&(c=new d);V=a[0];W=a[1];X=a[2];Y=a[3];c[0]=b[0]*V+b[4]*W+b[8]*X+b[12]*Y;c[1]=b[1]*V+b[5]*W+b[9]*X+b[13]*Y;c[2]=b[2]*V+b[6]*W+b[10]*X+b[14]*Y;c[3]=b[3]*V+b[7]*W+b[11]*X+b[15]*Y;return c};d.transformQuat=function(a,b,c){void 0===c&&(c=new d);Hb=a[0];Ib=a[1];Jb=a[2];V=b[0];W=b[1];X=b[2];Y=b[3];Ub=Y*Hb+W*Jb-X*Ib;Vb=Y*Ib+X*Hb-V*Jb;Wb=Y*Jb+V*Ib-W*Hb;Xb=-V*Hb-W*Ib-X*Jb;c[0]=Ub*Y+Xb*-V+Vb*-X-Wb*-W;c[1]=
Vb*Y+Xb*-W+Wb*-V-Ub*-X;c[2]=Wb*Y+Xb*-X+Ub*-W-Vb*-V;c[3]=a[3];return c};return d}(Float32Array);m.COLOR_HEX_MAP=jb;m.ColorGPU=Oc;m.ColorRGB=Nc;m.ColorRGBA=Mc;m.Constants=Lc;m.Cube=Fc;m.Easing=Pc;m.EulerAngle=Qc;m.Matrix2=Rc;m.Matrix3=Sc;m.Matrix4=Tc;m.Quaternion=Uc;m.Rectangle2=Wc;m.Sphere=Xc;m.Triangle3=Yc;m.Vector2=aa;m.Vector3=h;m.Vector4=Zc;m.ceilPowerOfTwo=function(f){return Math.pow(2,Math.ceil(Math.log(f)/Math.LN2))};m.clamp=na;m.clampCircle=function(f,d,a){pb=a-d;qb=Lb(d/pb)*pb+f%pb;return qb<
d?qb+pb:qb>a?qb-pb:qb};m.clampSafe=ab;m.closeTo=ta;m.floorPowerOfTwo=function(f){return Math.pow(2,Math.floor(Math.log(f)/Math.LN2))};m.floorToZero=Lb;m.isPowerOfTwo=function(f){return 0===(f&f-1)&&0!==f};m.lerp=function(f,d,a){return(d-f)*a+f};m.mapRange=function(f,d,a){gc=d[1]-d[0];Ac=a[1]-a[0];return(f-.5*gc)/Ac/gc};m.randFloat=function(f,d){void 0===f&&(f=0);void 0===d&&(d=1);return f+Math.random()*(d-f)};m.randInt=function(f,d){void 0===f&&(f=0);void 0===d&&(d=1);return f+Math.floor(Math.random()*
(d-f+1))};m.rndFloat=function(f,d){return f+Math.random()*(d-f)};m.rndFloatRange=function(f){return f*(.5-Math.random())};m.rndInt=function(f,d){return f+Math.floor(Math.random()*(d-f+1))};m.sum=function(){for(var f=[],d=0;d<arguments.length;d++)f[d]=arguments[d];return Cc(f)};m.sumArray=Cc;Object.defineProperty(m,"__esModule",{value:!0})});

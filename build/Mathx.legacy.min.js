/*
 *****************************************************************************
 Copyright (c) Microsoft Corporation.

 Permission to use, copy, modify, and/or distribute this software for any
 purpose with or without fee is hereby granted.

 THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
 REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
 AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
 INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
 LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
 OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
 PERFORMANCE OF THIS SOFTWARE.
*****************************************************************************/
(function(m,Ca){"object"===typeof exports&&"undefined"!==typeof module?Ca(exports):"function"===typeof define&&define.amd?define(["exports"],Ca):(m="undefined"!==typeof globalThis?globalThis:m||self,Ca(m.Mathx={}))})(this,function(m){function Ca(f,d){function a(){this.constructor=f}if("function"!==typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");fc(f,d);f.prototype=null===d?Object.create(d):(a.prototype=d.prototype,new a)}function gc(f,d,a,b,
c){Pb=0;for(Dc=f.length-3;Pb<=Dc;Pb+=3)if(h.fromArray(f,Pb,qb),Ec=c[0]*Math.abs(qb[0])+c[1]*Math.abs(qb[1])+c[2]*Math.abs(qb[2]),hc=h.dot(d,qb),ic=h.dot(a,qb),jc=h.dot(b,qb),Math.max(-Math.max(hc,ic,jc),Math.min(hc,ic,jc))>Ec)return!1;return!0}var Fc=2*Math.PI,Qa=Math.pow(2,-52),Rc=Object.freeze({__proto__:null,DEG_TO_RAD:Math.PI/180,DEG_360_RAD:Fc,DEG_90_RAD:Math.PI/2,DEG_60_RAD:Math.PI/3,DEG_45_RAD:Math.PI/4,DEG_30_RAD:Math.PI/6,EPSILON:Qa,RAD_TO_DEG:180/Math.PI}),rb={aliceblue:15792383,antiquewhite:16444375,
aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,
darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,
indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,
maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,
papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,
violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},fc=function(f,d){fc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return fc(f,d)},Sc=function(f){function d(a,b,c,e){void 0===a&&(a=0);void 0===b&&(b=0);void 0===c&&(c=0);void 0===e&&(e=1);var g=f.call(this,4)||this;g[0]=a;g[1]=b;g[2]=c;g[3]=e;return g}Ca(d,f);Object.defineProperty(d.prototype,
"r",{get:function(){return this[0]},set:function(a){this[0]=a},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"g",{get:function(){return this[1]},set:function(a){this[1]=a},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"b",{get:function(){return this[2]},set:function(a){this[2]=a},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"a",{get:function(){return this[4]},set:function(a){this[4]=a},enumerable:!1,configurable:!0});d.average=function(a){return(a[0]+
a[1]+a[2])/3};d.averageWeighted=function(a,b,c,e){void 0===b&&(b=.299);void 0===c&&(c=.587);void 0===e&&(e=.114);return a[0]*b+a[1]*c+a[2]*e};d.clone=function(a){return new d(a[0],a[1],a[2],a[3])};d.create=function(a,b,c,e){void 0===a&&(a=0);void 0===b&&(b=0);void 0===c&&(c=0);void 0===e&&(e=1);return new d(a,b,c,e)};d.equals=function(a,b){var c,e,g,n,k,w,q,v;return(null!==(c=a.r)&&void 0!==c?c:a[0])===(null!==(e=b.r)&&void 0!==e?e:b[0])&&(null!==(g=a.g)&&void 0!==g?g:a[1])===(null!==(n=b.g)&&void 0!==
n?n:b[1])&&(null!==(k=a.b)&&void 0!==k?k:a[2])===(null!==(w=b.b)&&void 0!==w?w:b[2])&&(null!==(q=a.a)&&void 0!==q?q:a[3])===(null!==(v=b.a)&&void 0!==v?v:b[3])};d.fromArray=function(a,b){void 0===b&&(b=new d);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b};d.fromHex=function(a,b,c){void 0===b&&(b=255);void 0===c&&(c=new d);c[0]=a>>16;c[1]=a>>8&255;c[2]=a&255;c[3]=b;return c};d.fromJson=function(a,b){void 0===b&&(b=new d);b[0]=a.r;b[1]=a.g;b[2]=a.b;b[3]=a.a;return b};d.fromScalar=function(a,b,c){void 0===
b&&(b=255);void 0===c&&(c=new d);c[0]=a;c[1]=a;c[2]=a;c[3]=b;return c};d.fromString=function(a,b){void 0===b&&(b=new d);if(a in rb)return d.fromHex(rb[a],255,b);if(a.startsWith("#"))return a=a.substr(1),d.fromScalar(parseInt(a,16),255,b);a.startsWith("rgba(")&&(a=a.substring(4,a.length-1),a=a.split(","),b[0]=parseInt(a[0],10),b[1]=parseInt(a[1],10),b[2]=parseInt(a[2],10),b[3]=parseInt(a[3],10));return b};d.grayscale=function(a,b,c,e,g){void 0===b&&(b=.299);void 0===c&&(c=.587);void 0===e&&(e=.114);
void 0===g&&(g=new d);b=d.averageWeighted(a,b,c,e);d.fromScalar(b,a[3],g);return g};return d}(Uint8Array),Tc=function(f){function d(a,b,c){void 0===a&&(a=0);void 0===b&&(b=0);void 0===c&&(c=0);var e=f.call(this,3)||this;e[0]=a;e[1]=b;e[2]=c;return e}Ca(d,f);Object.defineProperty(d.prototype,"r",{get:function(){return this[0]},set:function(a){this[0]=a},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"g",{get:function(){return this[1]},set:function(a){this[1]=a},enumerable:!1,configurable:!0});
Object.defineProperty(d.prototype,"b",{get:function(){return this[2]},set:function(a){this[2]=a},enumerable:!1,configurable:!0});d.average=function(a){return(a[0]+a[1]+a[2])/3};d.averageWeighted=function(a,b,c,e){void 0===b&&(b=.299);void 0===c&&(c=.587);void 0===e&&(e=.114);return a[0]*b+a[1]*c+a[2]*e};d.clone=function(a){return new d(a[0],a[1],a[2])};d.create=function(a,b,c){void 0===a&&(a=0);void 0===b&&(b=0);void 0===c&&(c=0);return new d(a,b,c)};d.equals=function(a,b){var c,e,g,n,k,w;return(null!==
(c=a.r)&&void 0!==c?c:a[0])===(null!==(e=b.r)&&void 0!==e?e:b[0])&&(null!==(g=a.g)&&void 0!==g?g:a[1])===(null!==(n=b.g)&&void 0!==n?n:b[1])&&(null!==(k=a.b)&&void 0!==k?k:a[2])===(null!==(w=b.b)&&void 0!==w?w:b[2])};d.fromArray=function(a,b){void 0===b&&(b=new d);b[0]=a[0];b[1]=a[1];b[2]=a[2];return b};d.fromHex=function(a,b){void 0===b&&(b=new d);b[0]=a>>16;b[1]=a>>8&255;b[2]=a&255;return b};d.fromJson=function(a,b){void 0===b&&(b=new d);b[0]=a.r;b[1]=a.g;b[2]=a.b;return b};d.fromScalar=function(a,
b){void 0===b&&(b=new d);b[0]=a;b[1]=a;b[2]=a;return b};d.fromString=function(a,b){void 0===b&&(b=new d);if(a in rb)return d.fromHex(rb[a],b);if(a.startsWith("#"))return a=a.substr(1),d.fromScalar(parseInt(a,16),b);a.startsWith("rgb(")&&(a=a.substring(4,a.length-1),a=a.split(","),b[0]=parseInt(a[0],10),b[1]=parseInt(a[1],10),b[2]=parseInt(a[2],10));return b};d.grayscale=function(a,b,c,e,g){void 0===b&&(b=.299);void 0===c&&(c=.587);void 0===e&&(e=.114);void 0===g&&(g=new d);a=d.averageWeighted(a,b,
c,e);d.fromScalar(a,g);return g};return d}(Uint8Array),Uc=function(f){function d(a,b,c,e){void 0===a&&(a=0);void 0===b&&(b=0);void 0===c&&(c=0);void 0===e&&(e=0);var g=f.call(this,4)||this;g[0]=a;g[1]=b;g[2]=c;g[3]=e;return g}Ca(d,f);d.fromColorRGB=function(a,b){void 0===b&&(b=new d);b[0]=a[0]/255;b[1]=a[1]/255;b[2]=a[2]/255;b[3]=1;return b};d.fromColorRGBA=function(a,b){void 0===b&&(b=new d);b[0]=a[0]/255;b[1]=a[1]/255;b[2]=a[2]/255;b[3]=a[3]/255;return b};Object.defineProperty(d.prototype,"r",{get:function(){return this[0]},
set:function(a){this[0]=a},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"g",{get:function(){return this[1]},set:function(a){this[1]=a},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"b",{get:function(){return this[2]},set:function(a){this[2]=a},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"a",{get:function(){return this[3]},set:function(a){this[3]=a},enumerable:!1,configurable:!0});d.average=function(a){return(a[0]+a[1]+a[2])/3};d.averageWeighted=
function(a,b,c,e){void 0===b&&(b=.299);void 0===c&&(c=.587);void 0===e&&(e=.114);return a[0]*b+a[1]*c+a[2]*e};d.clone=function(a){return new d(a[0],a[1],a[2],a[3])};d.create=function(a,b,c,e){void 0===a&&(a=0);void 0===b&&(b=0);void 0===c&&(c=0);void 0===e&&(e=0);return new d(a,b,c,e)};d.equals=function(a,b){var c,e,g,n,k,w,q,v;return(null!==(c=a.r)&&void 0!==c?c:a[0])===(null!==(e=b.r)&&void 0!==e?e:b[0])&&(null!==(g=a.g)&&void 0!==g?g:a[1])===(null!==(n=b.g)&&void 0!==n?n:b[1])&&(null!==(k=a.b)&&
void 0!==k?k:a[2])===(null!==(w=b.b)&&void 0!==w?w:b[2])&&(null!==(q=a.a)&&void 0!==q?q:a[3])===(null!==(v=b.a)&&void 0!==v?v:b[3])};d.fromArray=function(a,b){void 0===b&&(b=new d);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b};d.fromHex=function(a,b,c){void 0===b&&(b=1);void 0===c&&(c=new d);c[0]=(a>>16)/255;c[1]=(a>>8&255)/255;c[2]=(a&255)/255;c[3]=b;return c};d.fromJson=function(a,b){void 0===b&&(b=new d);b[0]=a.r;b[1]=a.g;b[2]=a.b;b[3]=a.a;return b};d.fromScalar=function(a,b){void 0===b&&(b=
new d);b[0]=a;b[1]=a;b[2]=a;return b};d.fromString=function(a,b){void 0===b&&(b=new d);if(a in rb)return d.fromHex(rb[a],1,b);if(a.startsWith("#"))return a=a.substr(1),d.fromHex(parseInt(a,16),1,b);a.startsWith("rgb(")&&(a=a.substring(4,a.length-1),a=a.split(","),b[0]=parseInt(a[0],10)/255,b[1]=parseInt(a[1],10)/255,b[2]=parseInt(a[2],10)/255);return b};d.grayscale=function(a,b,c,e,g){void 0===b&&(b=.299);void 0===c&&(c=.587);void 0===e&&(e=.114);void 0===g&&(g=new d);a=d.averageWeighted(a,b,c,e);
d.fromScalar(a,g);return g};return d}(Float32Array),wa=function(f,d,a){return Math.max(d,Math.min(a,f))},Qb=function(f){return 0>f?Math.ceil(f):Math.floor(f)},ub,vb,gb=function(f,d,a){return d>a?Math.max(a,Math.min(d,f)):a>d?Math.max(d,Math.min(a,f)):d},Aa=function(f,d,a){void 0===a&&(a=Qa);return Math.abs(f-d)<=a},kc=0,Gc=0,Hc=0,lc=0,Ic=function(f){lc=0;Hc=f.length;for(var d=0;d<Hc;d++)lc+=f[d];return lc},mc=function(f){return f<1/2.75?7.5625*f*f:f<2/2.75?7.5625*(f-=1.5/2.75)*f+.75:f<2.5/2.75?7.5625*
(f-=2.25/2.75)*f+.9375:7.5625*(f-=2.625/2.75)*f+.984375},Jc=function(f){return 1-mc(1-f)},Vc=Object.freeze({__proto__:null,BackIn:function(f){return 1===f?1:f*f*(2.70158*f-1.70158)},BackOut:function(f){return 0===f?0:--f*f*(2.70158*f+1.70158)+1},BackInOut:function(f){if(1>(f*=2))return.5*f*f*(3.5949095*f-2.5949095);f-=2;return.5*(f*f*(3.5949095*f+2.5949095)+2)},BounceIn:Jc,BounceInOut:function(f){return.5>f?.5*Jc(2*f):.5*mc(2*f-1)+.5},BounceOut:mc,CircularIn:function(f){return 1-Math.sqrt(1-f*f)},
CircularInOut:function(f){if(1>(f*=2))return-.5*(Math.sqrt(1-f*f)-1);f-=2;return.5*(Math.sqrt(1-f*f)+1)},CircularOut:function(f){return Math.sqrt(1- --f*f)},CubicIn:function(f){return f*f*f},CubicInOut:function(f){if(1>(f*=2))return.5*f*f*f;f-=2;return.5*(f*f*f+2)},CubicOut:function(f){return--f*f*f+1},ElasticIn:function(f){return 0===f||1===f?f:-Math.pow(2,10*(f-1))*Math.sin(5*(f-1.1)*Math.PI)},ElasticInOut:function(f){if(0===f||1===f)return f;f*=2;return 1>f?-.5*Math.pow(2,10*(f-1))*Math.sin(5*
(f-1.1)*Math.PI):.5*Math.pow(2,-10*(f-1))*Math.sin(5*(f-1.1)*Math.PI)+1},ElasticOut:function(f){return 0===f||1===f?f:Math.pow(2,-10*f)*Math.sin(5*(f-.1)*Math.PI)+1},ExponentialIn:function(f){return 0===f?0:Math.pow(1024,f-1)},ExponentialInOut:function(f){return 0===f||1===f?f:1>(f*=2)?.5*Math.pow(1024,f-1):.5*(-Math.pow(2,-10*(f-1))+2)},ExponentialOut:function(f){return 1===f?1:1-Math.pow(2,-10*f)},Linear:function(f){return f},QuadraticIn:function(f){return f*f},QuadraticInOut:function(f){return 1>
(f*=2)?.5*f*f:-.5*(--f*(f-2)-1)},QuadraticOut:function(f){return f*(2-f)},QuarticIn:function(f){return f*f*f*f},QuarticInOut:function(f){if(1>(f*=2))return.5*f*f*f*f;f-=2;return-.5*(f*f*f*f-2)},QuarticOut:function(f){return 1- --f*f*f*f},QuinticIn:function(f){return f*f*f*f*f},QuinticInOut:function(f){if(1>(f*=2))return.5*f*f*f*f*f;f-=2;return.5*(f*f*f*f*f+2)},QuinticOut:function(f){return--f*f*f*f*f+1},SinusoidalIn:function(f){return 1-Math.sin((1-f)*Math.PI/2)},SinusoidalInOut:function(f){return.5*
(1-Math.sin(Math.PI*(.5-f)))},SinusoidalOut:function(f){return Math.sin(f*Math.PI/2)}});m.EulerRotationOrders=void 0;(function(f){f.XYZ="xyz";f.ZXY="zxy";f.YZX="yzx";f.XZY="xzy";f.ZYX="zyx";f.YXZ="yxz"})(m.EulerRotationOrders||(m.EulerRotationOrders={}));var Wc=function(f){function d(a,b,c,e){void 0===a&&(a=0);void 0===b&&(b=0);void 0===c&&(c=0);void 0===e&&(e=m.EulerRotationOrders.XYZ);var g=f.call(this,3)||this;g[0]=a;g[1]=b;g[2]=c;g.order=e;return g}Ca(d,f);d.clone=function(a){return new d(a.x,
a.y,a.z,a.order)};d.create=function(a,b,c,e){void 0===a&&(a=0);void 0===b&&(b=0);void 0===c&&(c=0);void 0===e&&(e=m.EulerRotationOrders.XYZ);return new d(a,b,c,e)};d.fromMatrix4=function(a,b){void 0===b&&(b=new d);var c=a[0],e=a[4],g=a[8],n=a[1],k=a[5],w=a[9],q=a[2],v=a[6];a=a[10];switch(b.order){case m.EulerRotationOrders.XYZ:b.y=Math.asin(wa(g,-1,1));.9999999>Math.abs(g)?(b.x=Math.atan2(-w,a),b.z=Math.atan2(-e,c)):(b.x=Math.atan2(v,k),b.z=0);break;case m.EulerRotationOrders.YXZ:b.x=Math.asin(-wa(w,
-1,1));.9999999>Math.abs(w)?(b.y=Math.atan2(g,a),b.z=Math.atan2(n,k)):(b.y=Math.atan2(-q,c),b.z=0);break;case m.EulerRotationOrders.ZXY:b.x=Math.asin(wa(v,-1,1));.9999999>Math.abs(v)?(b.y=Math.atan2(-q,a),b.z=Math.atan2(-e,k)):(b.y=0,b.z=Math.atan2(n,c));break;case m.EulerRotationOrders.ZYX:b.y=Math.asin(-wa(q,-1,1));.9999999>Math.abs(q)?(b.x=Math.atan2(v,a),b.z=Math.atan2(n,c)):(b.x=0,b.z=Math.atan2(-e,k));break;case m.EulerRotationOrders.YZX:b.z=Math.asin(wa(n,-1,1));.9999999>Math.abs(n)?(b.x=Math.atan2(-w,
k),b.y=Math.atan2(-q,c)):(b.x=0,b.y=Math.atan2(g,a));break;case m.EulerRotationOrders.XZY:b.z=Math.asin(-wa(e,-1,1)),.9999999>Math.abs(e)?(b.x=Math.atan2(v,k),b.y=Math.atan2(g,c)):(b.x=Math.atan2(-w,a),b.y=0)}return b};Object.defineProperty(d.prototype,"x",{get:function(){return this[0]},set:function(a){this[0]=a},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"y",{get:function(){return this[1]},set:function(a){this[1]=a},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,
"z",{get:function(){return this[2]},set:function(a){this[2]=a},enumerable:!1,configurable:!0});d.ORDERS=m.EulerRotationOrders;return d}(Float32Array),Ia=0,Ja=0,Ra=0,Sa=0,Gb=0,Hb=0,Ib=0,Jb=0,hb=0,Wa=0,Xa=0,nc=[1,0,0,1],Xc=function(f){function d(a){void 0===a&&(a=nc);return f.call(this,a)||this}Ca(d,f);d.UNIT_MATRIX2=new d(nc);d.add=function(a,b,c){c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];return c};d.adjoint=function(a,b){Ia=a[0];b[0]=a[3];b[1]=-a[1];b[2]=-a[2];b[3]=Ia;return b};
d.clone=function(a){return new d(a)};d.closeTo=function(a,b){Ia=a[0];Ra=a[1];Ja=a[2];Sa=a[3];Gb=b[0];Ib=b[1];Hb=b[2];Jb=b[3];return Aa(Ia,Gb)&&Aa(Ja,Hb)&&Aa(Ra,Ib)&&Aa(Sa,Jb)};d.create=function(a){void 0===a&&(a=nc);return new d(a)};d.determinant=function(a){return a[0]*a[3]-a[1]*a[2]};d.equals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]};d.frobNorm=function(a){return Math.hypot(a[0],a[1],a[2],a[3])};d.fromArray=function(a,b){void 0===b&&(b=new d);b.set(a);return b};d.fromRotation=
function(a,b){void 0===b&&(b=new d);Xa=Math.sin(a);Wa=Math.cos(a);b[0]=Wa;b[1]=Xa;b[2]=-Xa;b[3]=Wa;return b};d.fromScaling=function(a,b){void 0===b&&(b=new d);b[0]=a[0];b[1]=0;b[2]=0;b[3]=a[1];return b};d.identity=function(a){void 0===a&&(a=new d);a[0]=1;a[1]=0;a[2]=0;a[3]=1;return a};d.invert=function(a,b){void 0===b&&(b=new d);Ia=a[0];Ra=a[1];Ja=a[2];Sa=a[3];hb=d.determinant(a);if(!hb)return null;hb=1/hb;b[0]=Sa*hb;b[1]=-Ra*hb;b[2]=-Ja*hb;b[3]=Ia*hb;return b};d.minus=function(a,b,c){void 0===c&&
(c=new d);c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];c[3]=a[3]-b[3];return c};d.multiply=function(a,b,c){void 0===c&&(c=new d);Ia=a[0];Ra=a[1];Ja=a[2];Sa=a[3];Gb=b[0];Ib=b[1];Hb=b[2];Jb=b[3];c[0]=Ia*Gb+Ja*Ib;c[1]=Ra*Gb+Sa*Ib;c[2]=Ia*Hb+Ja*Jb;c[3]=Ra*Hb+Sa*Jb;return c};d.multiplyScalar=function(a,b,c){void 0===c&&(c=new d);c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;return c};d.rotate=function(a,b,c){void 0===c&&(c=new d);Ia=a[0];Ra=a[1];Ja=a[2];Sa=a[3];Xa=Math.sin(b);Wa=Math.cos(b);c[0]=Ia*
Wa+Ja*Xa;c[1]=Ra*Wa+Sa*Xa;c[2]=Ia*-Xa+Ja*Wa;c[3]=Ra*-Xa+Sa*Wa;return c};d.scale=function(a,b,c){void 0===c&&(c=new d);Ia=a[0];Ra=a[1];Ja=a[2];Sa=a[3];Wa=b[0];Xa=b[1];c[0]=Ia*Wa;c[1]=Ra*Wa;c[2]=Ja*Xa;c[3]=Sa*Xa;return c};d.toString=function(a){return"mat2(".concat(a[0],", ").concat(a[1],", ").concat(a[2],", ").concat(a[3],")")};d.transpose=function(a,b){void 0===b&&(b=new d);b===a?(Ja=a[1],b[1]=a[2],b[2]=Ja):(b[0]=a[0],b[1]=a[2],b[2]=a[1],b[3]=a[3]);return b};return d}(Float32Array),fa=0,V=0,W=0,ia=
0,ja=0,aa=0,ma=0,na=0,oa=0,Ta=0,Ya=0,Rb=0,Da=0,Za=0,Sb=0,ib=0,$a=0,Tb=0,xa=0,ya=0,oc=[1,0,0,0,1,0,0,0,1],Yc=function(f){function d(a){void 0===a&&(a=oc);return f.call(this,a)||this}Ca(d,f);d.UNIT_MATRIX3=new d(oc);d.clone=function(a){return new d(a)};d.cofactor00=function(a){return a[4]*a[8]-a[5]*a[7]};d.cofactor01=function(a){return a[1]*a[8]-a[7]*a[2]};d.cofactor02=function(a){return a[1]*a[5]-a[4]*a[2]};d.cofactor10=function(a){return a[3]*a[8]-a[6]*a[5]};d.cofactor11=function(a){return a[0]*a[8]-
a[6]*a[2]};d.cofactor12=function(a){return a[0]*a[5]-a[3]*a[2]};d.cofactor20=function(a){return a[3]*a[7]-a[6]*a[4]};d.cofactor21=function(a){return a[0]*a[7]-a[6]*a[1]};d.cofactor22=function(a){return a[0]*a[4]-a[3]*a[1]};d.create=function(){return new d(oc)};d.determinant=function(a){fa=a[0];V=a[1];W=a[2];ja=a[3];ia=a[4];aa=a[5];ma=a[6];na=a[7];oa=a[8];return fa*(oa*ia-aa*na)+V*(-oa*ja+aa*ma)+W*(na*ja-ia*ma)};d.fromArray=function(a,b){void 0===b&&(b=new d);b.set(a);return b};d.fromMatrix4=function(a,
b){void 0===b&&(b=new d);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[4];b[4]=a[5];b[5]=a[6];b[6]=a[8];b[7]=a[9];b[8]=a[10];return b};d.fromRotation=function(a,b){void 0===b&&(b=new d);ya=Math.sin(a);xa=Math.cos(a);b[0]=xa;b[1]=ya;b[2]=0;b[3]=-ya;b[4]=xa;b[5]=0;b[6]=0;b[7]=0;b[8]=1;return b};d.fromScaling=function(a,b){void 0===b&&(b=new d);b[0]=a[0];b[1]=0;b[2]=0;b[3]=0;b[4]=a[1];b[5]=0;b[6]=0;b[7]=0;b[8]=1;return b};d.fromTranslation=function(a,b){void 0===b&&(b=new d);b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=
1;b[5]=0;b[6]=a[0];b[7]=a[1];b[8]=1;return b};d.identity=function(a){void 0===a&&(a=new d);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};d.invert=function(a,b){void 0===b&&(b=new d);fa=a[0];V=a[1];W=a[2];ja=a[3];ia=a[4];aa=a[5];ma=a[6];na=a[7];oa=a[8];Ya=oa*ia-aa*na;Da=-oa*ja+aa*ma;$a=na*ja-ia*ma;a=fa*Ya+V*Da+W*$a;if(!a)return null;a=1/a;b[0]=Ya*a;b[1]=(-oa*V+W*na)*a;b[2]=(aa*V-W*ia)*a;b[3]=Da*a;b[4]=(oa*fa-W*ma)*a;b[5]=(-aa*fa+W*ja)*a;b[6]=$a*a;b[7]=(-na*fa+V*ma)*a;b[8]=
(ia*fa-V*ja)*a;return b};d.multiply=function(a,b,c){void 0===c&&(c=new d);fa=a[0];V=a[1];W=a[2];ja=a[3];ia=a[4];aa=a[5];ma=a[6];na=a[7];oa=a[8];Ta=b[0];Ya=b[1];Rb=b[2];Za=b[3];Da=b[4];Sb=b[5];ib=b[6];$a=b[7];Tb=b[8];c[0]=Ta*fa+Ya*ja+Rb*ma;c[1]=Ta*V+Ya*ia+Rb*na;c[2]=Ta*W+Ya*aa+Rb*oa;c[3]=Za*fa+Da*ja+Sb*ma;c[4]=Za*V+Da*ia+Sb*na;c[5]=Za*W+Da*aa+Sb*oa;c[6]=ib*fa+$a*ja+Tb*ma;c[7]=ib*V+$a*ia+Tb*na;c[8]=ib*W+$a*aa+Tb*oa;return c};d.multiplyRotationMatrix=function(a,b,c){void 0===c&&(c=new d);fa=a[0];V=a[1];
W=a[2];ja=a[3];ia=a[4];aa=a[5];ma=a[6];na=a[7];oa=a[8];Ta=b[0];Ya=b[1];Za=b[3];Da=b[4];c[0]=Ta*fa+Ya*ja;c[1]=Ta*V+Ya*ia;c[2]=Ta*W+Ya*aa;c[3]=Za*fa+Da*ja;c[4]=Za*V+Da*ia;c[5]=Za*W+Da*aa;c[6]=ma;c[7]=na;c[8]=oa;return c};d.multiplyScaleMatrix=function(a,b,c){void 0===c&&(c=new d);fa=a[0];V=a[1];W=a[2];ja=a[3];ia=a[4];aa=a[5];ma=a[6];na=a[7];oa=a[8];Ta=b[0];Da=b[4];c[0]=Ta*fa;c[1]=Ta*V;c[2]=Ta*W;c[3]=Da*ja;c[4]=Da*ia;c[5]=Da*aa;c[6]=ma;c[7]=na;c[8]=oa;return c};d.multiplyTranslateMatrix=function(a,b,
c){void 0===c&&(c=new d);fa=a[0];V=a[1];W=a[2];ja=a[3];ia=a[4];aa=a[5];ma=a[6];na=a[7];oa=a[8];ib=b[6];$a=b[7];c[0]=fa;c[1]=V;c[2]=W;c[3]=Za;c[4]=Za;c[5]=Za;c[6]=ib*fa+$a*ja+ma;c[7]=ib*V+$a*ia+na;c[8]=ib*W+$a*aa+oa;return c};d.rotate=function(a,b,c){void 0===c&&(c=new d);fa=a[0];V=a[1];W=a[2];ja=a[3];ia=a[4];aa=a[5];ma=a[6];na=a[7];oa=a[8];ya=Math.sin(b);xa=Math.cos(b);c[0]=xa*fa+ya*ja;c[1]=xa*V+ya*ia;c[2]=xa*W+ya*aa;c[3]=ya*ja-xa*fa;c[4]=ya*ia-xa*V;c[5]=ya*aa-xa*W;c[6]=ma;c[7]=na;c[8]=oa;return c};
d.scale=function(a,b,c){void 0===c&&(c=new d);xa=b[0];ya=b[1];c[0]=xa*a[0];c[1]=xa*a[1];c[2]=xa*a[2];c[3]=ya*a[3];c[4]=ya*a[4];c[5]=ya*a[5];c[6]=a[6];c[7]=a[7];c[8]=a[8];return c};d.translate=function(a,b,c){void 0===c&&(c=new d);fa=a[0];V=a[1];W=a[2];ja=a[3];ia=a[4];aa=a[5];ma=a[6];na=a[7];oa=a[8];xa=b[0];ya=b[1];c[0]=fa;c[1]=V;c[2]=W;c[3]=ja;c[4]=ia;c[5]=aa;c[6]=xa*fa+ya*ja+ma;c[7]=xa*V+ya*ia+na;c[8]=xa*W+ya*aa+oa;return c};d.transpose=function(a,b){void 0===b&&(b=new d);b===a?(V=a[1],W=a[2],aa=
a[5],b[1]=a[3],b[2]=a[6],b[3]=V,b[5]=a[7],b[6]=W,b[7]=aa):(b[0]=a[0],b[1]=a[3],b[2]=a[6],b[3]=a[1],b[4]=a[4],b[5]=a[7],b[6]=a[2],b[7]=a[5],b[8]=a[8]);return b};return d}(Float32Array),N,X,Y,Ba,Ua,Va,Ka,pc,h=function(f){function d(a,b,c){void 0===a&&(a=0);void 0===b&&(b=0);void 0===c&&(c=0);var e=f.call(this,3)||this;e[0]=a;e[1]=b;e[2]=c;return e}Ca(d,f);Object.defineProperty(d.prototype,"x",{get:function(){return this[0]},set:function(a){this[0]=a},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,
"y",{get:function(){return this[1]},set:function(a){this[1]=a},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"z",{get:function(){return this[2]},set:function(a){this[2]=a},enumerable:!1,configurable:!0});d.VECTOR3_ZERO=new Float32Array([0,0,0]);d.VECTOR3_ONE=new Float32Array([1,1,1]);d.VECTOR3_TOP=new Float32Array([0,1,0]);d.VECTOR3_BOTTOM=new Float32Array([0,-1,0]);d.VECTOR3_LEFT=new Float32Array([-1,0,0]);d.VECTOR3_RIGHT=new Float32Array([1,0,0]);d.VECTOR3_FRONT=new Float32Array([0,
0,-1]);d.VECTOR3_BACK=new Float32Array([0,0,1]);d.add=function(a,b,c){void 0===c&&(c=new d);c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];return c};d.addScalar=function(a,b,c){void 0===c&&(c=new d);c[0]=a[0]+b;c[1]=a[1]+b;c[2]=a[2]+b;return c};d.angle=function(a,b){N=a[0];X=a[1];Y=a[2];Ba=b[0];Ua=b[1];Va=b[2];var c=Math.sqrt(N*N+X*X+Y*Y)*Math.sqrt(Ba*Ba+Ua*Ua+Va*Va);a=c&&d.dot(a,b)/c;return Math.acos(wa(a,-1,1))};d.clamp=function(a,b,c,e){void 0===e&&(e=new d);e[0]=wa(a[0],b[0],c[0]);e[1]=wa(a[1],
b[1],c[1]);e[2]=wa(a[2],b[2],c[2]);return e};d.clampSafe=function(a,b,c,e){void 0===e&&(e=new d);e[0]=gb(a[0],b[0],c[0]);e[1]=gb(a[1],b[1],c[1]);e[1]=gb(a[2],b[2],c[2]);return e};d.clampScalar=function(a,b,c,e){void 0===e&&(e=new d);e[0]=wa(a[0],b,c);e[1]=wa(a[1],b,c);e[2]=wa(a[2],b,c);return e};d.clone=function(a,b){void 0===b&&(b=new d);b[0]=a[0];b[1]=a[1];b[2]=a[2];return b};d.closeTo=function(a,b){return Aa(a[0],b[0])&&Aa(a[1],b[1])&&Aa(a[2],b[2])};d.create=function(a,b,c,e){void 0===a&&(a=0);
void 0===b&&(b=0);void 0===c&&(c=0);void 0===e&&(e=new d);e[0]=a;e[1]=b;e[2]=c;return e};d.cross=function(a,b,c){void 0===c&&(c=new d);N=a[0];X=a[1];Y=a[2];Ba=b[0];Ua=b[1];Va=b[2];c[0]=X*Va-Y*Ua;c[1]=Y*Ba-N*Va;c[2]=N*Ua-X*Ba;return c};d.distanceTo=function(a,b){N=b[0]-a[0];X=b[1]-a[1];Y=b[2]-a[2];return Math.hypot(N,X,Y)};d.distanceToManhattan=function(a,b){return Math.abs(a[0]-b[0])+Math.abs(a[1]-b[1])+Math.abs(a[2]-b[2])};d.distanceToSquared=function(a,b){N=a[0]-b[0];X=a[1]-b[1];Y=a[2]-b[2];return N*
N+X*X+Y*Y};d.divide=function(a,b,c){void 0===c&&(c=new d);c[0]=a[0]/b[0];c[1]=a[1]/b[1];c[2]=a[2]/b[2];return c};d.divideScalar=function(a,b,c){void 0===c&&(c=new d);c[0]=a[0]/b;c[1]=a[1]/b;c[2]=a[2]/b;return c};d.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]};d.equals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]};d.fromArray=function(a,b,c){void 0===b&&(b=0);void 0===c&&(c=new d);c[0]=a[b];c[1]=a[b+1];c[2]=a[b+2];return c};d.fromScalar=function(a,b){void 0===b&&(b=new d(3));
b[0]=b[1]=b[2]=a;return b};d.fromValues=function(a,b,c,e){void 0===e&&(e=new d(3));e[0]=a;e[1]=b;e[2]=c;return e};d.hermite=function(a,b,c,e,g,n){void 0===n&&(n=new d);Ka=g*g;var k=Ka*(2*g-3)+1,w=Ka*(g-2)+g,q=Ka*(g-1);g=Ka*(3-2*g);n[0]=a[0]*k+b[0]*w+c[0]*q+e[0]*g;n[1]=a[1]*k+b[1]*w+c[1]*q+e[1]*g;n[2]=a[2]*k+b[2]*w+c[2]*q+e[2]*g;return n};d.inverse=function(a,b){void 0===b&&(b=new d);b[0]=1/a[0];b[1]=1/a[1];b[2]=1/a[2];return b};d.norm=function(a){return Math.sqrt(d.lengthSquared(a))};d.lengthManhattan=
function(a){return Math.abs(a[0])+Math.abs(a[1])+Math.abs(a[2])};d.lengthSquared=function(a){return a[0]*a[0]+a[1]*a[1]+a[2]*a[2]};d.lerp=function(a,b,c,e){void 0===e&&(e=new d);e[0]+=(b[0]-a[0])*c;e[1]+=(b[1]-a[1])*c;e[2]+=(b[2]-a[2])*c;return e};d.max=function(a,b,c){void 0===c&&(c=new d);c[0]=Math.max(a[0],b[0]);c[1]=Math.max(a[1],b[1]);c[2]=Math.max(a[2],b[2]);return c};d.min=function(a,b,c){void 0===c&&(c=new d);c[0]=Math.min(a[0],b[0]);c[1]=Math.min(a[1],b[1]);c[2]=Math.min(a[2],b[2]);return c};
d.minus=function(a,b,c){void 0===c&&(c=new d);c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];return c};d.minusScalar=function(a,b,c){void 0===c&&(c=new d);c[0]=a[0]-b;c[1]=a[1]-b;c[2]=a[2]-b;return c};d.multiply=function(a,b,c){void 0===c&&(c=new d);c[0]=a[0]*b[0];c[1]=a[1]*b[1];c[2]=a[2]*b[2];return c};d.multiplyScalar=function(a,b,c){void 0===c&&(c=new d);c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;return c};d.negate=function(a,b){void 0===b&&(b=new d);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];return b};d.normalize=
function(a,b){void 0===b&&(b=new d);return d.divideScalar(a,d.norm(a)||1,b)};d.rotateX=function(a,b,c,e){void 0===e&&(e=new d);N=a[0]-b[0];X=a[1]-b[1];Y=a[2]-b[2];Ba=N;Ua=X*Math.cos(c)-Y*Math.sin(c);Va=X*Math.sin(c)+Y*Math.cos(c);e[0]=Ba+b[0];e[1]=Ua+b[1];e[2]=Va+b[2];return e};d.rotateY=function(a,b,c,e){void 0===e&&(e=new d);N=a[0]-b[0];X=a[1]-b[1];Y=a[2]-b[2];Ba=Y*Math.sin(c)+N*Math.cos(c);Ua=X;Va=Y*Math.cos(c)-N*Math.sin(c);e[0]=Ba+b[0];e[1]=Ua+b[1];e[2]=Va+b[2];return e};d.rotateZ=function(a,
b,c,e){void 0===e&&(e=new d);N=a[0]-b[0];X=a[1]-b[1];Y=a[2]-b[2];Ba=N*Math.cos(c)-X*Math.sin(c);Ua=N*Math.sin(c)+X*Math.cos(c);Va=Y;e[0]=Ba+b[0];e[1]=Ua+b[1];e[2]=Va+b[2];return e};d.round=function(a,b){void 0===b&&(b=new d);b[0]=Math.round(a[0]);b[1]=Math.round(a[1]);b[2]=Math.round(a[2]);return b};d.set=function(a,b,c,e){void 0===a&&(a=0);void 0===b&&(b=0);void 0===c&&(c=0);void 0===e&&(e=new d);e[0]=a;e[1]=b;e[2]=c;return e};d.setNorm=function(a,b,c){void 0===c&&(c=new d);return d.multiplyScalar(d.normalize(a,
c),b,c)};d.slerp=function(a,b,c,e){void 0===e&&(e=new d);Ka=Math.acos(Math.min(Math.max(d.dot(a,b),-1),1));pc=Math.sin(Ka);N=Math.sin((1-c)*Ka)/pc;Ba=Math.sin(c*Ka)/pc;e[0]=N*a[0]+Ba*b[0];e[1]=N*a[1]+Ba*b[1];e[2]=N*a[2]+Ba*b[2];return e};d.toString=function(a){return"(".concat(a[0],", ").concat(a[1],", ").concat(a[2],")")};d.transformMatrix3=function(a,b,c){void 0===c&&(c=new d);N=a[0];X=a[1];Y=a[2];c[0]=N*b[0]+X*b[3]+Y*b[6];c[1]=N*b[1]+X*b[4]+Y*b[7];c[2]=N*b[2]+X*b[5]+Y*b[8];return c};d.transformMatrix4=
function(a,b,c){void 0===c&&(c=new d);N=a[0];X=a[1];Y=a[2];Ka=(Ka=b[3]*N+b[7]*X+b[11]*Y+b[15])||1;c[0]=(b[0]*N+b[4]*X+b[8]*Y+b[12])/Ka;c[1]=(b[1]*N+b[5]*X+b[9]*Y+b[13])/Ka;c[2]=(b[2]*N+b[6]*X+b[10]*Y+b[14])/Ka;return c};d.transformQuat=function(a,b,c){void 0===c&&(c=new d);var e=b[0],g=b[1],n=b[2],k=a[0],w=a[1];a=a[2];var q=g*a-n*w,v=n*k-e*a,O=e*w-g*k;b=2*b[3];c[0]=k+q*b+2*(g*O-n*v);c[1]=w+v*b+2*(n*q-e*O);c[2]=a+O*b+2*(e*v-g*q);return c};return d}(Float32Array),D=0,A=0,B=0,E=0,F=0,G=0,C=0,H=0,I=0,
J=0,K=0,L=0,ra=0,sa=0,ta=0,za=0,r=0,t=0,u=0,S=0,jb=0,kb=0,sb=0,Kc=0,Oa=0,Pa=0,ab=0,wb=0,xb=0,yb=0,zb=0,Ab=0,x=0,y=0,z=0,ua=0,La=0,p=0,va=0,M=0,T=0,l=0,la=0,qa=0,U=0,qc=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Zc=function(f){function d(a){void 0===a&&(a=qc);return f.call(this,a)||this}Ca(d,f);d.UNIT_MATRIX4=new d(qc);d.clone=function(a){return new d(a)};d.create=function(){return new d(qc)};d.determinant=function(a){D=a[0];A=a[1];B=a[2];E=a[3];G=a[4];F=a[5];C=a[6];H=a[7];I=a[8];J=a[9];K=a[10];L=a[11];sa=
a[12];ra=a[13];ta=a[14];za=a[15];r=D*F-A*G;t=D*C-B*G;u=A*C-B*F;S=I*ra-J*sa;kb=I*ta-K*sa;jb=J*ta-K*ra;sb=D*jb-A*kb+B*S;Kc=G*jb-F*kb+C*S;Oa=I*u-J*t+K*r;Pa=sa*u-ra*t+ta*r;return H*sb-E*Kc+za*Oa-L*Pa};d.fromArray=function(a,b){void 0===b&&(b=new d);b.set(a);return b};d.fromEuler=function(a,b){void 0===b&&(b=new d);x=a.x;y=a.y;z=a.z;M=Math.cos(x);T=Math.sin(x);l=Math.cos(y);la=Math.sin(y);qa=Math.cos(z);U=Math.sin(z);if(a.order===m.EulerRotationOrders.XYZ){a=M*qa;var c=M*U,e=T*qa,g=T*U;b[0]=l*qa;b[4]=
-l*U;b[8]=la;b[1]=c+e*la;b[5]=a-g*la;b[9]=-T*l;b[2]=g-a*la;b[6]=e+c*la;b[10]=M*l}else a.order===m.EulerRotationOrders.YXZ?(a=l*qa,c=l*U,e=la*qa,g=la*U,b[0]=a+g*T,b[4]=e*T-c,b[8]=M*la,b[1]=M*U,b[5]=M*qa,b[9]=-T,b[2]=c*T-e,b[6]=g+a*T,b[10]=M*l):a.order===m.EulerRotationOrders.ZXY?(a=l*qa,c=l*U,e=la*qa,g=la*U,b[0]=a-g*T,b[4]=-M*U,b[8]=e+c*T,b[1]=c+e*T,b[5]=M*qa,b[9]=g-a*T,b[2]=-M*la,b[6]=T,b[10]=M*l):a.order===m.EulerRotationOrders.ZYX?(a=M*qa,c=M*U,e=T*qa,g=T*U,b[0]=l*qa,b[4]=e*la-c,b[8]=a*la+g,b[1]=
l*U,b[5]=g*la+a,b[9]=c*la-e,b[2]=-la,b[6]=T*l,b[10]=M*l):a.order===m.EulerRotationOrders.YZX?(a=M*l,c=M*la,e=T*l,g=T*la,b[0]=l*qa,b[4]=g-a*U,b[8]=e*U+c,b[1]=U,b[5]=M*qa,b[9]=-T*qa,b[2]=-la*qa,b[6]=c*U+e,b[10]=a-g*U):a.order===m.EulerRotationOrders.XZY&&(a=M*l,c=M*la,e=T*l,g=T*la,b[0]=l*qa,b[4]=-U,b[8]=la*qa,b[1]=a*U+g,b[5]=M*qa,b[9]=c*U-e,b[2]=e*U-c,b[6]=T*qa,b[10]=g*U+a);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};d.fromQuaternion=function(a,b){void 0===b&&(b=new d);var c=a[0],
e=a[1],g=a[2];a=a[3];var n=c+c,k=e+e,w=g+g;c*=n;var q=e*n;e*=k;var v=g*n,O=g*k;g*=w;n*=a;k*=a;a*=w;b[0]=1-e-g;b[1]=q+a;b[2]=v-k;b[3]=0;b[4]=q-a;b[5]=1-c-g;b[6]=O+n;b[7]=0;b[8]=v+k;b[9]=O-n;b[10]=1-c-e;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};d.fromRotation=function(a,b,c){void 0===c&&(c=new d);x=b[0];y=b[1];z=b[2];La=Math.hypot(x,y,z);if(La<Qa)return null;La=1/La;x*=La;y*=La;z*=La;p=Math.sin(a);l=Math.cos(a);va=1-l;c[0]=x*x*va+l;c[1]=y*x*va+z*p;c[2]=z*x*va-y*p;c[3]=0;c[4]=x*y*va-z*p;c[5]=
y*y*va+l;c[6]=z*y*va+x*p;c[7]=0;c[8]=x*z*va+y*p;c[9]=y*z*va-x*p;c[10]=z*z*va+l;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c};d.fromRotationX=function(a,b){void 0===b&&(b=new d);p=Math.sin(a);l=Math.cos(a);b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=l;b[6]=p;b[7]=0;b[8]=0;b[9]=-p;b[10]=l;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};d.fromRotationY=function(a,b){void 0===b&&(b=new d);p=Math.sin(a);l=Math.cos(a);b[0]=l;b[1]=0;b[2]=-p;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=p;b[9]=0;b[10]=l;b[11]=
0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};d.fromRotationZ=function(a,b){void 0===b&&(b=new d);p=Math.sin(a);l=Math.cos(a);b[0]=l;b[1]=p;b[2]=0;b[3]=0;b[4]=-p;b[5]=l;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};d.fromScaling=function(a,b){void 0===b&&(b=new d);b[0]=a[0];b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=a[1];b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=a[2];b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};d.fromTranslation=function(a,b){void 0===b&&(b=new d);b[0]=1;
b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=a[0];b[13]=a[1];b[14]=a[2];b[15]=1;return b};d.identity=function(a){void 0===a&&(a=new d);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};d.invert=function(a,b){void 0===b&&(b=new d);D=a[0];A=a[1];B=a[2];E=a[3];G=a[4];F=a[5];C=a[6];H=a[7];I=a[8];J=a[9];K=a[10];L=a[11];sa=a[12];ra=a[13];ta=a[14];za=a[15];r=D*F-A*G;t=D*C-B*G;u=D*H-E*G;S=
A*C-B*F;Oa=A*H-E*F;Pa=B*H-E*C;ab=I*ra-J*sa;wb=I*ta-K*sa;yb=I*za-L*sa;xb=J*ta-K*ra;zb=J*za-L*ra;Ab=K*za-L*ta;ua=r*Ab-t*zb+u*xb+S*yb-Oa*wb+Pa*ab;if(!ua)return null;ua=1/ua;b[0]=(F*Ab-C*zb+H*xb)*ua;b[1]=(B*zb-A*Ab-E*xb)*ua;b[2]=(ra*Pa-ta*Oa+za*S)*ua;b[3]=(K*Oa-J*Pa-L*S)*ua;b[4]=(C*yb-G*Ab-H*wb)*ua;b[5]=(D*Ab-B*yb+E*wb)*ua;b[6]=(ta*u-sa*Pa-za*t)*ua;b[7]=(I*Pa-K*u+L*t)*ua;b[8]=(G*zb-F*yb+H*ab)*ua;b[9]=(A*yb-D*zb-E*ab)*ua;b[10]=(sa*Oa-ra*u+za*r)*ua;b[11]=(J*u-I*Oa-L*r)*ua;b[12]=(F*wb-G*xb-C*ab)*ua;b[13]=
(D*xb-A*wb+B*ab)*ua;b[14]=(ra*t-sa*S-ta*r)*ua;b[15]=(I*S-J*t+K*r)*ua;return b};d.lookAt=function(a,b,c,e){void 0===c&&(c=h.VECTOR3_TOP);void 0===e&&(e=new d);var g=a[0],n=a[1];a=a[2];var k=c[0];var w=c[1];var q=c[2];var v=b[0];c=b[1];var O=b[2];if(Aa(g,v)&&Aa(n,c)&&Aa(a,O))return d.identity(e);b=g-v;c=n-c;v=a-O;var pa=1/Math.hypot(b,c,v);b*=pa;c*=pa;v*=pa;O=w*v-q*c;q=q*b-k*v;k=k*c-w*b;(pa=Math.hypot(O,q,k))?(pa=1/pa,O*=pa,q*=pa,k*=pa):k=q=O=0;w=c*k-v*q;var Kb=v*O-b*k;var Lb=b*q-c*O;(pa=Math.hypot(w,
Kb,Lb))?(pa=1/pa,w*=pa,Kb*=pa,Lb*=pa):Lb=Kb=w=0;e[0]=O;e[1]=w;e[2]=b;e[3]=0;e[4]=q;e[5]=Kb;e[6]=c;e[7]=0;e[8]=k;e[9]=Lb;e[10]=v;e[11]=0;e[12]=-(O*g+q*n+k*a);e[13]=-(w*g+Kb*n+Lb*a);e[14]=-(b*g+c*n+v*a);e[15]=1;return e};d.multiply=function(a,b,c){void 0===c&&(c=new d);D=a[0];A=a[1];B=a[2];E=a[3];G=a[4];F=a[5];C=a[6];H=a[7];I=a[8];J=a[9];K=a[10];L=a[11];sa=a[12];ra=a[13];ta=a[14];za=a[15];r=b[0];t=b[1];u=b[2];S=b[3];c[0]=r*D+t*G+u*I+S*sa;c[1]=r*A+t*F+u*J+S*ra;c[2]=r*B+t*C+u*K+S*ta;c[3]=r*E+t*H+u*L+
S*za;r=b[4];t=b[5];u=b[6];S=b[7];c[4]=r*D+t*G+u*I+S*sa;c[5]=r*A+t*F+u*J+S*ra;c[6]=r*B+t*C+u*K+S*ta;c[7]=r*E+t*H+u*L+S*za;r=b[8];t=b[9];u=b[10];S=b[11];c[8]=r*D+t*G+u*I+S*sa;c[9]=r*A+t*F+u*J+S*ra;c[10]=r*B+t*C+u*K+S*ta;c[11]=r*E+t*H+u*L+S*za;r=b[12];t=b[13];u=b[14];S=b[15];c[12]=r*D+t*G+u*I+S*sa;c[13]=r*A+t*F+u*J+S*ra;c[14]=r*B+t*C+u*K+S*ta;c[15]=r*E+t*H+u*L+S*za;return c};d.multiplyScaleMatrix=function(a,b,c){void 0===c&&(c=new d);D=a[0];A=a[1];B=a[2];E=a[3];G=a[4];F=a[5];C=a[6];H=a[7];I=a[8];J=a[9];
K=a[10];L=a[11];sa=a[12];ra=a[13];ta=a[14];za=a[15];r=b[0];c[0]=r*D;c[1]=r*A;c[2]=r*B;c[3]=r*E;t=b[5];c[4]=t*G;c[5]=t*F;c[6]=t*C;c[7]=t*H;u=b[10];c[8]=u*I;c[9]=u*J;c[10]=u*K;c[11]=u*L;c[12]=sa;c[13]=ra;c[14]=ta;c[15]=za;return c};d.multiplyTranslateMatrix=function(a,b,c){void 0===c&&(c=new d);D=a[0];A=a[1];B=a[2];E=a[3];G=a[4];F=a[5];C=a[6];H=a[7];I=a[8];J=a[9];K=a[10];L=a[11];sa=a[12];ra=a[13];ta=a[14];za=a[15];c[0]=D;c[1]=A;c[2]=B;c[3]=E;c[4]=G;c[5]=F;c[6]=C;c[7]=H;c[8]=I;c[9]=J;c[10]=K;c[11]=L;
r=b[12];t=b[13];u=b[14];c[12]=r*D+t*G+u*I+sa;c[13]=r*A+t*F+u*J+ra;c[14]=r*B+t*C+u*K+ta;c[15]=r*E+t*H+u*L+za;return c};d.orthogonal=function(a,b,c,e,g,n,k){void 0===k&&(k=new d);l=1/(a-b);T=1/(c-e);M=1/(g-n);k[0]=-2*l;k[1]=0;k[2]=0;k[3]=0;k[4]=0;k[5]=-2*T;k[6]=0;k[7]=0;k[8]=0;k[9]=0;k[10]=2*M;k[11]=0;k[12]=(a+b)*l;k[13]=(e+c)*T;k[14]=(n+g)*M;k[15]=1;return k};d.orthogonalZ0=function(a,b,c,e,g,n,k){void 0===k&&(k=new d);l=1/(a-b);T=1/(c-e);M=1/(g-n);k[0]=-2*l;k[1]=0;k[2]=0;k[3]=0;k[4]=0;k[5]=-2*T;k[6]=
0;k[7]=0;k[8]=0;k[9]=0;k[10]=M;k[11]=0;k[12]=(a+b)*l;k[13]=(e+c)*T;k[14]=g*M;k[15]=1;return k};d.perspective=function(a,b,c,e,g){void 0===g&&(g=new d);U=1/Math.tan(a/2);g[0]=U/b;g[1]=0;g[2]=0;g[3]=0;g[4]=0;g[5]=U;g[6]=0;g[7]=0;g[8]=0;g[9]=0;g[11]=-1;g[12]=0;g[13]=0;g[15]=0;null!==e&&Infinity!==e?(M=1/(c-e),g[10]=(e+c)*M,g[14]=2*e*c*M):(g[10]=-1,g[14]=-2*c);return g};d.perspectiveZ0=function(a,b,c,e,g){void 0===g&&(g=new d);U=1/Math.tan(a/2);g[0]=U/b;g[1]=0;g[2]=0;g[3]=0;g[4]=0;g[5]=U;g[6]=0;g[7]=
0;g[8]=0;g[9]=0;g[11]=-1;g[12]=0;g[13]=0;g[15]=0;null!==e&&Infinity!==e?(M=1/(c-e),g[10]=e*M,g[14]=e*c*M):(g[10]=-1,g[14]=-c);return g};d.rotate=function(a,b,c,e){void 0===e&&(e=new d);x=c[0];y=c[1];z=c[2];La=Math.hypot(x,y,z);if(La<Qa)return null;La=1/La;x*=La;y*=La;z*=La;p=Math.sin(b);l=Math.cos(b);va=1-l;D=a[0];A=a[1];B=a[2];E=a[3];G=a[4];F=a[5];C=a[6];H=a[7];I=a[8];J=a[9];K=a[10];L=a[11];r=x*x*va+l;t=y*x*va+z*p;u=z*x*va-y*p;kb=x*y*va-z*p;jb=y*y*va+l;sb=z*y*va+x*p;Oa=x*z*va+y*p;Pa=y*z*va-x*p;ab=
z*z*va+l;e[0]=D*r+G*t+I*u;e[1]=A*r+F*t+J*u;e[2]=B*r+C*t+K*u;e[3]=E*r+H*t+L*u;e[4]=D*kb+G*jb+I*sb;e[5]=A*kb+F*jb+J*sb;e[6]=B*kb+C*jb+K*sb;e[7]=E*kb+H*jb+L*sb;e[8]=D*Oa+G*Pa+I*ab;e[9]=A*Oa+F*Pa+J*ab;e[10]=B*Oa+C*Pa+K*ab;e[11]=E*Oa+H*Pa+L*ab;a!==e&&(e[12]=a[12],e[13]=a[13],e[14]=a[14],e[15]=a[15]);return e};d.rotateX=function(a,b,c){void 0===c&&(c=new d);p=Math.sin(b);l=Math.cos(b);G=a[4];F=a[5];C=a[6];H=a[7];I=a[8];J=a[9];K=a[10];L=a[11];a!==c&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[12]=a[12],c[13]=
a[13],c[14]=a[14],c[15]=a[15]);c[4]=G*l+I*p;c[5]=F*l+J*p;c[6]=C*l+K*p;c[7]=H*l+L*p;c[8]=I*l-G*p;c[9]=J*l-F*p;c[10]=K*l-C*p;c[11]=L*l-H*p;return c};d.rotateY=function(a,b,c){void 0===c&&(c=new d);p=Math.sin(b);l=Math.cos(b);D=a[0];A=a[1];B=a[2];E=a[3];I=a[8];J=a[9];K=a[10];L=a[11];a!==c&&(c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]);c[0]=D*l-I*p;c[1]=A*l-J*p;c[2]=B*l-K*p;c[3]=E*l-L*p;c[8]=D*p+I*l;c[9]=A*p+J*l;c[10]=B*p+K*l;c[11]=E*p+L*l;return c};d.rotateZ=
function(a,b,c){void 0===c&&(c=new d);p=Math.sin(b);l=Math.cos(b);D=a[0];A=a[1];B=a[2];E=a[3];G=a[4];F=a[5];C=a[6];H=a[7];a!==c&&(c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]);c[0]=D*l+G*p;c[1]=A*l+F*p;c[2]=B*l+C*p;c[3]=E*l+H*p;c[4]=G*l-D*p;c[5]=F*l-A*p;c[6]=C*l-B*p;c[7]=H*l-E*p;return c};d.scale=function(a,b,c){void 0===c&&(c=new d);x=b[0];y=b[1];z=b[2];c[0]=a[0]*x;c[1]=a[1]*x;c[2]=a[2]*x;c[3]=a[3]*x;c[4]=a[4]*y;c[5]=a[5]*y;c[6]=a[6]*y;c[7]=a[7]*y;c[8]=
a[8]*z;c[9]=a[9]*z;c[10]=a[10]*z;c[11]=a[11]*z;c!==a&&(c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]);return c};d.targetTo=function(a,b,c,e){void 0===c&&(c=h.VECTOR3_TOP);void 0===e&&(e=new d);var g=a[0],n=a[1];a=a[2];var k=c[0],w=c[1],q=c[2];c=g-b[0];var v=n-b[1];b=a-b[2];var O=c*c+v*v+b*b;0<O&&(O=1/Math.sqrt(O),c*=O,v*=O,b*=O);var pa=w*b-q*v;q=q*c-k*b;k=k*v-w*c;O=pa*pa+q*q+k*k;0<O&&(O=1/Math.sqrt(O),pa*=O,q*=O,k*=O);e[0]=pa;e[1]=q;e[2]=k;e[3]=0;e[4]=v*k-b*q;e[5]=b*pa-c*k;e[6]=c*q-v*pa;e[7]=0;
e[8]=c;e[9]=v;e[10]=b;e[11]=0;e[12]=g;e[13]=n;e[14]=a;e[15]=1;return e};d.translate=function(a,b,c){void 0===c&&(c=new d);x=b[0];y=b[1];z=b[2];a===c?(c[12]=a[0]*x+a[4]*y+a[8]*z+a[12],c[13]=a[1]*x+a[5]*y+a[9]*z+a[13],c[14]=a[2]*x+a[6]*y+a[10]*z+a[14],c[15]=a[3]*x+a[7]*y+a[11]*z+a[15]):(D=a[0],A=a[1],B=a[2],E=a[3],G=a[4],F=a[5],C=a[6],H=a[7],I=a[8],J=a[9],K=a[10],L=a[11],c[0]=D,c[1]=A,c[2]=B,c[3]=E,c[4]=G,c[5]=F,c[6]=C,c[7]=H,c[8]=I,c[9]=J,c[10]=K,c[11]=L,c[12]=D*x+G*y+I*z+a[12],c[13]=A*x+F*y+J*z+a[13],
c[14]=B*x+C*y+K*z+a[14],c[15]=E*x+H*y+L*z+a[15]);return c};d.transpose=function(a,b){void 0===b&&(b=new d);b===a?(A=a[1],B=a[2],E=a[3],C=a[6],H=a[7],L=a[11],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=A,b[6]=a[9],b[7]=a[13],b[8]=B,b[9]=C,b[11]=a[14],b[12]=E,b[13]=H,b[14]=L):(b[0]=a[0],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=a[1],b[5]=a[5],b[6]=a[9],b[7]=a[13],b[8]=a[2],b[9]=a[6],b[10]=a[10],b[11]=a[14],b[12]=a[3],b[13]=a[7],b[14]=a[11],b[15]=a[15]);return b};return d}(Float32Array),Ub,Vb,$c=function(){function f(d,
a){void 0===d&&(d=0);void 0===a&&(a=0);this.r=d;this.a=a}f.create=function(d,a){void 0===d&&(d=0);void 0===a&&(a=0);return new f(d,a)};f.prototype.distanceTo=function(d){return Math.sqrt(this.distanceToSquared(d))};f.prototype.distanceToManhattan=function(d){var a=d.r;d=d.a;return Math.cos(d)*a-this.x()+Math.sin(d)*a-this.y()};f.prototype.distanceToSquared=function(d){var a=d.r;return this.r*this.r+a*a-2*a*this.r*Math.cos(d.a-this.a)};f.prototype.fromVector2=function(d){Ub=d[0];Vb=d[1];this.r=Math.sqrt(Ub*
Ub+Vb*Vb);this.a=Math.atan2(Vb,Ub);return this};f.prototype.lengthManhattan=function(){return(Math.cos(this.a)+Math.sin(this.a))*this.r};f.prototype.set=function(d,a){void 0===d&&(d=0);void 0===a&&(a=0);this.r=d;this.a=a;return this};f.prototype.setA=function(d){void 0===d&&(d=0);this.a=d;return this};f.prototype.setR=function(d){void 0===d&&(d=0);this.r=d;return this};f.prototype.toJson=function(d){void 0===d&&(d={a:0,r:0});d.r=this.r;d.a=this.a;return d};f.prototype.toString=function(){return"(".concat(this.r,
", ").concat(this.a,")")};f.prototype.toVector2Json=function(d){d[0]=this.x();d[1]=this.y();return d};f.prototype.x=function(){return Math.cos(this.a)*this.r};f.prototype.y=function(){return Math.sin(this.a)*this.r};return f}(),P,Q,R,Z,Ea,Fa,Ga,ka,Ha=0,Ma=0,rc=0,eb=0,Wb=0,lb=0,Bb=0,Cb=0,cb=new Float32Array(3),ad=function(f){function d(a,b,c,e){void 0===a&&(a=0);void 0===b&&(b=0);void 0===c&&(c=0);void 0===e&&(e=0);var g=f.call(this,4)||this;g[0]=a;g[1]=b;g[2]=c;g[3]=e;return g}Ca(d,f);Object.defineProperty(d.prototype,
"x",{get:function(){return this[0]},set:function(a){this[0]=a},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"y",{get:function(){return this[1]},set:function(a){this[1]=a},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"z",{get:function(){return this[2]},set:function(a){this[2]=a},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"w",{get:function(){return this[3]},set:function(a){this[3]=a},enumerable:!1,configurable:!0});d.angleTo=function(a,
b){eb=d.dot(a,b);return Math.acos(2*eb*eb-1)};d.conjugate=function(a,b){void 0===b&&(b=new d);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=a[3];return b};d.create=function(a,b,c,e,g){void 0===a&&(a=0);void 0===b&&(b=0);void 0===c&&(c=0);void 0===e&&(e=1);void 0===g&&(g=new d);g[0]=a;g[1]=b;g[2]=c;g[3]=e;return g};d.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};d.fromAxisAngle=function(a,b,c){void 0===c&&(c=new d);b*=.5;Ha=Math.sin(b);c[0]=Ha*a[0];c[1]=Ha*a[1];c[2]=Ha*a[2];c[3]=Math.cos(b);
return c};d.fromMatrix3=function(a,b){void 0===b&&(b=new d);var c=a[0]+a[4]+a[8];if(0<c)c=Math.sqrt(c+1),b[3]=.5*c,c=.5/c,b[0]=(a[5]-a[7])*c,b[1]=(a[6]-a[2])*c,b[2]=(a[1]-a[3])*c;else{var e=0;a[4]>a[0]&&(e=1);a[8]>a[3*e+e]&&(e=2);var g=(e+1)%3,n=(e+2)%3;c=Math.sqrt(a[3*e+e]-a[3*g+g]-a[3*n+n]+1);b[e]=.5*c;c=.5/c;b[3]=(a[3*g+n]-a[3*n+g])*c;b[g]=(a[3*g+e]+a[3*e+g])*c;b[n]=(a[3*n+e]+a[3*e+n])*c}return b};d.identity=function(a){void 0===a&&(a=new d);a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};d.invert=function(a,
b){void 0===b&&(b=new d);P=a[0];Q=a[1];R=a[2];Z=a[3];(eb=P*P+Q*Q+R*R+Z*Z)?(Ma=1/eb,b[0]=-P*Ma,b[1]=-Q*Ma,b[2]=-R*Ma,b[3]=Z*Ma):(b[0]=0,b[1]=0,b[2]=0,b[3]=0);return b};d.lerp=function(a,b,c,e){void 0===e&&(e=new d);P=a[0];Q=a[1];R=a[2];Z=a[3];e[0]=P+c*(b[0]-P);e[1]=Q+c*(b[1]-Q);e[2]=R+c*(b[2]-R);e[3]=Z+c*(b[3]-Z);return e};d.multiply=function(a,b,c){void 0===c&&(c=new d);P=a[0];Q=a[1];R=a[2];Z=a[3];Ea=b[0];Fa=b[1];Ga=b[2];ka=b[3];c[0]=P*ka+Z*Ea+Q*Ga-R*Fa;c[1]=Q*ka+Z*Fa+R*Ea-P*Ga;c[2]=R*ka+Z*Ga+P*Fa-
Q*Ea;c[3]=Z*ka-P*Ea-Q*Fa-R*Ga;return c};d.normalize=function(a,b){void 0===b&&(b=new d);P=a[0];Q=a[1];R=a[2];Z=a[3];lb=P*P+Q*Q+R*R+Z*Z;0<lb&&(lb=1/Math.sqrt(lb));b[0]=P*lb;b[1]=Q*lb;b[2]=R*lb;b[3]=Z*lb;return b};d.random=function(a){void 0===a&&(a=new d);P=Math.random();Q=Math.random();R=Math.random();Ma=Math.sqrt(1-P);Ha=Math.sqrt(P);a[0]=Ma*Math.sin(2*Math.PI*Q);a[1]=Ma*Math.cos(2*Math.PI*Q);a[2]=Ha*Math.sin(2*Math.PI*R);a[3]=Ha*Math.cos(2*Math.PI*R);return a};d.rotationTo=function(a,b,c){void 0===
c&&(c=new d);eb=h.dot(a,b);if(eb<-1+Qa)return h.cross(h.VECTOR3_LEFT,a,cb),h.norm(cb)<Qa&&h.cross(h.VECTOR3_TOP,a,cb),h.normalize(cb,cb),d.fromAxisAngle(cb,Math.PI,c),c;if(eb>1-Qa)return c[0]=0,c[1]=0,c[2]=0,c[3]=1,c;h.cross(cb,a,b);c[0]=cb[0];c[1]=cb[1];c[2]=cb[2];c[3]=1+eb;return d.normalize(c,c)};d.rotateX=function(a,b,c){void 0===c&&(c=new d);b*=.5;P=a[0];Q=a[1];R=a[2];Z=a[3];Ea=Math.sin(b);ka=Math.cos(b);c[0]=P*ka+Z*Ea;c[1]=Q*ka+R*Ea;c[2]=R*ka-Q*Ea;c[3]=Z*ka-P*Ea;return c};d.rotateY=function(a,
b,c){void 0===c&&(c=new d);b*=.5;P=a[0];Q=a[1];R=a[2];Z=a[3];Fa=Math.sin(b);ka=Math.cos(b);c[0]=P*ka-R*Fa;c[1]=Q*ka+Z*Fa;c[2]=R*ka+P*Fa;c[3]=Z*ka-Q*Fa;return c};d.rotateZ=function(a,b,c){void 0===c&&(c=new d);b*=.5;P=a[0];Q=a[1];R=a[2];Z=a[3];Ga=Math.sin(b);ka=Math.cos(b);c[0]=P*ka+Q*Ga;c[1]=Q*ka-P*Ga;c[2]=R*ka+Z*Ga;c[3]=Z*ka-R*Ga;return c};d.slerp=function(a,b,c,e){void 0===e&&(e=new d);P=a[0];Q=a[1];R=a[2];Z=a[3];Ea=b[0];Fa=b[1];Ga=b[2];ka=b[3];Ma=P*Ea+Q*Fa+R*Ga+Z*ka;0>Ma&&(Ma=-Ma,Ea=-Ea,Fa=-Fa,
Ga=-Ga,ka=-ka);1-Ma>Qa?(Wb=Math.acos(Ma),Ha=Math.sin(Wb),Bb=Math.sin((1-c)*Wb)/Ha,Cb=Math.sin(c*Wb)/Ha):(Bb=1-c,Cb=c);e[0]=Bb*P+Cb*Ea;e[1]=Bb*Q+Cb*Fa;e[2]=Bb*R+Cb*Ga;e[3]=Bb*Z+Cb*ka;return e};d.toAxisAngle=function(a,b){rc=2*Math.acos(a[3]);Ha=Math.sin(rc/2);Ha>Qa?(b[0]=a[0]/Ha,b[1]=a[1]/Ha,b[2]=a[2]/Ha):(b[0]=1,b[1]=0,b[2]=0);return rc};d.toString=function(a){return'quat("'.concat(a[0],", ").concat(a[1],", ").concat(a[2],", ").concat(a[3],")")};return d}(Float32Array),Db=new h,Eb=new h,Fb=new h,
mb=new h,tb=new h,nb=new h,fb=new h,Xb=new h,qb=new h,bd=[1,1,1],Lc=function(){function f(d,a){void 0===d&&(d=new h);void 0===a&&(a=h.fromArray(bd));this.min=new h;this.max=new h;h.min(d,a,this.min);h.max(d,a,this.max)}f.clampPoint=function(d,a,b){void 0===b&&(b=new h);return h.clamp(a,d.min,d.max,b)};f.containsPoint=function(d,a){return a[0]>=d.min[0]&&a[0]<=d.max[0]&&a[1]>=d.min[1]&&a[1]<=d.max[1]&&a[2]>=d.min[2]&&a[2]<=d.max[2]};f.containsCube=function(d,a){return d.min[0]<=a.min[0]&&a.max[0]<=
d.max[0]&&d.min[1]<=a.min[1]&&a.max[1]<=d.max[1]&&d.min[2]<=a.min[2]&&a.max[2]<=d.max[2]};f.depth=function(d){return d.max[2]-d.min[2]};f.equals=function(d,a){return h.equals(d.min,a.min)&&h.equals(d.max,a.max)};f.getCenter=function(d,a){void 0===a&&(a=new h);h.add(d.min,d.max,a);return h.multiplyScalar(a,.5,a)};f.getSize=function(d,a){void 0===a&&(a=new h);return h.minus(d.max,d.min,a)};f.height=function(d){return d.max[1]-d.min[1]};f.intersect=function(d,a,b){void 0===b&&(b=new f);h.max(d.min,a.min,
b.min);h.min(d.max,a.max,b.max);return b};f.intersectsBox=function(d,a){return!(a.max[0]<d.min[0]||a.min[0]>d.max[0]||a.max[1]<d.min[1]||a.min[1]>d.max[1]||a.max[2]<d.min[2]||a.min[2]>d.max[2])};f.intersectsSphere=function(d,a){f.clampPoint(d,a.position,fb);return h.distanceToSquared(fb,a.position)<=a.radius*a.radius};f.intersectsTriangle=function(d,a){if(f.isEmpty(d))return!1;f.getCenter(d,fb);h.minus(d.max,fb,Xb);h.minus(a.a,fb,Fb);h.minus(a.b,fb,Db);h.minus(a.c,fb,Eb);h.minus(Db,Fb,nb);h.minus(Eb,
Db,mb);h.minus(Fb,Eb,tb);d=[0,-nb[2],nb[1],0,-mb[2],mb[1],0,-tb[2],tb[1],nb[2],0,-nb[0],mb[2],0,-mb[0],tb[2],0,-tb[0],-nb[1],nb[0],0,-mb[1],mb[0],0,-tb[1],tb[0],0];if(!gc(d,Fb,Db,Eb,Xb)||!gc(d,Fb,Db,Eb,Xb))return!1;h.cross(nb,mb,fb);return gc(fb,Fb,Db,Eb,Xb)};f.isEmpty=function(d){return d.max[0]<d.min[0]||d.max[0]<d.min[0]||d.max[0]<d.min[0]};f.round=function(d,a){void 0===a&&(a=new f);h.round(d.min,a.min);h.round(d.max,a.max);return a};f.size=function(d,a){void 0===a&&(a=new h);return h.minus(d.max,
d.min,a)};f.stretch=function(d,a,b,c){void 0===c&&(c=new f);h.add(d.min,a,c.min);h.add(d.max,b,c.max);return c};f.translate=function(d,a,b){void 0===b&&(b=new f);h.add(d.min,a,b.min);h.add(d.max,a,b.max);return b};f.union=function(d,a,b){void 0===b&&(b=new f);h.min(d.min,a.min,b.min);h.max(d.max,a.max,b.max);return b};f.volume=function(d){return(d.max[0]-d.min[0])*(d.max[1]-d.min[1])*(d.max[2]-d.min[2])};f.width=function(d){return d.max[0]-d.min[0]};return f}(),Pb,Dc,hc,ic,jc,Ec,Na=0,bb=0,sc=0,tc=
0,ha=function(f){function d(a,b){void 0===a&&(a=0);void 0===b&&(b=0);var c=f.call(this,2)||this;c[0]=a;c[1]=b;return c}Ca(d,f);Object.defineProperty(d.prototype,"x",{get:function(){return this[0]},set:function(a){this[0]=a},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"y",{get:function(){return this[1]},set:function(a){this[1]=a},enumerable:!1,configurable:!0});d.VECTOR2_ZERO=new Float32Array([0,0]);d.VECTOR2_TOP=new Float32Array([0,1]);d.VECTOR2_BOTTOM=new Float32Array([0,-1]);
d.VECTOR2_LEFT=new Float32Array([-1,0]);d.VECTOR2_RIGHT=new Float32Array([1,0]);d.add=function(a,b,c){void 0===c&&(c=new d);c[0]=a[0]+b[0];c[1]=a[1]+b[1];return c};d.addScalar=function(a,b,c){void 0===c&&(c=new d(2));c[0]=a[0]+b;c[1]=a[1]+b;return c};d.angle=function(a){return Math.atan2(a[1],a[0])};d.ceil=function(a,b){void 0===b&&(b=new d);b[0]=Math.ceil(a[0]);b[1]=Math.ceil(a[1]);return b};d.clamp=function(a,b,c,e){void 0===e&&(e=new d);e[0]=wa(a[0],b[0],c[0]);e[1]=wa(a[1],b[1],c[1]);return e};
d.clampSafe=function(a,b,c,e){void 0===e&&(e=new d);e[0]=gb(a[0],b[0],c[0]);e[1]=gb(a[1],b[1],c[1]);return e};d.clampLength=function(a,b,c,e){void 0===e&&(e=new d);e[0]=gb(a[0],b[0],c[0]);e[1]=gb(a[1],b[1],c[1]);return e};d.clampScalar=function(a,b,c,e){void 0===e&&(e=new d);e[0]=wa(a[0],b,c);e[1]=wa(a[1],b,c);return e};d.closeTo=function(a,b,c){void 0===c&&(c=Qa);return d.distanceTo(a,b)<=c};d.closeToRect=function(a,b,c){void 0===c&&(c=Qa);return Aa(a[0],b[0],c)&&Aa(a[1],b[1],c)};d.closeToManhattan=
function(a,b,c){void 0===c&&(c=Qa);return d.distanceToManhattan(a,b)<=c};d.clone=function(a,b){void 0===b&&(b=new d);b[0]=a[0];b[1]=a[1];return b};d.cross=function(a,b){return a[0]*b[1]-a[1]*b[0]};d.create=function(a,b,c){void 0===a&&(a=0);void 0===b&&(b=0);void 0===c&&(c=new d);c[0]=a;c[1]=b;return c};d.distanceTo=function(a,b){Na=b[0]-a[0];bb=b[1]-a[1];return Math.hypot(Na,bb)};d.distanceToManhattan=function(a,b){return Math.abs(a[0]-b[0])+Math.abs(a[1]-b[1])};d.distanceToSquared=function(a,b){Na=
a[0]-b[0];bb=a[1]-b[1];return Na*Na+bb*bb};d.divide=function(a,b,c){void 0===c&&(c=new d);c[0]=a[0]/b[0];c[1]=a[1]/b[1];return c};d.divideScalar=function(a,b,c){void 0===c&&(c=new d);return d.multiplyScalar(a,1/b,c)};d.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]};d.equals=function(a,b){return a[0]===b[0]&&a[1]===b[1]};d.floor=function(a,b){void 0===b&&(b=new d);b[0]=Math.floor(a[0]);b[1]=Math.floor(a[1]);return b};d.floorToZero=function(a,b){void 0===b&&(b=new d);b[0]=Qb(a[0]);b[1]=Qb(a[1]);return b};
d.fromArray=function(a,b,c){void 0===b&&(b=0);void 0===c&&(c=new d);c[0]=a[b];c[1]=a[b+1];return c};d.fromJson=function(a,b){void 0===b&&(b=new d);b[0]=a.x;b[1]=a.y;return b};d.fromPolar=function(a,b){void 0===b&&(b=new d);b[0]=Math.cos(a.a)*a.r;b[1]=Math.sin(a.a)*a.r;return b};d.fromScalar=function(a,b){void 0===a&&(a=0);void 0===b&&(b=new d);b[0]=b[1]=a;return b};d.inverse=function(a,b){void 0===b&&(b=new d);b[0]=1/a[0]||0;b[1]=1/a[1]||0;return b};d.norm=function(a){return Math.sqrt(a[0]*a[0]+a[1]*
a[1])};d.lengthManhattan=function(a){return Math.abs(a[0])+Math.abs(a[1])};d.lengthSquared=function(a){return a[0]*a[0]+a[1]*a[1]};d.lerp=function(a,b,c,e){void 0===e&&(e=new d);e[0]=(b[0]-a[0])*c+a[0];e[1]=(b[1]-a[1])*c+a[1];return e};d.max=function(a,b,c){void 0===c&&(c=new d);c[0]=Math.max(a[0],b[0]);c[1]=Math.max(a[1],b[1]);return c};d.min=function(a,b,c){void 0===c&&(c=new d);c[0]=Math.min(a[0],b[0]);c[1]=Math.min(a[1],b[1]);return c};d.minus=function(a,b,c){void 0===c&&(c=new d);c[0]=a[0]-b[0];
c[1]=a[1]-b[0];return c};d.minusScalar=function(a,b,c){void 0===c&&(c=new d);c[0]=a[0]-b;c[1]=a[1]-b;return c};d.multiply=function(a,b,c){void 0===c&&(c=new d);c[0]=a[0]*b[0];c[1]=a[1]*b[1];return c};d.multiplyScalar=function(a,b,c){void 0===c&&(c=new d);c[0]=a[0]*b;c[1]=a[1]*b;return c};d.negate=function(a,b){void 0===b&&(b=new d);b[0]=-a[0];b[1]=-a[1];return b};d.normalize=function(a,b){void 0===b&&(b=new d);return d.divideScalar(a,d.norm(a)||1,b)};d.random=function(a,b){void 0===a&&(a=1);void 0===
b&&(b=new d);Na=Math.random()*Fc;b[0]=Math.cos(Na)*a;b[1]=Math.sin(Na)*a;return b};d.rotate=function(a,b,c,e){void 0===c&&(c=d.VECTOR2_ZERO);void 0===e&&(e=new d(2));sc=Math.cos(b);tc=Math.sin(b);Na=a[0]-c[0];bb=a[1]-c[1];e[0]=Na*sc-bb*tc+c[0];e[1]=Na*tc+bb*sc+c[1];return e};d.round=function(a,b){void 0===b&&(b=new d);b[0]=Math.round(a[0]);b[1]=Math.round(a[1]);return b};d.set=function(a,b,c){void 0===a&&(a=0);void 0===b&&(b=0);void 0===c&&(c=new d);c[0]=a;c[1]=b;return c};d.setLength=function(a,
b,c){void 0===c&&(c=new d(2));d.normalize(a,c);d.multiplyScalar(c,b,c);return c};d.toArray=function(a,b){void 0===b&&(b=[]);b[0]=a[0];b[1]=a[1];return b};d.toPalorJson=function(a,b){void 0===b&&(b={a:0,r:0});b.r=d.norm(a);b.a=d.angle(a);return b};d.toString=function(a){return"(".concat(a[0],", ").concat(a[1],")")};d.transformMatrix3=function(a,b,c){Na=a[0];bb=a[1];c[0]=b[0]*Na+b[3]*bb+b[6];c[1]=b[1]*Na+b[4]*bb+b[7];return c};return d}(Float32Array),cd=function(){function f(d,a){void 0===d&&(d=ha.create());
void 0===a&&(a=ha.create(1,1));this.min=ha.create();this.max=ha.create();ha.min(d,a,this.min);ha.max(d,a,this.max)}f.area=function(d){return(d.max[0]-d.min[0])*(d.max[1]-d.min[1])};f.containsPoint=function(d,a){return a[0]>=d.min[0]&&a[0]<=d.max[0]&&a[1]>=d.min[1]&&a[1]<=d.max[1]};f.containsRectangle=function(d,a){return d.min[0]<=a.min[0]&&a.max[0]<=d.max[0]&&d.min[1]<=a.min[1]&&a.max[1]<=d.max[1]};f.create=function(d,a){void 0===d&&(d=ha.create());void 0===a&&(a=ha.create(1,1));return{max:ha.max(d,
a),min:ha.min(d,a)}};f.equals=function(d,a){return ha.equals(d.min,a.min)&&ha.equals(d.max,a.max)};f.getCenter=function(d,a){void 0===a&&(a=ha.create());ha.add(d.min,d.max,a);return ha.multiplyScalar(a,.5,a)};f.getSize=function(d,a){void 0===a&&(a=ha.create());return ha.minus(d.max,d.min,a)};f.height=function(d){return d.max[1]-d.min[1]};f.intersect=function(d,a,b){void 0===b&&(b=new f);ha.max(d.min,a.min,b.min);ha.min(d.max,a.max,b.max);return b};f.stretch=function(d,a,b,c){void 0===c&&(c=new f);
ha.add(d.min,a,c.min);ha.add(d.max,b,c.max);return c};f.translate=function(d,a,b){void 0===b&&(b=new f);ha.add(d.min,a,b.min);ha.add(d.max,a,b.max);return b};f.union=function(d,a,b){void 0===b&&(b=new f);ha.min(d.min,a.min,b.min);ha.max(d.max,a.max,b.max);return b};f.width=function(d){return d.max[0]-d.min[0]};return f}(),uc=0,dd=function(){function f(d,a){void 0===d&&(d=new h);void 0===a&&(a=1);this.position=d;this.radius=a}f.boundingBox=function(d,a){void 0===a&&(a=new Lc);h.minusScalar(d.position,
d.radius,a.min);h.addScalar(d.position,d.radius,a.max);return a};f.containsPoint=function(d,a){return h.distanceToSquared(d.position,a)<=d.radius*d.radius};f.distanceToPoint=function(d,a){return h.distanceTo(d.position,a)-d.radius};f.equals=function(d,a){return h.equals(d.position,a.position)&&d.radius===a.radius};f.intersectsSphere=function(d,a){uc=d.radius+a.radius;return h.distanceToSquared(d.position,a.position)<=uc*uc};return f}(),Mc=[-1,-1,0],Nc=[1,-1,0],Oc=[0,1,0],Pc=new h,Qc=new h,ed=function(){function f(d,
a,b){void 0===d&&(d=new Float32Array(Mc));void 0===a&&(a=new Float32Array(Nc));void 0===b&&(b=new Float32Array(Oc));this.a=d;this.b=a;this.c=b}f.area=function(d){var a=f.getABLength(d),b=f.getBCLength(d);d=f.getCALength(d);var c=(a+b+d)/2;return Math.sqrt(c*(c-b)*(c-d)*(c-a))};f.create=function(d,a,b){void 0===d&&(d=new Float32Array(Mc));void 0===a&&(a=new Float32Array(Nc));void 0===b&&(b=new Float32Array(Oc));return{a:d,b:a,c:b}};f.getABLength=function(d){return h.distanceTo(d.a,d.b)};f.getBCLength=
function(d){return h.distanceTo(d.b,d.c)};f.getCALength=function(d){return h.distanceTo(d.c,d.a)};f.normal=function(d,a){void 0===a&&(a=h.create());h.minus(d.c,d.b,Qc);h.minus(d.b,d.a,Pc);h.cross(Pc,Qc,a);return h.normalize(a)};f.toFloat32Array=function(d,a){void 0===a&&(a=new Float32Array(3));a.set(d.a,0);a.set(d.b,3);a.set(d.c,6);return h.normalize(a)};return f}(),ob,vc,wc,db=new h,fd=function(){function f(d,a){void 0===d&&(d=new h);void 0===a&&(a=new h(0,0,-1));this.position=d;this.direction=h.normalize(a)}
f.at=function(d,a,b){void 0===b&&(b=new h);return h.multiplyScalar(d.direction,a,b)};f.distanceToPoint=function(d,a){return Math.sqrt(f.distanceSqToPoint(d,a))};f.distanceSqToPoint=function(d,a){h.minus(a,d.position,db);ob=h.dot(db,d.direction);if(0>ob)return h.distanceToSquared(d.position,a);h.multiplyScalar(d.direction,ob,db);h.add(db,d.position,db);return h.distanceToSquared(db,a)};f.lookAt=function(d,a,b){void 0===b&&(b=new f);d!==b&&h.fromArray(d.position,0,b.position);h.normalize(h.minus(a,
d.position,b.direction));return b};f.intersectSphere=function(d,a,b){h.minus(a.position,d.position,db);ob=h.dot(db,d.direction);wc=h.dot(db,db)-ob*ob;vc=a.radius*a.radius;if(wc>vc)return null;var c=Math.sqrt(vc-wc);a=ob-c;c=ob+c;return 0>a&&0>c?null:0>a?f.at(d,c,b):f.at(d,a,b)};f.intersectsSphere=function(d,a){return f.distanceSqToPoint(d,a.position)<=a.radius*a.radius};return f}(),ba,ca,da,ea,Mb,Nb,Ob,pb,Yb,Zb,$b,ac,xc,yc,zc,Ac,Bc,Cc,bc,cc,dc,ec,gd=function(f){function d(a,b,c,e){void 0===a&&(a=
0);void 0===b&&(b=0);void 0===c&&(c=0);void 0===e&&(e=0);var g=f.call(this,4)||this;g[0]=a;g[1]=b;g[2]=c;g[3]=e;return g}Ca(d,f);Object.defineProperty(d.prototype,"x",{get:function(){return this[0]},set:function(a){this[0]=a},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"y",{get:function(){return this[1]},set:function(a){this[1]=a},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"z",{get:function(){return this[2]},set:function(a){this[2]=a},enumerable:!1,configurable:!0});
Object.defineProperty(d.prototype,"w",{get:function(){return this[3]},set:function(a){this[3]=a},enumerable:!1,configurable:!0});d.add=function(a,b,c){void 0===c&&(c=new d);c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];return c};d.ceil=function(a,b){void 0===b&&(b=new d);b[0]=Math.ceil(a[0]);b[1]=Math.ceil(a[1]);b[2]=Math.ceil(a[2]);b[3]=Math.ceil(a[3]);return b};d.closeTo=function(a,b){return Aa(a[0],b[0])&&Aa(a[1],b[1])&&Aa(a[2],b[2])&&Aa(a[3],b[3])};d.create=function(a,b,c,e,g){void 0===
a&&(a=0);void 0===b&&(b=0);void 0===c&&(c=0);void 0===e&&(e=0);void 0===g&&(g=new d);g[0]=a;g[1]=b;g[2]=c;g[3]=e;return g};d.cross=function(a,b,c,e){void 0===e&&(e=new Float32Array(4));xc=b[0]*c[1]-b[1]*c[0];yc=b[0]*c[2]-b[2]*c[0];zc=b[0]*c[3]-b[3]*c[0];Ac=b[1]*c[2]-b[2]*c[1];Bc=b[1]*c[3]-b[3]*c[1];Cc=b[2]*c[3]-b[3]*c[2];bc=a[0];cc=a[1];dc=a[2];ec=a[3];e[0]=cc*Cc-dc*Bc+ec*Ac;e[1]=-(bc*Cc)+dc*zc-ec*yc;e[2]=bc*Bc-cc*zc+ec*xc;e[3]=-(bc*Ac)+cc*yc-dc*xc;return e};d.distanceTo=function(a,b){ba=b[0]-a[0];
ca=b[1]-a[1];da=b[2]-a[2];ea=b[3]-a[3];return Math.hypot(ba,ca,da,ea)};d.distanceToSquared=function(a,b){ba=b[0]-a[0];ca=b[1]-a[1];da=b[2]-a[2];ea=b[3]-a[3];return ba*ba+ca*ca+da*da+ea*ea};d.divide=function(a,b,c){void 0===c&&(c=new d);c[0]=a[0]/b[0];c[1]=a[1]/b[1];c[2]=a[2]/b[2];c[3]=a[3]/b[3];return c};d.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};d.equals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]};d.floor=function(a,b){void 0===b&&(b=new d);b[0]=
Math.floor(a[0]);b[1]=Math.floor(a[1]);b[2]=Math.floor(a[2]);b[3]=Math.floor(a[3]);return b};d.fromValues=function(a,b,c,e,g){void 0===g&&(g=new d);g[0]=a;g[1]=b;g[2]=c;g[3]=e;return g};d.inverse=function(a,b){void 0===b&&(b=new d);b[0]=1/a[0];b[1]=1/a[1];b[2]=1/a[2];b[3]=1/a[3];return b};d.norm=function(a){return Math.hypot(a[0],a[1],a[2],a[3])};d.lengthSquared=function(a){ba=a[0];ca=a[1];da=a[2];ea=a[3];return ba*ba+ca*ca+da*da+ea*ea};d.lerp=function(a,b,c,e){void 0===e&&(e=new d);ba=a[0];ca=a[1];
da=a[2];ea=a[3];e[0]=ba+c*(b[0]-ba);e[1]=ca+c*(b[1]-ca);e[2]=da+c*(b[2]-da);e[3]=ea+c*(b[3]-ea);return e};d.max=function(a,b,c){void 0===c&&(c=new d);c[0]=Math.max(a[0],b[0]);c[1]=Math.max(a[1],b[1]);c[2]=Math.max(a[2],b[2]);c[3]=Math.max(a[3],b[3]);return c};d.min=function(a,b,c){void 0===c&&(c=new d);c[0]=Math.min(a[0],b[0]);c[1]=Math.min(a[1],b[1]);c[2]=Math.min(a[2],b[2]);c[3]=Math.min(a[3],b[3]);return c};d.minus=function(a,b,c){void 0===c&&(c=new d);c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];
c[3]=a[3]-b[3];return c};d.multiply=function(a,b,c){void 0===c&&(c=new d);c[0]=a[0]*b[0];c[1]=a[1]*b[1];c[2]=a[2]*b[2];c[3]=a[3]*b[3];return c};d.multiplyScalar=function(a,b,c){void 0===c&&(c=new d);c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;return c};d.negate=function(a,b){void 0===b&&(b=new d);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=-a[3];return b};d.normalize=function(a,b){void 0===b&&(b=new d);ba=a[0];ca=a[1];da=a[2];ea=a[3];pb=ba*ba+ca*ca+da*da+ea*ea;0<pb&&(pb=1/Math.sqrt(pb));b[0]=ba*pb;
b[1]=ca*pb;b[2]=da*pb;b[3]=ea*pb;return b};d.round=function(a,b){void 0===b&&(b=new d);b[0]=Math.round(a[0]);b[1]=Math.round(a[1]);b[2]=Math.round(a[2]);b[3]=Math.round(a[3]);return b};d.toString=function(a){return"(".concat(a[0],", ").concat(a[1],", ").concat(a[2],", ").concat(a[3],")")};d.transformMatrix4=function(a,b,c){void 0===c&&(c=new d);ba=a[0];ca=a[1];da=a[2];ea=a[3];c[0]=b[0]*ba+b[4]*ca+b[8]*da+b[12]*ea;c[1]=b[1]*ba+b[5]*ca+b[9]*da+b[13]*ea;c[2]=b[2]*ba+b[6]*ca+b[10]*da+b[14]*ea;c[3]=b[3]*
ba+b[7]*ca+b[11]*da+b[15]*ea;return c};d.transformQuat=function(a,b,c){void 0===c&&(c=new d);Mb=a[0];Nb=a[1];Ob=a[2];ba=b[0];ca=b[1];da=b[2];ea=b[3];Yb=ea*Mb+ca*Ob-da*Nb;Zb=ea*Nb+da*Mb-ba*Ob;$b=ea*Ob+ba*Nb-ca*Mb;ac=-ba*Mb-ca*Nb-da*Ob;c[0]=Yb*ea+ac*-ba+Zb*-da-$b*-ca;c[1]=Zb*ea+ac*-ca+$b*-ba-Yb*-da;c[2]=$b*ea+ac*-da+Yb*-ca-Zb*-ba;c[3]=a[3];return c};return d}(Float32Array);m.COLOR_HEX_MAP=rb;m.ColorGPU=Uc;m.ColorRGB=Tc;m.ColorRGBA=Sc;m.Constants=Rc;m.Cube=Lc;m.Easing=Vc;m.EulerAngle=Wc;m.Matrix2=Xc;
m.Matrix3=Yc;m.Matrix4=Zc;m.Polar=$c;m.Quaternion=ad;m.Ray3=fd;m.Rectangle2=cd;m.Sphere=dd;m.Triangle3=ed;m.Vector2=ha;m.Vector3=h;m.Vector4=gd;m.ceilPowerOfTwo=function(f){return Math.pow(2,Math.ceil(Math.log(f)/Math.LN2))};m.clamp=wa;m.clampCircle=function(f,d,a){ub=a-d;vb=Qb(d/ub)*ub+f%ub;return vb<d?vb+ub:vb>a?vb-ub:vb};m.clampSafe=gb;m.closeTo=Aa;m.floorPowerOfTwo=function(f){return Math.pow(2,Math.floor(Math.log(f)/Math.LN2))};m.floorToZero=Qb;m.isPowerOfTwo=function(f){return 0===(f&f-1)&&
0!==f};m.lerp=function(f,d,a){return(d-f)*a+f};m.mapRange=function(f,d,a){kc=d[1]-d[0];Gc=a[1]-a[0];return(f-.5*kc)/Gc/kc};m.randFloat=function(f,d){void 0===f&&(f=0);void 0===d&&(d=1);return f+Math.random()*(d-f)};m.randInt=function(f,d){void 0===f&&(f=0);void 0===d&&(d=1);return f+Math.floor(Math.random()*(d-f+1))};m.rndFloat=function(f,d){return f+Math.random()*(d-f)};m.rndFloatRange=function(f){return f*(.5-Math.random())};m.rndInt=function(f,d){return f+Math.floor(Math.random()*(d-f+1))};m.sum=
function(){for(var f=[],d=0;d<arguments.length;d++)f[d]=arguments[d];return Ic(f)};m.sumArray=Ic;Object.defineProperty(m,"__esModule",{value:!0})});

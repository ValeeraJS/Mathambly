(function(l,vb){"object"===typeof exports&&"undefined"!==typeof module?vb(exports):"function"===typeof define&&define.amd?define(["exports"],vb):(l="undefined"!==typeof globalThis?globalThis:l||self,vb(l.Mathx={}))})(this,function(l){function vb(a,b,c,d,f){Yb=0;for(Nc=a.length-3;Yb<=Nc;Yb+=3)if(e.fromArray(a,Yb,wb),Oc=f[0]*Math.abs(wb[0])+f[1]*Math.abs(wb[1])+f[2]*Math.abs(wb[2]),sc=e.dot(b,wb),tc=e.dot(c,wb),uc=e.dot(d,wb),Math.max(-Math.max(sc,tc,uc),Math.min(sc,tc,uc))>Oc)return!1;return!0}const Pc=
2*Math.PI,Wa=Math.pow(2,-52);var $c=Object.freeze({__proto__:null,DEG_TO_RAD:Math.PI/180,DEG_360_RAD:Pc,DEG_90_RAD:Math.PI/2,DEG_60_RAD:Math.PI/3,DEG_45_RAD:Math.PI/4,DEG_30_RAD:Math.PI/6,EPSILON:Wa,RAD_TO_DEG:180/Math.PI});const xb={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,
coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,
dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,
lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,
midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,
salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};class ka extends Uint8Array{constructor(a=0,b=0,c=0,d=1){super(4);this[0]=a;this[1]=b;this[2]=c;this[3]=
d}get r(){return this[0]}set r(a){this[0]=a}get g(){return this[1]}set g(a){this[1]=a}get b(){return this[2]}set b(a){this[2]=a}get a(){return this[4]}set a(a){this[4]=a}}ka.average=a=>(a[0]+a[1]+a[2])/3;ka.averageWeighted=(a,b=.299,c=.587,d=.114)=>a[0]*b+a[1]*c+a[2]*d;ka.clone=a=>new ka(a[0],a[1],a[2],a[3]);ka.create=(a=0,b=0,c=0,d=1)=>new ka(a,b,c,d);ka.equals=(a,b)=>(a.r??a[0])===(b.r??b[0])&&(a.g??a[1])===(b.g??b[1])&&(a.b??a[2])===(b.b??b[2])&&(a.a??a[3])===(b.a??b[3]);ka.fromArray=(a,b=new ka)=>
{b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b};ka.fromHex=(a,b=255,c=new ka)=>{c[0]=a>>16;c[1]=a>>8&255;c[2]=a&255;c[3]=b;return c};ka.fromJson=(a,b=new ka)=>{b[0]=a.r;b[1]=a.g;b[2]=a.b;b[3]=a.a;return b};ka.fromScalar=(a,b=255,c=new ka)=>{c[0]=a;c[1]=a;c[2]=a;c[3]=b;return c};ka.fromString=(a,b=new ka)=>{if(a in xb)return ka.fromHex(xb[a],255,b);if(a.startsWith("#"))return a=a.substr(1),ka.fromScalar(parseInt(a,16),255,b);a.startsWith("rgba(")&&(a=a.substring(4,a.length-1),a=a.split(","),b[0]=
parseInt(a[0],10),b[1]=parseInt(a[1],10),b[2]=parseInt(a[2],10),b[3]=parseInt(a[3],10));return b};ka.grayscale=(a,b=.299,c=.587,d=.114,f=new ka)=>{b=ka.averageWeighted(a,b,c,d);ka.fromScalar(b,a[3],f);return f};class la extends Uint8Array{constructor(a=0,b=0,c=0){super(3);this[0]=a;this[1]=b;this[2]=c}get r(){return this[0]}set r(a){this[0]=a}get g(){return this[1]}set g(a){this[1]=a}get b(){return this[2]}set b(a){this[2]=a}}la.average=a=>(a[0]+a[1]+a[2])/3;la.averageWeighted=(a,b=.299,c=.587,d=
.114)=>a[0]*b+a[1]*c+a[2]*d;la.clone=a=>new la(a[0],a[1],a[2]);la.create=(a=0,b=0,c=0)=>new la(a,b,c);la.equals=(a,b)=>(a.r??a[0])===(b.r??b[0])&&(a.g??a[1])===(b.g??b[1])&&(a.b??a[2])===(b.b??b[2]);la.fromArray=(a,b=new la)=>{b[0]=a[0];b[1]=a[1];b[2]=a[2];return b};la.fromHex=(a,b=new la)=>{b[0]=a>>16;b[1]=a>>8&255;b[2]=a&255;return b};la.fromJson=(a,b=new la)=>{b[0]=a.r;b[1]=a.g;b[2]=a.b;return b};la.fromScalar=(a,b=new la)=>{b[0]=a;b[1]=a;b[2]=a;return b};la.fromString=(a,b=new la)=>{if(a in xb)return la.fromHex(xb[a],
b);if(a.startsWith("#"))return a=a.substr(1),la.fromScalar(parseInt(a,16),b);a.startsWith("rgb(")&&(a=a.substring(4,a.length-1),a=a.split(","),b[0]=parseInt(a[0],10),b[1]=parseInt(a[1],10),b[2]=parseInt(a[2],10));return b};la.grayscale=(a,b=.299,c=.587,d=.114,f=new la)=>{a=la.averageWeighted(a,b,c,d);la.fromScalar(a,f);return f};class ha extends Float32Array{constructor(a=0,b=0,c=0,d=0){super(4);this[0]=a;this[1]=b;this[2]=c;this[3]=d}static fromColorRGB(a,b=new ha){b[0]=a[0]/255;b[1]=a[1]/255;b[2]=
a[2]/255;b[3]=1;return b}static fromColorRGBA(a,b=new ha){b[0]=a[0]/255;b[1]=a[1]/255;b[2]=a[2]/255;b[3]=a[3]/255;return b}get r(){return this[0]}set r(a){this[0]=a}get g(){return this[1]}set g(a){this[1]=a}get b(){return this[2]}set b(a){this[2]=a}get a(){return this[3]}set a(a){this[3]=a}}ha.average=a=>(a[0]+a[1]+a[2])/3;ha.averageWeighted=(a,b=.299,c=.587,d=.114)=>a[0]*b+a[1]*c+a[2]*d;ha.clone=a=>new ha(a[0],a[1],a[2],a[3]);ha.create=(a=0,b=0,c=0,d=0)=>new ha(a,b,c,d);ha.equals=(a,b)=>(a.r??a[0])===
(b.r??b[0])&&(a.g??a[1])===(b.g??b[1])&&(a.b??a[2])===(b.b??b[2])&&(a.a??a[3])===(b.a??b[3]);ha.fromArray=(a,b=new ha)=>{b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b};ha.fromHex=(a,b=1,c=new ha)=>{c[0]=(a>>16)/255;c[1]=(a>>8&255)/255;c[2]=(a&255)/255;c[3]=b;return c};ha.fromJson=(a,b=new ha)=>{b[0]=a.r;b[1]=a.g;b[2]=a.b;b[3]=a.a;return b};ha.fromScalar=(a,b=new ha)=>{b[0]=a;b[1]=a;b[2]=a;return b};ha.fromString=(a,b=new ha)=>{if(a in xb)return ha.fromHex(xb[a],1,b);if(a.startsWith("#"))return a=
a.substr(1),ha.fromHex(parseInt(a,16),1,b);a.startsWith("rgb(")&&(a=a.substring(4,a.length-1),a=a.split(","),b[0]=parseInt(a[0],10)/255,b[1]=parseInt(a[1],10)/255,b[2]=parseInt(a[2],10)/255);return b};ha.grayscale=(a,b=.299,c=.587,d=.114,f=new ha)=>{a=ha.averageWeighted(a,b,c,d);ha.fromScalar(a,f);return f};var ta=(a,b,c)=>Math.max(b,Math.min(c,a)),Zb=a=>0>a?Math.ceil(a):Math.floor(a);let Db,Eb;var mb=(a,b,c)=>b>c?Math.max(c,Math.min(b,a)):c>b?Math.max(b,Math.min(c,a)):b,Aa=(a,b,c=Wa)=>Math.abs(a-
b)<=c;let vc=0,Qc=0,Rc=0,wc=0;var Sc=a=>{wc=0;Rc=a.length;for(let b=0;b<Rc;b++)wc+=a[b];return wc},$b=a=>a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375,ad=Object.freeze({__proto__:null,BackIn:a=>1===a?1:a*a*(2.70158*a-1.70158),BackOut:a=>0===a?0:--a*a*(2.70158*a+1.70158)+1,BackInOut:a=>{if(1>(a*=2))return.5*a*a*(3.5949095*a-2.5949095);a-=2;return.5*(a*a*(3.5949095*a+2.5949095)+2)},BounceIn:a=>1-$b(1-a),BounceInOut:a=>
.5>a?.5*(1-$b(1-2*a)):.5*$b(2*a-1)+.5,BounceOut:$b,CircularIn:a=>1-Math.sqrt(1-a*a),CircularInOut:a=>{if(1>(a*=2))return-.5*(Math.sqrt(1-a*a)-1);a-=2;return.5*(Math.sqrt(1-a*a)+1)},CircularOut:a=>Math.sqrt(1- --a*a),CubicIn:a=>a*a*a,CubicInOut:a=>{if(1>(a*=2))return.5*a*a*a;a-=2;return.5*(a*a*a+2)},CubicOut:a=>--a*a*a+1,ElasticIn:a=>0===a||1===a?a:-Math.pow(2,10*(a-1))*Math.sin(5*(a-1.1)*Math.PI),ElasticInOut:a=>{if(0===a||1===a)return a;a*=2;return 1>a?-.5*Math.pow(2,10*(a-1))*Math.sin(5*(a-1.1)*
Math.PI):.5*Math.pow(2,-10*(a-1))*Math.sin(5*(a-1.1)*Math.PI)+1},ElasticOut:a=>0===a||1===a?a:Math.pow(2,-10*a)*Math.sin(5*(a-.1)*Math.PI)+1,ExponentialIn:a=>0===a?0:Math.pow(1024,a-1),ExponentialInOut:a=>0===a||1===a?a:1>(a*=2)?.5*Math.pow(1024,a-1):.5*(-Math.pow(2,-10*(a-1))+2),ExponentialOut:a=>1===a?1:1-Math.pow(2,-10*a),Linear:a=>a,QuadraticIn:a=>a*a,QuadraticInOut:a=>1>(a*=2)?.5*a*a:-.5*(--a*(a-2)-1),QuadraticOut:a=>a*(2-a),QuarticIn:a=>a*a*a*a,QuarticInOut:a=>{if(1>(a*=2))return.5*a*a*a*a;
a-=2;return-.5*(a*a*a*a-2)},QuarticOut:a=>1- --a*a*a*a,QuinticIn:a=>a*a*a*a*a,QuinticInOut:a=>{if(1>(a*=2))return.5*a*a*a*a*a;a-=2;return.5*(a*a*a*a*a+2)},QuinticOut:a=>--a*a*a*a*a+1,SinusoidalIn:a=>1-Math.sin((1-a)*Math.PI/2),SinusoidalInOut:a=>.5*(1-Math.sin(Math.PI*(.5-a))),SinusoidalOut:a=>Math.sin(a*Math.PI/2)});l.EulerRotationOrders=void 0;(function(a){a.XYZ="xyz";a.ZXY="zxy";a.YZX="yzx";a.XZY="xzy";a.ZYX="zyx";a.YXZ="yxz"})(l.EulerRotationOrders||(l.EulerRotationOrders={}));class Qb extends Float32Array{constructor(a=
0,b=0,c=0,d=l.EulerRotationOrders.XYZ){super(3);this[0]=a;this[1]=b;this[2]=c;this.order=d}static clone(a){return new Qb(a.x,a.y,a.z,a.order)}static create(a=0,b=0,c=0,d=l.EulerRotationOrders.XYZ){return new Qb(a,b,c,d)}static fromMatrix4(a,b=new Qb){const c=a[0],d=a[4],f=a[8],p=a[1],h=a[5],ia=a[9],C=a[2],D=a[6];a=a[10];switch(b.order){case l.EulerRotationOrders.XYZ:b.y=Math.asin(ta(f,-1,1));.9999999>Math.abs(f)?(b.x=Math.atan2(-ia,a),b.z=Math.atan2(-d,c)):(b.x=Math.atan2(D,h),b.z=0);break;case l.EulerRotationOrders.YXZ:b.x=
Math.asin(-ta(ia,-1,1));.9999999>Math.abs(ia)?(b.y=Math.atan2(f,a),b.z=Math.atan2(p,h)):(b.y=Math.atan2(-C,c),b.z=0);break;case l.EulerRotationOrders.ZXY:b.x=Math.asin(ta(D,-1,1));.9999999>Math.abs(D)?(b.y=Math.atan2(-C,a),b.z=Math.atan2(-d,h)):(b.y=0,b.z=Math.atan2(p,c));break;case l.EulerRotationOrders.ZYX:b.y=Math.asin(-ta(C,-1,1));.9999999>Math.abs(C)?(b.x=Math.atan2(D,a),b.z=Math.atan2(p,c)):(b.x=0,b.z=Math.atan2(-d,h));break;case l.EulerRotationOrders.YZX:b.z=Math.asin(ta(p,-1,1));.9999999>
Math.abs(p)?(b.x=Math.atan2(-ia,h),b.y=Math.atan2(-C,c)):(b.x=0,b.y=Math.atan2(f,a));break;case l.EulerRotationOrders.XZY:b.z=Math.asin(-ta(d,-1,1)),.9999999>Math.abs(d)?(b.x=Math.atan2(D,h),b.y=Math.atan2(f,c)):(b.x=Math.atan2(-ia,a),b.y=0)}return b}get x(){return this[0]}set x(a){this[0]=a}get y(){return this[1]}set y(a){this[1]=a}get z(){return this[2]}set z(a){this[2]=a}}Qb.ORDERS=l.EulerRotationOrders;let Na=0,Oa=0,Xa=0,Ya=0,Rb=0,Sb=0,Tb=0,Ub=0,nb=0,bb=0,cb=0;const xc=[1,0,0,1];class x extends Float32Array{constructor(a=
xc){super(a)}}x.UNIT_MATRIX2=new x(xc);x.add=(a,b,c)=>{c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];return c};x.adjoint=(a,b)=>{Na=a[0];b[0]=a[3];b[1]=-a[1];b[2]=-a[2];b[3]=Na;return b};x.clone=a=>new x(a);x.closeTo=(a,b)=>{Na=a[0];Xa=a[1];Oa=a[2];Ya=a[3];Rb=b[0];Tb=b[1];Sb=b[2];Ub=b[3];return Aa(Na,Rb)&&Aa(Oa,Sb)&&Aa(Xa,Tb)&&Aa(Ya,Ub)};x.create=(a=xc)=>new x(a);x.determinant=a=>a[0]*a[3]-a[1]*a[2];x.equals=(a,b)=>a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3];x.frobNorm=a=>Math.hypot(a[0],
a[1],a[2],a[3]);x.fromArray=(a,b=new x)=>{b.set(a);return b};x.fromRotation=(a,b=new x)=>{cb=Math.sin(a);bb=Math.cos(a);b[0]=bb;b[1]=cb;b[2]=-cb;b[3]=bb;return b};x.fromScaling=(a,b=new x)=>{b[0]=a[0];b[1]=0;b[2]=0;b[3]=a[1];return b};x.identity=(a=new x)=>{a[0]=1;a[1]=0;a[2]=0;a[3]=1;return a};x.invert=(a,b=new x)=>{Na=a[0];Xa=a[1];Oa=a[2];Ya=a[3];nb=x.determinant(a);if(!nb)return null;nb=1/nb;b[0]=Ya*nb;b[1]=-Xa*nb;b[2]=-Oa*nb;b[3]=Na*nb;return b};x.minus=(a,b,c=new x)=>{c[0]=a[0]-b[0];c[1]=a[1]-
b[1];c[2]=a[2]-b[2];c[3]=a[3]-b[3];return c};x.multiply=(a,b,c=new x)=>{Na=a[0];Xa=a[1];Oa=a[2];Ya=a[3];Rb=b[0];Tb=b[1];Sb=b[2];Ub=b[3];c[0]=Na*Rb+Oa*Tb;c[1]=Xa*Rb+Ya*Tb;c[2]=Na*Sb+Oa*Ub;c[3]=Xa*Sb+Ya*Ub;return c};x.multiplyScalar=(a,b,c=new x)=>{c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;return c};x.rotate=(a,b,c=new x)=>{Na=a[0];Xa=a[1];Oa=a[2];Ya=a[3];cb=Math.sin(b);bb=Math.cos(b);c[0]=Na*bb+Oa*cb;c[1]=Xa*bb+Ya*cb;c[2]=Na*-cb+Oa*bb;c[3]=Xa*-cb+Ya*bb;return c};x.scale=(a,b,c=new x)=>{Na=a[0];
Xa=a[1];Oa=a[2];Ya=a[3];bb=b[0];cb=b[1];c[0]=Na*bb;c[1]=Xa*bb;c[2]=Oa*cb;c[3]=Ya*cb;return c};x.toString=a=>`mat2(${a[0]}, ${a[1]}, ${a[2]}, ${a[3]})`;x.transpose=(a,b=new x)=>{b===a?(Oa=a[1],b[1]=a[2],b[2]=Oa):(b[0]=a[0],b[1]=a[2],b[2]=a[1],b[3]=a[3]);return b};let ua=0,oa=0,pa=0,va=0,wa=0,qa=0,Ca=0,Da=0,Ea=0,ac=0,yb=0,bc=0,zb=0,cc=0,dc=0,ec=0,Ab=0,fc=0,xa=0,ya=0;const yc=[1,0,0,0,1,0,0,0,1];class r extends Float32Array{constructor(a=yc){super(a)}}r.UNIT_MATRIX3=new r(yc);r.clone=a=>new r(a);r.cofactor00=
a=>a[4]*a[8]-a[5]*a[7];r.cofactor01=a=>a[1]*a[8]-a[7]*a[2];r.cofactor02=a=>a[1]*a[5]-a[4]*a[2];r.cofactor10=a=>a[3]*a[8]-a[6]*a[5];r.cofactor11=a=>a[0]*a[8]-a[6]*a[2];r.cofactor12=a=>a[0]*a[5]-a[3]*a[2];r.cofactor20=a=>a[3]*a[7]-a[6]*a[4];r.cofactor21=a=>a[0]*a[7]-a[6]*a[1];r.cofactor22=a=>a[0]*a[4]-a[3]*a[1];r.create=()=>new r(yc);r.determinant=a=>{ua=a[0];oa=a[1];pa=a[2];wa=a[3];va=a[4];qa=a[5];Ca=a[6];Da=a[7];Ea=a[8];return ua*(Ea*va-qa*Da)+oa*(-Ea*wa+qa*Ca)+pa*(Da*wa-va*Ca)};r.fromArray=(a,b=
new r)=>{b.set(a);return b};r.fromMatrix4=(a,b=new r)=>{b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[4];b[4]=a[5];b[5]=a[6];b[6]=a[8];b[7]=a[9];b[8]=a[10];return b};r.fromRotation=(a,b=new r)=>{ya=Math.sin(a);xa=Math.cos(a);b[0]=xa;b[1]=ya;b[2]=0;b[3]=-ya;b[4]=xa;b[5]=0;b[6]=0;b[7]=0;b[8]=1;return b};r.fromScaling=(a,b=new r)=>{b[0]=a[0];b[1]=0;b[2]=0;b[3]=0;b[4]=a[1];b[5]=0;b[6]=0;b[7]=0;b[8]=1;return b};r.fromTranslation=(a,b=new r)=>{b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=1;b[5]=0;b[6]=a[0];b[7]=a[1];b[8]=1;
return b};r.identity=(a=new r)=>{a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};r.invert=(a,b=new r)=>{ua=a[0];oa=a[1];pa=a[2];wa=a[3];va=a[4];qa=a[5];Ca=a[6];Da=a[7];Ea=a[8];yb=Ea*va-qa*Da;zb=-Ea*wa+qa*Ca;Ab=Da*wa-va*Ca;a=ua*yb+oa*zb+pa*Ab;if(!a)return null;a=1/a;b[0]=yb*a;b[1]=(-Ea*oa+pa*Da)*a;b[2]=(qa*oa-pa*va)*a;b[3]=zb*a;b[4]=(Ea*ua-pa*Ca)*a;b[5]=(-qa*ua+pa*wa)*a;b[6]=Ab*a;b[7]=(-Da*ua+oa*Ca)*a;b[8]=(va*ua-oa*wa)*a;return b};r.multiply=()=>(a,b,c=new r)=>{ua=a[0];oa=
a[1];pa=a[2];wa=a[3];va=a[4];qa=a[5];Ca=a[6];Da=a[7];Ea=a[8];ac=b[0];yb=b[1];bc=b[2];cc=b[3];zb=b[4];dc=b[5];ec=b[6];Ab=b[7];fc=b[8];c[0]=ac*ua+yb*wa+bc*Ca;c[1]=ac*oa+yb*va+bc*Da;c[2]=ac*pa+yb*qa+bc*Ea;c[3]=cc*ua+zb*wa+dc*Ca;c[4]=cc*oa+zb*va+dc*Da;c[5]=cc*pa+zb*qa+dc*Ea;c[6]=ec*ua+Ab*wa+fc*Ca;c[7]=ec*oa+Ab*va+fc*Da;c[8]=ec*pa+Ab*qa+fc*Ea;return c};r.rotate=(a,b,c=new r)=>{ua=a[0];oa=a[1];pa=a[2];wa=a[3];va=a[4];qa=a[5];Ca=a[6];Da=a[7];Ea=a[8];ya=Math.sin(b);xa=Math.cos(b);c[0]=xa*ua+ya*wa;c[1]=xa*
oa+ya*va;c[2]=xa*pa+ya*qa;c[3]=ya*wa-xa*ua;c[4]=ya*va-xa*oa;c[5]=ya*qa-xa*pa;c[6]=Ca;c[7]=Da;c[8]=Ea;return c};r.scale=(a,b,c=new r)=>{xa=b[0];ya=b[1];c[0]=xa*a[0];c[1]=xa*a[1];c[2]=xa*a[2];c[3]=ya*a[3];c[4]=ya*a[4];c[5]=ya*a[5];c[6]=a[6];c[7]=a[7];c[8]=a[8];return c};r.translate=(a,b,c=new r)=>{ua=a[0];oa=a[1];pa=a[2];wa=a[3];va=a[4];qa=a[5];Ca=a[6];Da=a[7];Ea=a[8];xa=b[0];ya=b[1];c[0]=ua;c[1]=oa;c[2]=pa;c[3]=wa;c[4]=va;c[5]=qa;c[6]=xa*ua+ya*wa+Ca;c[7]=xa*oa+ya*va+Da;c[8]=xa*pa+ya*qa+Ea;return c};
r.transpose=(a,b=new r)=>{b===a?(oa=a[1],pa=a[2],qa=a[5],b[1]=a[3],b[2]=a[6],b[3]=oa,b[5]=a[7],b[6]=pa,b[7]=qa):(b[0]=a[0],b[1]=a[3],b[2]=a[6],b[3]=a[1],b[4]=a[4],b[5]=a[7],b[6]=a[2],b[7]=a[5],b[8]=a[8]);return b};let E,Z,aa,Fa,Za,$a,Pa,zc;class e extends Float32Array{constructor(a=0,b=0,c=0){super(3);this[0]=a;this[1]=b;this[2]=c}get x(){return this[0]}set x(a){this[0]=a}get y(){return this[1]}set y(a){this[1]=a}get z(){return this[2]}set z(a){this[2]=a}}e.VECTOR3_ZERO=new Float32Array([0,0,0]);
e.VECTOR3_ONE=new Float32Array([1,1,1]);e.VECTOR3_TOP=new Float32Array([0,1,0]);e.VECTOR3_BOTTOM=new Float32Array([0,-1,0]);e.VECTOR3_LEFT=new Float32Array([-1,0,0]);e.VECTOR3_RIGHT=new Float32Array([1,0,0]);e.VECTOR3_FRONT=new Float32Array([0,0,-1]);e.VECTOR3_BACK=new Float32Array([0,0,1]);e.add=(a,b,c=new e)=>{c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];return c};e.addScalar=(a,b,c=new e)=>{c[0]=a[0]+b;c[1]=a[1]+b;c[2]=a[2]+b;return c};e.angle=(a,b)=>{E=a[0];Z=a[1];aa=a[2];Fa=b[0];Za=b[1];$a=b[2];
const c=Math.sqrt(E*E+Z*Z+aa*aa)*Math.sqrt(Fa*Fa+Za*Za+$a*$a);a=c&&e.dot(a,b)/c;return Math.acos(ta(a,-1,1))};e.clamp=(a,b,c,d=new e)=>{d[0]=ta(a[0],b[0],c[0]);d[1]=ta(a[1],b[1],c[1]);d[2]=ta(a[2],b[2],c[2]);return d};e.clampSafe=(a,b,c,d=new e)=>{d[0]=mb(a[0],b[0],c[0]);d[1]=mb(a[1],b[1],c[1]);d[1]=mb(a[2],b[2],c[2]);return d};e.clampScalar=(a,b,c,d=new e)=>{d[0]=ta(a[0],b,c);d[1]=ta(a[1],b,c);d[2]=ta(a[2],b,c);return d};e.clone=(a,b=new e)=>{b[0]=a[0];b[1]=a[1];b[2]=a[2];return b};e.closeTo=(a,
b)=>Aa(a[0],b[0])&&Aa(a[1],b[1])&&Aa(a[2],b[2]);e.create=(a=0,b=0,c=0,d=new e)=>{d[0]=a;d[1]=b;d[2]=c;return d};e.cross=(a,b,c=new e)=>{E=a[0];Z=a[1];aa=a[2];Fa=b[0];Za=b[1];$a=b[2];c[0]=Z*$a-aa*Za;c[1]=aa*Fa-E*$a;c[2]=E*Za-Z*Fa;return c};e.distanceTo=(a,b)=>{E=b[0]-a[0];Z=b[1]-a[1];aa=b[2]-a[2];return Math.hypot(E,Z,aa)};e.distanceToManhattan=(a,b)=>Math.abs(a[0]-b[0])+Math.abs(a[1]-b[1])+Math.abs(a[2]-b[2]);e.distanceToSquared=(a,b)=>{E=a[0]-b[0];Z=a[1]-b[1];aa=a[2]-b[2];return E*E+Z*Z+aa*aa};e.divide=
(a,b,c=new e)=>{c[0]=a[0]/b[0];c[1]=a[1]/b[1];c[2]=a[2]/b[2];return c};e.divideScalar=(a,b,c=new e)=>{c[0]=a[0]/b;c[1]=a[1]/b;c[2]=a[2]/b;return c};e.dot=(a,b)=>a[0]*b[0]+a[1]*b[1]+a[2]*b[2];e.equals=(a,b)=>a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2];e.fromArray=(a,b=0,c=new e)=>{c[0]=a[b];c[1]=a[b+1];c[2]=a[b+2];return c};e.fromScalar=(a,b=new e(3))=>{b[0]=b[1]=b[2]=a;return b};e.fromValues=(a,b,c,d=new e(3))=>{d[0]=a;d[1]=b;d[2]=c;return d};e.hermite=(a,b,c,d,f,p=new e)=>{Pa=f*f;const h=Pa*(2*f-3)+1,
ia=Pa*(f-2)+f,C=Pa*(f-1);f=Pa*(3-2*f);p[0]=a[0]*h+b[0]*ia+c[0]*C+d[0]*f;p[1]=a[1]*h+b[1]*ia+c[1]*C+d[1]*f;p[2]=a[2]*h+b[2]*ia+c[2]*C+d[2]*f;return p};e.inverse=(a,b=new e)=>{b[0]=1/a[0];b[1]=1/a[1];b[2]=1/a[2];return b};e.norm=a=>Math.sqrt(e.lengthSquared(a));e.lengthManhattan=a=>Math.abs(a[0])+Math.abs(a[1])+Math.abs(a[2]);e.lengthSquared=a=>a[0]*a[0]+a[1]*a[1]+a[2]*a[2];e.lerp=(a,b,c,d=new e)=>{d[0]+=(b[0]-a[0])*c;d[1]+=(b[1]-a[1])*c;d[2]+=(b[2]-a[2])*c;return d};e.max=(a,b,c=new e)=>{c[0]=Math.max(a[0],
b[0]);c[1]=Math.max(a[1],b[1]);c[2]=Math.max(a[2],b[2]);return c};e.min=(a,b,c=new e)=>{c[0]=Math.min(a[0],b[0]);c[1]=Math.min(a[1],b[1]);c[2]=Math.min(a[2],b[2]);return c};e.minus=(a,b,c=new e)=>{c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];return c};e.minusScalar=(a,b,c=new e)=>{c[0]=a[0]-b;c[1]=a[1]-b;c[2]=a[2]-b;return c};e.multiply=(a,b,c=new e)=>{c[0]=a[0]*b[0];c[1]=a[1]*b[1];c[2]=a[2]*b[2];return c};e.multiplyScalar=(a,b,c=new e)=>{c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;return c};e.negate=(a,
b=new e)=>{b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];return b};e.normalize=(a,b=new e)=>e.divideScalar(a,e.norm(a)||1,b);e.rotateX=(a,b,c,d=new e)=>{E=a[0]-b[0];Z=a[1]-b[1];aa=a[2]-b[2];Fa=E;Za=Z*Math.cos(c)-aa*Math.sin(c);$a=Z*Math.sin(c)+aa*Math.cos(c);d[0]=Fa+b[0];d[1]=Za+b[1];d[2]=$a+b[2];return d};e.rotateY=(a,b,c,d=new e)=>{E=a[0]-b[0];Z=a[1]-b[1];aa=a[2]-b[2];Fa=aa*Math.sin(c)+E*Math.cos(c);Za=Z;$a=aa*Math.cos(c)-E*Math.sin(c);d[0]=Fa+b[0];d[1]=Za+b[1];d[2]=$a+b[2];return d};e.rotateZ=(a,b,c,d=new e)=>
{E=a[0]-b[0];Z=a[1]-b[1];aa=a[2]-b[2];Fa=E*Math.cos(c)-Z*Math.sin(c);Za=E*Math.sin(c)+Z*Math.cos(c);$a=aa;d[0]=Fa+b[0];d[1]=Za+b[1];d[2]=$a+b[2];return d};e.round=(a,b=new e)=>{b[0]=Math.round(a[0]);b[1]=Math.round(a[1]);b[2]=Math.round(a[2]);return b};e.set=(a=0,b=0,c=0,d=new e)=>{d[0]=a;d[1]=b;d[2]=c;return d};e.setNorm=(a,b,c=new e)=>e.multiplyScalar(e.normalize(a,c),b,c);e.slerp=(a,b,c,d=new e)=>{Pa=Math.acos(Math.min(Math.max(e.dot(a,b),-1),1));zc=Math.sin(Pa);E=Math.sin((1-c)*Pa)/zc;Fa=Math.sin(c*
Pa)/zc;d[0]=E*a[0]+Fa*b[0];d[1]=E*a[1]+Fa*b[1];d[2]=E*a[2]+Fa*b[2];return d};e.toString=a=>`(${a[0]}, ${a[1]}, ${a[2]})`;e.transformMatrix3=(a,b,c=new e)=>{E=a[0];Z=a[1];aa=a[2];c[0]=E*b[0]+Z*b[3]+aa*b[6];c[1]=E*b[1]+Z*b[4]+aa*b[7];c[2]=E*b[2]+Z*b[5]+aa*b[8];return c};e.transformMatrix4=(a,b,c=new e)=>{E=a[0];Z=a[1];aa=a[2];Pa=(Pa=b[3]*E+b[7]*Z+b[11]*aa+b[15])||1;c[0]=(b[0]*E+b[4]*Z+b[8]*aa+b[12])/Pa;c[1]=(b[1]*E+b[5]*Z+b[9]*aa+b[13])/Pa;c[2]=(b[2]*E+b[6]*Z+b[10]*aa+b[14])/Pa;return c};e.transformQuat=
(a,b,c=new e)=>{const d=b[0],f=b[1],p=b[2],h=a[0],ia=a[1];a=a[2];let C=f*a-p*ia,D=p*h-d*a,M=d*ia-f*h;b=2*b[3];c[0]=h+C*b+2*(f*M-p*D);c[1]=ia+D*b+2*(p*C-d*M);c[2]=a+M*b+2*(d*D-f*C);return c};let N=0,F=0,G=0,O=0,P=0,Q=0,H=0,R=0,S=0,T=0,U=0,V=0,Ga=0,Ha=0,Ia=0,Qa=0,y=0,z=0,A=0,W=0,ob=0,pb=0,Bb=0,Tc=0,Ua=0,Va=0,db=0,Fb=0,Gb=0,Hb=0,Ib=0,Jb=0,t=0,u=0,v=0,ra=0,Ra=0,n=0,sa=0,B=0,X=0,k=0,ma=0,na=0,Y=0;const Ac=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];class m extends Float32Array{constructor(a=Ac){super(a)}}m.UNIT_MATRIX4=
new m(Ac);m.clone=a=>new m(a);m.create=()=>new m(Ac);m.determinant=a=>{N=a[0];F=a[1];G=a[2];O=a[3];Q=a[4];P=a[5];H=a[6];R=a[7];S=a[8];T=a[9];U=a[10];V=a[11];Ha=a[12];Ga=a[13];Ia=a[14];Qa=a[15];y=N*P-F*Q;z=N*H-G*Q;A=F*H-G*P;W=S*Ga-T*Ha;pb=S*Ia-U*Ha;ob=T*Ia-U*Ga;Bb=N*ob-F*pb+G*W;Tc=Q*ob-P*pb+H*W;Ua=S*A-T*z+U*y;Va=Ha*A-Ga*z+Ia*y;return R*Bb-O*Tc+Qa*Ua-V*Va};m.fromArray=(a,b=new m)=>{b.set(a);return b};m.fromEuler=(a,b=new m)=>{t=a.x;u=a.y;v=a.z;B=Math.cos(t);X=Math.sin(t);k=Math.cos(u);ma=Math.sin(u);
na=Math.cos(v);Y=Math.sin(v);if(a.order===l.EulerRotationOrders.XYZ){a=B*na;var c=B*Y,d=X*na,f=X*Y;b[0]=k*na;b[4]=-k*Y;b[8]=ma;b[1]=c+d*ma;b[5]=a-f*ma;b[9]=-X*k;b[2]=f-a*ma;b[6]=d+c*ma;b[10]=B*k}else a.order===l.EulerRotationOrders.YXZ?(a=k*na,c=k*Y,d=ma*na,f=ma*Y,b[0]=a+f*X,b[4]=d*X-c,b[8]=B*ma,b[1]=B*Y,b[5]=B*na,b[9]=-X,b[2]=c*X-d,b[6]=f+a*X,b[10]=B*k):a.order===l.EulerRotationOrders.ZXY?(a=k*na,c=k*Y,d=ma*na,f=ma*Y,b[0]=a-f*X,b[4]=-B*Y,b[8]=d+c*X,b[1]=c+d*X,b[5]=B*na,b[9]=f-a*X,b[2]=-B*ma,b[6]=
X,b[10]=B*k):a.order===l.EulerRotationOrders.ZYX?(a=B*na,c=B*Y,d=X*na,f=X*Y,b[0]=k*na,b[4]=d*ma-c,b[8]=a*ma+f,b[1]=k*Y,b[5]=f*ma+a,b[9]=c*ma-d,b[2]=-ma,b[6]=X*k,b[10]=B*k):a.order===l.EulerRotationOrders.YZX?(a=B*k,c=B*ma,d=X*k,f=X*ma,b[0]=k*na,b[4]=f-a*Y,b[8]=d*Y+c,b[1]=Y,b[5]=B*na,b[9]=-X*na,b[2]=-ma*na,b[6]=c*Y+d,b[10]=a-f*Y):a.order===l.EulerRotationOrders.XZY&&(a=B*k,c=B*ma,d=X*k,f=X*ma,b[0]=k*na,b[4]=-Y,b[8]=ma*na,b[1]=a*Y+f,b[5]=B*na,b[9]=c*Y-d,b[2]=d*Y-c,b[6]=X*na,b[10]=f*Y+a);b[3]=0;b[7]=
0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};m.fromQuaternion=(a,b=new m)=>{var c=a[0],d=a[1],f=a[2];a=a[3];var p=c+c,h=d+d;const ia=f+f;c*=p;const C=d*p;d*=h;const D=f*p,M=f*h;f*=ia;p*=a;h*=a;a*=ia;b[0]=1-d-f;b[1]=C+a;b[2]=D-h;b[3]=0;b[4]=C-a;b[5]=1-c-f;b[6]=M+p;b[7]=0;b[8]=D+h;b[9]=M-p;b[10]=1-c-d;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};m.fromRotation=(a,b,c=new m)=>{t=b[0];u=b[1];v=b[2];Ra=Math.hypot(t,u,v);if(Ra<Wa)return null;Ra=1/Ra;t*=Ra;u*=Ra;v*=Ra;n=Math.sin(a);k=Math.cos(a);
sa=1-k;c[0]=t*t*sa+k;c[1]=u*t*sa+v*n;c[2]=v*t*sa-u*n;c[3]=0;c[4]=t*u*sa-v*n;c[5]=u*u*sa+k;c[6]=v*u*sa+t*n;c[7]=0;c[8]=t*v*sa+u*n;c[9]=u*v*sa-t*n;c[10]=v*v*sa+k;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c};m.fromRotationX=(a,b=new m)=>{n=Math.sin(a);k=Math.cos(a);b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=k;b[6]=n;b[7]=0;b[8]=0;b[9]=-n;b[10]=k;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};m.fromRotationY=(a,b=new m)=>{n=Math.sin(a);k=Math.cos(a);b[0]=k;b[1]=0;b[2]=-n;b[3]=0;b[4]=0;b[5]=1;b[6]=
0;b[7]=0;b[8]=n;b[9]=0;b[10]=k;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};m.fromRotationZ=(a,b=new m)=>{n=Math.sin(a);k=Math.cos(a);b[0]=k;b[1]=n;b[2]=0;b[3]=0;b[4]=-n;b[5]=k;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};m.fromScaling=(a,b=new m)=>{b[0]=a[0];b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=a[1];b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=a[2];b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};m.fromTranslation=(a,b=new m)=>{b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=
1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=a[0];b[13]=a[1];b[14]=a[2];b[15]=1;return b};m.identity=(a=new m)=>{a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};m.invert=(a,b=new m)=>{N=a[0];F=a[1];G=a[2];O=a[3];Q=a[4];P=a[5];H=a[6];R=a[7];S=a[8];T=a[9];U=a[10];V=a[11];Ha=a[12];Ga=a[13];Ia=a[14];Qa=a[15];y=N*P-F*Q;z=N*H-G*Q;A=N*R-O*Q;W=F*H-G*P;Ua=F*R-O*P;Va=G*R-O*H;db=S*Ga-T*Ha;Fb=S*Ia-U*Ha;Hb=S*Qa-V*Ha;Gb=T*Ia-
U*Ga;Ib=T*Qa-V*Ga;Jb=U*Qa-V*Ia;ra=y*Jb-z*Ib+A*Gb+W*Hb-Ua*Fb+Va*db;if(!ra)return null;ra=1/ra;b[0]=(P*Jb-H*Ib+R*Gb)*ra;b[1]=(G*Ib-F*Jb-O*Gb)*ra;b[2]=(Ga*Va-Ia*Ua+Qa*W)*ra;b[3]=(U*Ua-T*Va-V*W)*ra;b[4]=(H*Hb-Q*Jb-R*Fb)*ra;b[5]=(N*Jb-G*Hb+O*Fb)*ra;b[6]=(Ia*A-Ha*Va-Qa*z)*ra;b[7]=(S*Va-U*A+V*z)*ra;b[8]=(Q*Ib-P*Hb+R*db)*ra;b[9]=(F*Hb-N*Ib-O*db)*ra;b[10]=(Ha*Ua-Ga*A+Qa*y)*ra;b[11]=(T*A-S*Ua-V*y)*ra;b[12]=(P*Fb-Q*Gb-H*db)*ra;b[13]=(N*Gb-F*Fb+G*db)*ra;b[14]=(Ga*z-Ha*W-Ia*y)*ra;b[15]=(S*W-T*z+U*y)*ra;return b};
m.lookAt=(a,b,c=e.VECTOR3_TOP,d=new m)=>{let f,p;let h;const ia=a[0],C=a[1];a=a[2];var D=c[0];var M=c[1];var Ba=c[2];var eb=b[0];c=b[1];var hb=b[2];if(Aa(ia,eb)&&Aa(C,c)&&Aa(a,hb))return m.identity(d);b=ia-eb;c=C-c;eb=a-hb;h=1/Math.hypot(b,c,eb);b*=h;c*=h;eb*=h;hb=M*eb-Ba*c;Ba=Ba*b-D*eb;D=D*c-M*b;(h=Math.hypot(hb,Ba,D))?(h=1/h,hb*=h,Ba*=h,D*=h):D=Ba=hb=0;M=c*D-eb*Ba;f=eb*hb-b*D;p=b*Ba-c*hb;(h=Math.hypot(M,f,p))?(h=1/h,M*=h,f*=h,p*=h):p=f=M=0;d[0]=hb;d[1]=M;d[2]=b;d[3]=0;d[4]=Ba;d[5]=f;d[6]=c;d[7]=
0;d[8]=D;d[9]=p;d[10]=eb;d[11]=0;d[12]=-(hb*ia+Ba*C+D*a);d[13]=-(M*ia+f*C+p*a);d[14]=-(b*ia+c*C+eb*a);d[15]=1;return d};m.multiply=(a,b,c=new m)=>{N=a[0];F=a[1];G=a[2];O=a[3];Q=a[4];P=a[5];H=a[6];R=a[7];S=a[8];T=a[9];U=a[10];V=a[11];Ha=a[12];Ga=a[13];Ia=a[14];Qa=a[15];y=b[0];z=b[1];A=b[2];W=b[3];c[0]=y*N+z*Q+A*S+W*Ha;c[1]=y*F+z*P+A*T+W*Ga;c[2]=y*G+z*H+A*U+W*Ia;c[3]=y*O+z*R+A*V+W*Qa;y=b[4];z=b[5];A=b[6];W=b[7];c[4]=y*N+z*Q+A*S+W*Ha;c[5]=y*F+z*P+A*T+W*Ga;c[6]=y*G+z*H+A*U+W*Ia;c[7]=y*O+z*R+A*V+W*Qa;
y=b[8];z=b[9];A=b[10];W=b[11];c[8]=y*N+z*Q+A*S+W*Ha;c[9]=y*F+z*P+A*T+W*Ga;c[10]=y*G+z*H+A*U+W*Ia;c[11]=y*O+z*R+A*V+W*Qa;y=b[12];z=b[13];A=b[14];W=b[15];c[12]=y*N+z*Q+A*S+W*Ha;c[13]=y*F+z*P+A*T+W*Ga;c[14]=y*G+z*H+A*U+W*Ia;c[15]=y*O+z*R+A*V+W*Qa;return c};m.orthogonal=(a,b,c,d,f,p,h=new m)=>{k=1/(a-b);X=1/(c-d);B=1/(f-p);h[0]=-2*k;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=-2*X;h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[10]=2*B;h[11]=0;h[12]=(a+b)*k;h[13]=(d+c)*X;h[14]=(p+f)*B;h[15]=1;return h};m.orthogonalZ0=(a,b,c,d,f,
p,h=new m)=>{k=1/(a-b);X=1/(c-d);B=1/(f-p);h[0]=-2*k;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=-2*X;h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[10]=B;h[11]=0;h[12]=(a+b)*k;h[13]=(d+c)*X;h[14]=f*B;h[15]=1;return h};m.perspective=(a,b,c,d,f=new m)=>{Y=1/Math.tan(a/2);f[0]=Y/b;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=Y;f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[11]=-1;f[12]=0;f[13]=0;f[15]=0;null!==d&&Infinity!==d?(B=1/(c-d),f[10]=(d+c)*B,f[14]=2*d*c*B):(f[10]=-1,f[14]=-2*c);return f};m.perspectiveZ0=(a,b,c,d,f=new m)=>{Y=1/Math.tan(a/2);f[0]=
Y/b;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=Y;f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[11]=-1;f[12]=0;f[13]=0;f[15]=0;null!==d&&Infinity!==d?(B=1/(c-d),f[10]=d*B,f[14]=d*c*B):(f[10]=-1,f[14]=-c);return f};m.rotate=(a,b,c,d=new m)=>{t=c[0];u=c[1];v=c[2];Ra=Math.hypot(t,u,v);if(Ra<Wa)return null;Ra=1/Ra;t*=Ra;u*=Ra;v*=Ra;n=Math.sin(b);k=Math.cos(b);sa=1-k;N=a[0];F=a[1];G=a[2];O=a[3];Q=a[4];P=a[5];H=a[6];R=a[7];S=a[8];T=a[9];U=a[10];V=a[11];y=t*t*sa+k;z=u*t*sa+v*n;A=v*t*sa-u*n;pb=t*u*sa-v*n;ob=u*u*sa+k;Bb=v*u*sa+t*n;
Ua=t*v*sa+u*n;Va=u*v*sa-t*n;db=v*v*sa+k;d[0]=N*y+Q*z+S*A;d[1]=F*y+P*z+T*A;d[2]=G*y+H*z+U*A;d[3]=O*y+R*z+V*A;d[4]=N*pb+Q*ob+S*Bb;d[5]=F*pb+P*ob+T*Bb;d[6]=G*pb+H*ob+U*Bb;d[7]=O*pb+R*ob+V*Bb;d[8]=N*Ua+Q*Va+S*db;d[9]=F*Ua+P*Va+T*db;d[10]=G*Ua+H*Va+U*db;d[11]=O*Ua+R*Va+V*db;a!==d&&(d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15]);return d};m.rotateX=(a,b,c=new m)=>{n=Math.sin(b);k=Math.cos(b);Q=a[4];P=a[5];H=a[6];R=a[7];S=a[8];T=a[9];U=a[10];V=a[11];a!==c&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[12]=
a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]);c[4]=Q*k+S*n;c[5]=P*k+T*n;c[6]=H*k+U*n;c[7]=R*k+V*n;c[8]=S*k-Q*n;c[9]=T*k-P*n;c[10]=U*k-H*n;c[11]=V*k-R*n;return c};m.rotateY=(a,b,c=new m)=>{n=Math.sin(b);k=Math.cos(b);N=a[0];F=a[1];G=a[2];O=a[3];S=a[8];T=a[9];U=a[10];V=a[11];a!==c&&(c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]);c[0]=N*k-S*n;c[1]=F*k-T*n;c[2]=G*k-U*n;c[3]=O*k-V*n;c[8]=N*n+S*k;c[9]=F*n+T*k;c[10]=G*n+U*k;c[11]=O*n+V*k;return c};m.rotateZ=(a,b,c=
new m)=>{n=Math.sin(b);k=Math.cos(b);N=a[0];F=a[1];G=a[2];O=a[3];Q=a[4];P=a[5];H=a[6];R=a[7];a!==c&&(c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]);c[0]=N*k+Q*n;c[1]=F*k+P*n;c[2]=G*k+H*n;c[3]=O*k+R*n;c[4]=Q*k-N*n;c[5]=P*k-F*n;c[6]=H*k-G*n;c[7]=R*k-O*n;return c};m.scale=(a,b,c=new m)=>{t=b[0];u=b[1];v=b[2];c[0]=a[0]*t;c[1]=a[1]*t;c[2]=a[2]*t;c[3]=a[3]*t;c[4]=a[4]*u;c[5]=a[5]*u;c[6]=a[6]*u;c[7]=a[7]*u;c[8]=a[8]*v;c[9]=a[9]*v;c[10]=a[10]*v;c[11]=a[11]*v;
c!==a&&(c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]);return c};m.targetTo=(a,b,c=e.VECTOR3_TOP,d=new m)=>{const f=a[0],p=a[1];a=a[2];var h=c[0];const ia=c[1];var C=c[2];c=f-b[0];let D=p-b[1];b=a-b[2];let M=c*c+D*D+b*b;0<M&&(M=1/Math.sqrt(M),c*=M,D*=M,b*=M);let Ba=ia*b-C*D;C=C*c-h*b;h=h*D-ia*c;M=Ba*Ba+C*C+h*h;0<M&&(M=1/Math.sqrt(M),Ba*=M,C*=M,h*=M);d[0]=Ba;d[1]=C;d[2]=h;d[3]=0;d[4]=D*h-b*C;d[5]=b*Ba-c*h;d[6]=c*C-D*Ba;d[7]=0;d[8]=c;d[9]=D;d[10]=b;d[11]=0;d[12]=f;d[13]=p;d[14]=a;d[15]=1;return d};
m.translate=(a,b,c=new m)=>{t=b[0];u=b[1];v=b[2];a===c?(c[12]=a[0]*t+a[4]*u+a[8]*v+a[12],c[13]=a[1]*t+a[5]*u+a[9]*v+a[13],c[14]=a[2]*t+a[6]*u+a[10]*v+a[14],c[15]=a[3]*t+a[7]*u+a[11]*v+a[15]):(N=a[0],F=a[1],G=a[2],O=a[3],Q=a[4],P=a[5],H=a[6],R=a[7],S=a[8],T=a[9],U=a[10],V=a[11],c[0]=N,c[1]=F,c[2]=G,c[3]=O,c[4]=Q,c[5]=P,c[6]=H,c[7]=R,c[8]=S,c[9]=T,c[10]=U,c[11]=V,c[12]=N*t+Q*u+S*v+a[12],c[13]=F*t+P*u+T*v+a[13],c[14]=G*t+H*u+U*v+a[14],c[15]=O*t+R*u+V*v+a[15]);return c};m.transpose=(a,b=new m)=>{b===
a?(F=a[1],G=a[2],O=a[3],H=a[6],R=a[7],V=a[11],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=F,b[6]=a[9],b[7]=a[13],b[8]=G,b[9]=H,b[11]=a[14],b[12]=O,b[13]=R,b[14]=V):(b[0]=a[0],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=a[1],b[5]=a[5],b[6]=a[9],b[7]=a[13],b[8]=a[2],b[9]=a[6],b[10]=a[10],b[11]=a[14],b[12]=a[3],b[13]=a[7],b[14]=a[11],b[15]=a[15]);return b};let gc,hc;class Uc{constructor(a=0,b=0){this.r=a;this.a=b}static create(a=0,b=0){return new Uc(a,b)}distanceTo(a){return Math.sqrt(this.distanceToSquared(a))}distanceToManhattan({r:a,
a:b}){return Math.cos(b)*a-this.x()+Math.sin(b)*a-this.y()}distanceToSquared({r:a,a:b}){return this.r*this.r+a*a-2*a*this.r*Math.cos(b-this.a)}fromVector2(a){gc=a[0];hc=a[1];this.r=Math.sqrt(gc*gc+hc*hc);this.a=Math.atan2(hc,gc);return this}lengthManhattan(){return(Math.cos(this.a)+Math.sin(this.a))*this.r}set(a=0,b=0){this.r=a;this.a=b;return this}setA(a=0){this.a=a;return this}setR(a=0){this.r=a;return this}toJson(a={a:0,r:0}){a.r=this.r;a.a=this.a;return a}toString(){return`(${this.r}, ${this.a})`}toVector2Json(a){a[0]=
this.x();a[1]=this.y();return a}x(){return Math.cos(this.a)*this.r}y(){return Math.sin(this.a)*this.r}}let I,J,K,ba,Ja,Ka,La,ja,Ma=0,Sa=0,Bc=0,kb=0,ic=0,qb=0,Kb=0,Lb=0;const ib=new Float32Array(3);class w extends Float32Array{constructor(a=0,b=0,c=0,d=0){super(4);this[0]=a;this[1]=b;this[2]=c;this[3]=d}get x(){return this[0]}set x(a){this[0]=a}get y(){return this[1]}set y(a){this[1]=a}get z(){return this[2]}set z(a){this[2]=a}get w(){return this[3]}set w(a){this[3]=a}}w.angleTo=(a,b)=>{kb=w.dot(a,
b);return Math.acos(2*kb*kb-1)};w.conjugate=(a,b=new w)=>{b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=a[3];return b};w.create=(a=0,b=0,c=0,d=1,f=new w)=>{f[0]=a;f[1]=b;f[2]=c;f[3]=d;return f};w.dot=(a,b)=>a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3];w.fromAxisAngle=(a,b,c=new w)=>{b*=.5;Ma=Math.sin(b);c[0]=Ma*a[0];c[1]=Ma*a[1];c[2]=Ma*a[2];c[3]=Math.cos(b);return c};w.fromMatrix3=(a,b=new w)=>{var c=a[0]+a[4]+a[8];if(0<c)c=Math.sqrt(c+1),b[3]=.5*c,c=.5/c,b[0]=(a[5]-a[7])*c,b[1]=(a[6]-a[2])*c,b[2]=(a[1]-a[3])*
c;else{let d=0;a[4]>a[0]&&(d=1);a[8]>a[3*d+d]&&(d=2);const f=(d+1)%3,p=(d+2)%3;c=Math.sqrt(a[3*d+d]-a[3*f+f]-a[3*p+p]+1);b[d]=.5*c;c=.5/c;b[3]=(a[3*f+p]-a[3*p+f])*c;b[f]=(a[3*f+d]+a[3*d+f])*c;b[p]=(a[3*p+d]+a[3*d+p])*c}return b};w.identity=(a=new w)=>{a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};w.invert=(a,b=new w)=>{I=a[0];J=a[1];K=a[2];ba=a[3];(kb=I*I+J*J+K*K+ba*ba)?(Sa=1/kb,b[0]=-I*Sa,b[1]=-J*Sa,b[2]=-K*Sa,b[3]=ba*Sa):(b[0]=0,b[1]=0,b[2]=0,b[3]=0);return b};w.lerp=(a,b,c,d=new w)=>{I=a[0];J=a[1];K=a[2];
ba=a[3];d[0]=I+c*(b[0]-I);d[1]=J+c*(b[1]-J);d[2]=K+c*(b[2]-K);d[3]=ba+c*(b[3]-ba);return d};w.multiply=(a,b,c=new w)=>{I=a[0];J=a[1];K=a[2];ba=a[3];Ja=b[0];Ka=b[1];La=b[2];ja=b[3];c[0]=I*ja+ba*Ja+J*La-K*Ka;c[1]=J*ja+ba*Ka+K*Ja-I*La;c[2]=K*ja+ba*La+I*Ka-J*Ja;c[3]=ba*ja-I*Ja-J*Ka-K*La;return c};w.normalize=(a,b=new w)=>{I=a[0];J=a[1];K=a[2];ba=a[3];qb=I*I+J*J+K*K+ba*ba;0<qb&&(qb=1/Math.sqrt(qb));b[0]=I*qb;b[1]=J*qb;b[2]=K*qb;b[3]=ba*qb;return b};w.random=(a=new w)=>{I=Math.random();J=Math.random();
K=Math.random();Sa=Math.sqrt(1-I);Ma=Math.sqrt(I);a[0]=Sa*Math.sin(2*Math.PI*J);a[1]=Sa*Math.cos(2*Math.PI*J);a[2]=Ma*Math.sin(2*Math.PI*K);a[3]=Ma*Math.cos(2*Math.PI*K);return a};w.rotationTo=(a,b,c=new w)=>{kb=e.dot(a,b);if(kb<-1+Wa)return e.cross(e.VECTOR3_LEFT,a,ib),e.norm(ib)<Wa&&e.cross(e.VECTOR3_TOP,a,ib),e.normalize(ib,ib),w.fromAxisAngle(ib,Math.PI,c),c;if(kb>1-Wa)return c[0]=0,c[1]=0,c[2]=0,c[3]=1,c;e.cross(ib,a,b);c[0]=ib[0];c[1]=ib[1];c[2]=ib[2];c[3]=1+kb;return w.normalize(c,c)};w.rotateX=
(a,b,c=new w)=>{b*=.5;I=a[0];J=a[1];K=a[2];ba=a[3];Ja=Math.sin(b);ja=Math.cos(b);c[0]=I*ja+ba*Ja;c[1]=J*ja+K*Ja;c[2]=K*ja-J*Ja;c[3]=ba*ja-I*Ja;return c};w.rotateY=(a,b,c=new w)=>{b*=.5;I=a[0];J=a[1];K=a[2];ba=a[3];Ka=Math.sin(b);ja=Math.cos(b);c[0]=I*ja-K*Ka;c[1]=J*ja+ba*Ka;c[2]=K*ja+I*Ka;c[3]=ba*ja-J*Ka;return c};w.rotateZ=(a,b,c=new w)=>{b*=.5;I=a[0];J=a[1];K=a[2];ba=a[3];La=Math.sin(b);ja=Math.cos(b);c[0]=I*ja+J*La;c[1]=J*ja-I*La;c[2]=K*ja+ba*La;c[3]=ba*ja-K*La;return c};w.slerp=(a,b,c,d=new w)=>
{I=a[0];J=a[1];K=a[2];ba=a[3];Ja=b[0];Ka=b[1];La=b[2];ja=b[3];Sa=I*Ja+J*Ka+K*La+ba*ja;0>Sa&&(Sa=-Sa,Ja=-Ja,Ka=-Ka,La=-La,ja=-ja);1-Sa>Wa?(ic=Math.acos(Sa),Ma=Math.sin(ic),Kb=Math.sin((1-c)*ic)/Ma,Lb=Math.sin(c*ic)/Ma):(Kb=1-c,Lb=c);d[0]=Kb*I+Lb*Ja;d[1]=Kb*J+Lb*Ka;d[2]=Kb*K+Lb*La;d[3]=Kb*ba+Lb*ja;return d};w.toAxisAngle=(a,b)=>{Bc=2*Math.acos(a[3]);Ma=Math.sin(Bc/2);Ma>Wa?(b[0]=a[0]/Ma,b[1]=a[1]/Ma,b[2]=a[2]/Ma):(b[0]=1,b[1]=0,b[2]=0);return Bc};w.toString=a=>`quat("${a[0]}, ${a[1]}, ${a[2]}, ${a[3]})`;
const Mb=new e,Nb=new e,Ob=new e,rb=new e,Cb=new e,sb=new e,lb=new e,jc=new e,wb=new e,bd=[1,1,1];class L{constructor(a=new e,b=e.fromArray(bd)){this.min=new e;this.max=new e;e.min(a,b,this.min);e.max(a,b,this.max)}}L.clampPoint=(a,b,c=new e)=>e.clamp(b,a.min,a.max,c);L.containsPoint=(a,b)=>b[0]>=a.min[0]&&b[0]<=a.max[0]&&b[1]>=a.min[1]&&b[1]<=a.max[1]&&b[2]>=a.min[2]&&b[2]<=a.max[2];L.containsCube=(a,b)=>a.min[0]<=b.min[0]&&b.max[0]<=a.max[0]&&a.min[1]<=b.min[1]&&b.max[1]<=a.max[1]&&a.min[2]<=b.min[2]&&
b.max[2]<=a.max[2];L.depth=a=>a.max[2]-a.min[2];L.equals=(a,b)=>e.equals(a.min,b.min)&&e.equals(a.max,b.max);L.getCenter=(a,b=new e)=>{e.add(a.min,a.max,b);return e.multiplyScalar(b,.5,b)};L.getSize=(a,b=new e)=>e.minus(a.max,a.min,b);L.height=a=>a.max[1]-a.min[1];L.intersect=(a,b,c=new L)=>{e.max(a.min,b.min,c.min);e.min(a.max,b.max,c.max);return c};L.intersectsBox=(a,b)=>!(b.max[0]<a.min[0]||b.min[0]>a.max[0]||b.max[1]<a.min[1]||b.min[1]>a.max[1]||b.max[2]<a.min[2]||b.min[2]>a.max[2]);L.intersectsSphere=
(a,b)=>{L.clampPoint(a,b.position,lb);return e.distanceToSquared(lb,b.position)<=b.radius*b.radius};L.intersectsTriangle=(a,b)=>{if(L.isEmpty(a))return!1;L.getCenter(a,lb);e.minus(a.max,lb,jc);e.minus(b.a,lb,Ob);e.minus(b.b,lb,Mb);e.minus(b.c,lb,Nb);e.minus(Mb,Ob,sb);e.minus(Nb,Mb,rb);e.minus(Ob,Nb,Cb);a=[0,-sb[2],sb[1],0,-rb[2],rb[1],0,-Cb[2],Cb[1],sb[2],0,-sb[0],rb[2],0,-rb[0],Cb[2],0,-Cb[0],-sb[1],sb[0],0,-rb[1],rb[0],0,-Cb[1],Cb[0],0];if(!vb(a,Ob,Mb,Nb,jc)||!vb(a,Ob,Mb,Nb,jc))return!1;e.cross(sb,
rb,lb);return vb(lb,Ob,Mb,Nb,jc)};L.isEmpty=a=>a.max[0]<a.min[0]||a.max[0]<a.min[0]||a.max[0]<a.min[0];L.round=(a,b=new L)=>{e.round(a.min,b.min);e.round(a.max,b.max);return b};L.size=(a,b=new e)=>e.minus(a.max,a.min,b);L.stretch=(a,b,c,d=new L)=>{e.add(a.min,b,d.min);e.add(a.max,c,d.max);return d};L.translate=(a,b,c=new L)=>{e.add(a.min,b,c.min);e.add(a.max,b,c.max);return c};L.union=(a,b,c=new L)=>{e.min(a.min,b.min,c.min);e.max(a.max,b.max,c.max);return c};L.volume=a=>(a.max[0]-a.min[0])*(a.max[1]-
a.min[1])*(a.max[2]-a.min[2]);L.width=a=>a.max[0]-a.min[0];let Yb,Nc,sc,tc,uc,Oc,Ta=0,fb=0,Cc=0,Dc=0;class g extends Float32Array{constructor(a=0,b=0){super(2);this[0]=a;this[1]=b}get x(){return this[0]}set x(a){this[0]=a}get y(){return this[1]}set y(a){this[1]=a}}g.VECTOR2_ZERO=new Float32Array([0,0]);g.VECTOR2_TOP=new Float32Array([0,1]);g.VECTOR2_BOTTOM=new Float32Array([0,-1]);g.VECTOR2_LEFT=new Float32Array([-1,0]);g.VECTOR2_RIGHT=new Float32Array([1,0]);g.add=(a,b,c=new g)=>{c[0]=a[0]+b[0];
c[1]=a[1]+b[1];return c};g.addScalar=(a,b,c=new g(2))=>{c[0]=a[0]+b;c[1]=a[1]+b;return c};g.angle=a=>Math.atan2(a[1],a[0]);g.ceil=(a,b=new g)=>{b[0]=Math.ceil(a[0]);b[1]=Math.ceil(a[1]);return b};g.clamp=(a,b,c,d=new g)=>{d[0]=ta(a[0],b[0],c[0]);d[1]=ta(a[1],b[1],c[1]);return d};g.clampSafe=(a,b,c,d=new g)=>{d[0]=mb(a[0],b[0],c[0]);d[1]=mb(a[1],b[1],c[1]);return d};g.clampLength=(a,b,c,d=new g)=>{d[0]=mb(a[0],b[0],c[0]);d[1]=mb(a[1],b[1],c[1]);return d};g.clampScalar=(a,b,c,d=new g)=>{d[0]=ta(a[0],
b,c);d[1]=ta(a[1],b,c);return d};g.closeTo=(a,b,c=Wa)=>g.distanceTo(a,b)<=c;g.closeToRect=(a,b,c=Wa)=>Aa(a[0],b[0],c)&&Aa(a[1],b[1],c);g.closeToManhattan=(a,b,c=Wa)=>g.distanceToManhattan(a,b)<=c;g.clone=(a,b=new g)=>{b[0]=a[0];b[1]=a[1];return b};g.cross=(a,b)=>a[0]*b[1]-a[1]*b[0];g.create=(a=0,b=0,c=new g)=>{c[0]=a;c[1]=b;return c};g.distanceTo=(a,b)=>{Ta=b[0]-a[0];fb=b[1]-a[1];return Math.hypot(Ta,fb)};g.distanceToManhattan=(a,b)=>Math.abs(a[0]-b[0])+Math.abs(a[1]-b[1]);g.distanceToSquared=(a,
b)=>{Ta=a[0]-b[0];fb=a[1]-b[1];return Ta*Ta+fb*fb};g.divide=(a,b,c=new g)=>{c[0]=a[0]/b[0];c[1]=a[1]/b[1];return c};g.divideScalar=(a,b,c=new g)=>g.multiplyScalar(a,1/b,c);g.dot=(a,b)=>a[0]*b[0]+a[1]*b[1];g.equals=(a,b)=>a[0]===b[0]&&a[1]===b[1];g.floor=(a,b=new g)=>{b[0]=Math.floor(a[0]);b[1]=Math.floor(a[1]);return b};g.floorToZero=(a,b=new g)=>{b[0]=Zb(a[0]);b[1]=Zb(a[1]);return b};g.fromArray=(a,b=0,c=new g)=>{c[0]=a[b];c[1]=a[b+1];return c};g.fromJson=(a,b=new g)=>{b[0]=a.x;b[1]=a.y;return b};
g.fromPolar=(a,b=new g)=>{b[0]=Math.cos(a.a)*a.r;b[1]=Math.sin(a.a)*a.r;return b};g.fromScalar=(a=0,b=new g)=>{b[0]=b[1]=a;return b};g.inverse=(a,b=new g)=>{b[0]=1/a[0]||0;b[1]=1/a[1]||0;return b};g.norm=a=>Math.sqrt(a[0]*a[0]+a[1]*a[1]);g.lengthManhattan=a=>Math.abs(a[0])+Math.abs(a[1]);g.lengthSquared=a=>a[0]*a[0]+a[1]*a[1];g.lerp=(a,b,c,d=new g)=>{d[0]=(b[0]-a[0])*c+a[0];d[1]=(b[1]-a[1])*c+a[1];return d};g.max=(a,b,c=new g)=>{c[0]=Math.max(a[0],b[0]);c[1]=Math.max(a[1],b[1]);return c};g.min=(a,
b,c=new g)=>{c[0]=Math.min(a[0],b[0]);c[1]=Math.min(a[1],b[1]);return c};g.minus=(a,b,c=new g)=>{c[0]=a[0]-b[0];c[1]=a[1]-b[0];return c};g.minusScalar=(a,b,c=new g)=>{c[0]=a[0]-b;c[1]=a[1]-b;return c};g.multiply=(a,b,c=new g)=>{c[0]=a[0]*b[0];c[1]=a[1]*b[1];return c};g.multiplyScalar=(a,b,c=new g)=>{c[0]=a[0]*b;c[1]=a[1]*b;return c};g.negate=(a,b=new g)=>{b[0]=-a[0];b[1]=-a[1];return b};g.normalize=(a,b=new g)=>g.divideScalar(a,g.norm(a)||1,b);g.random=(a=1,b=new g)=>{Ta=Math.random()*Pc;b[0]=Math.cos(Ta)*
a;b[1]=Math.sin(Ta)*a;return b};g.rotate=(a,b,c=g.VECTOR2_ZERO,d=new g(2))=>{Cc=Math.cos(b);Dc=Math.sin(b);Ta=a[0]-c[0];fb=a[1]-c[1];d[0]=Ta*Cc-fb*Dc+c[0];d[1]=Ta*Dc+fb*Cc+c[1];return d};g.round=(a,b=new g)=>{b[0]=Math.round(a[0]);b[1]=Math.round(a[1]);return b};g.set=(a=0,b=0,c=new g)=>{c[0]=a;c[1]=b;return c};g.setLength=(a,b,c=new g(2))=>{g.normalize(a,c);g.multiplyScalar(c,b,c);return c};g.toArray=(a,b=[])=>{b[0]=a[0];b[1]=a[1];return b};g.toPalorJson=(a,b={a:0,r:0})=>{b.r=g.norm(a);b.a=g.angle(a);
return b};g.toString=a=>`(${a[0]}, ${a[1]})`;g.transformMatrix3=(a,b,c)=>{Ta=a[0];fb=a[1];c[0]=b[0]*Ta+b[3]*fb+b[6];c[1]=b[1]*Ta+b[4]*fb+b[7];return c};class za{constructor(a=g.create(),b=g.create(1,1)){this.min=g.create();this.max=g.create();g.min(a,b,this.min);g.max(a,b,this.max)}}za.area=a=>(a.max[0]-a.min[0])*(a.max[1]-a.min[1]);za.containsPoint=(a,b)=>b[0]>=a.min[0]&&b[0]<=a.max[0]&&b[1]>=a.min[1]&&b[1]<=a.max[1];za.containsRectangle=(a,b)=>a.min[0]<=b.min[0]&&b.max[0]<=a.max[0]&&a.min[1]<=b.min[1]&&
b.max[1]<=a.max[1];za.create=(a=g.create(),b=g.create(1,1))=>({max:g.max(a,b),min:g.min(a,b)});za.equals=(a,b)=>g.equals(a.min,b.min)&&g.equals(a.max,b.max);za.getCenter=(a,b=g.create())=>{g.add(a.min,a.max,b);return g.multiplyScalar(b,.5,b)};za.getSize=(a,b=g.create())=>g.minus(a.max,a.min,b);za.height=a=>a.max[1]-a.min[1];za.intersect=(a,b,c=new za)=>{g.max(a.min,b.min,c.min);g.min(a.max,b.max,c.max);return c};za.stretch=(a,b,c,d=new za)=>{g.add(a.min,b,d.min);g.add(a.max,c,d.max);return d};za.translate=
(a,b,c=new za)=>{g.add(a.min,b,c.min);g.add(a.max,b,c.max);return c};za.union=(a,b,c=new za)=>{g.min(a.min,b.min,c.min);g.max(a.max,b.max,c.max);return c};za.width=a=>a.max[0]-a.min[0];let Ec=0;class Pb{constructor(a=new e,b=1){this.position=a;this.radius=b}}Pb.boundingBox=(a,b=new L)=>{e.minusScalar(a.position,a.radius,b.min);e.addScalar(a.position,a.radius,b.max);return b};Pb.containsPoint=(a,b)=>e.distanceToSquared(a.position,b)<=a.radius*a.radius;Pb.distanceToPoint=(a,b)=>e.distanceTo(a.position,
b)-a.radius;Pb.equals=(a,b)=>e.equals(a.position,b.position)&&a.radius===b.radius;Pb.intersectsSphere=(a,b)=>{Ec=a.radius+b.radius;return e.distanceToSquared(a.position,b.position)<=Ec*Ec};const Vc=[-1,-1,0],Wc=[1,-1,0],Xc=[0,1,0],Yc=new e,Zc=new e;class gb{constructor(a=new Float32Array(Vc),b=new Float32Array(Wc),c=new Float32Array(Xc)){this.a=a;this.b=b;this.c=c}}gb.area=a=>{const b=gb.getABLength(a),c=gb.getBCLength(a);a=gb.getCALength(a);const d=(b+c+a)/2;return Math.sqrt(d*(d-c)*(d-a)*(d-b))};
gb.create=(a=new Float32Array(Vc),b=new Float32Array(Wc),c=new Float32Array(Xc))=>({a,b,c});gb.getABLength=a=>e.distanceTo(a.a,a.b);gb.getBCLength=a=>e.distanceTo(a.b,a.c);gb.getCALength=a=>e.distanceTo(a.c,a.a);gb.normal=(a,b=e.create())=>{e.minus(a.c,a.b,Zc);e.minus(a.b,a.a,Yc);e.cross(Yc,Zc,b);return e.normalize(b)};gb.toFloat32Array=(a,b=new Float32Array(3))=>{b.set(a.a,0);b.set(a.b,3);b.set(a.c,6);return e.normalize(b)};let tb,Fc,Gc;const jb=new e;class ab{constructor(a=new e,b=new e(0,0,-1)){this.position=
a;this.direction=e.normalize(b)}}ab.at=(a,b,c=new e)=>e.multiplyScalar(a.direction,b,c);ab.distanceToPoint=(a,b)=>Math.sqrt(ab.distanceSqToPoint(a,b));ab.distanceSqToPoint=(a,b)=>{e.minus(b,a.position,jb);tb=e.dot(jb,a.direction);if(0>tb)return e.distanceToSquared(a.position,b);e.multiplyScalar(a.direction,tb,jb);e.add(jb,a.position,jb);return e.distanceToSquared(jb,b)};ab.lookAt=(a,b,c=new ab)=>{a!==c&&e.fromArray(a.position,0,c.position);e.normalize(e.minus(b,a.position,c.direction));return c};
ab.intersectSphere=(a,b,c)=>{e.minus(b.position,a.position,jb);tb=e.dot(jb,a.direction);Gc=e.dot(jb,jb)-tb*tb;Fc=b.radius*b.radius;if(Gc>Fc)return null;var d=Math.sqrt(Fc-Gc);b=tb-d;d=tb+d;return 0>b&&0>d?null:0>b?ab.at(a,d,c):ab.at(a,b,c)};ab.intersectsSphere=(a,b)=>ab.distanceSqToPoint(a,b.position)<=b.radius*b.radius;let ca,da,ea,fa,Vb,Wb,Xb,ub,kc,lc,mc,nc,Hc,Ic,Jc,Kc,Lc,Mc,oc,pc,qc,rc;class q extends Float32Array{constructor(a=0,b=0,c=0,d=0){super(4);this[0]=a;this[1]=b;this[2]=c;this[3]=d}get x(){return this[0]}set x(a){this[0]=
a}get y(){return this[1]}set y(a){this[1]=a}get z(){return this[2]}set z(a){this[2]=a}get w(){return this[3]}set w(a){this[3]=a}}q.add=(a,b,c=new q)=>{c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];return c};q.ceil=(a,b=new q)=>{b[0]=Math.ceil(a[0]);b[1]=Math.ceil(a[1]);b[2]=Math.ceil(a[2]);b[3]=Math.ceil(a[3]);return b};q.closeTo=(a,b)=>Aa(a[0],b[0])&&Aa(a[1],b[1])&&Aa(a[2],b[2])&&Aa(a[3],b[3]);q.create=(a=0,b=0,c=0,d=0,f=new q)=>{f[0]=a;f[1]=b;f[2]=c;f[3]=d;return f};q.cross=(a,b,c,
d=new Float32Array(4))=>{Hc=b[0]*c[1]-b[1]*c[0];Ic=b[0]*c[2]-b[2]*c[0];Jc=b[0]*c[3]-b[3]*c[0];Kc=b[1]*c[2]-b[2]*c[1];Lc=b[1]*c[3]-b[3]*c[1];Mc=b[2]*c[3]-b[3]*c[2];oc=a[0];pc=a[1];qc=a[2];rc=a[3];d[0]=pc*Mc-qc*Lc+rc*Kc;d[1]=-(oc*Mc)+qc*Jc-rc*Ic;d[2]=oc*Lc-pc*Jc+rc*Hc;d[3]=-(oc*Kc)+pc*Ic-qc*Hc;return d};q.distanceTo=(a,b)=>{ca=b[0]-a[0];da=b[1]-a[1];ea=b[2]-a[2];fa=b[3]-a[3];return Math.hypot(ca,da,ea,fa)};q.distanceToSquared=(a,b)=>{ca=b[0]-a[0];da=b[1]-a[1];ea=b[2]-a[2];fa=b[3]-a[3];return ca*ca+
da*da+ea*ea+fa*fa};q.divide=(a,b,c=new q)=>{c[0]=a[0]/b[0];c[1]=a[1]/b[1];c[2]=a[2]/b[2];c[3]=a[3]/b[3];return c};q.dot=(a,b)=>a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3];q.equals=(a,b)=>a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3];q.floor=(a,b=new q)=>{b[0]=Math.floor(a[0]);b[1]=Math.floor(a[1]);b[2]=Math.floor(a[2]);b[3]=Math.floor(a[3]);return b};q.fromValues=(a,b,c,d,f=new q)=>{f[0]=a;f[1]=b;f[2]=c;f[3]=d;return f};q.inverse=(a,b=new q)=>{b[0]=1/a[0];b[1]=1/a[1];b[2]=1/a[2];b[3]=1/a[3];return b};
q.norm=a=>Math.hypot(a[0],a[1],a[2],a[3]);q.lengthSquared=a=>{ca=a[0];da=a[1];ea=a[2];fa=a[3];return ca*ca+da*da+ea*ea+fa*fa};q.lerp=(a,b,c,d=new q)=>{ca=a[0];da=a[1];ea=a[2];fa=a[3];d[0]=ca+c*(b[0]-ca);d[1]=da+c*(b[1]-da);d[2]=ea+c*(b[2]-ea);d[3]=fa+c*(b[3]-fa);return d};q.max=(a,b,c=new q)=>{c[0]=Math.max(a[0],b[0]);c[1]=Math.max(a[1],b[1]);c[2]=Math.max(a[2],b[2]);c[3]=Math.max(a[3],b[3]);return c};q.min=(a,b,c=new q)=>{c[0]=Math.min(a[0],b[0]);c[1]=Math.min(a[1],b[1]);c[2]=Math.min(a[2],b[2]);
c[3]=Math.min(a[3],b[3]);return c};q.minus=(a,b,c=new q)=>{c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];c[3]=a[3]-b[3];return c};q.multiply=(a,b,c=new q)=>{c[0]=a[0]*b[0];c[1]=a[1]*b[1];c[2]=a[2]*b[2];c[3]=a[3]*b[3];return c};q.multiplyScalar=(a,b,c=new q)=>{c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;return c};q.negate=(a,b=new q)=>{b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=-a[3];return b};q.normalize=(a,b=new q)=>{ca=a[0];da=a[1];ea=a[2];fa=a[3];ub=ca*ca+da*da+ea*ea+fa*fa;0<ub&&(ub=1/Math.sqrt(ub));
b[0]=ca*ub;b[1]=da*ub;b[2]=ea*ub;b[3]=fa*ub;return b};q.round=(a,b=new q)=>{b[0]=Math.round(a[0]);b[1]=Math.round(a[1]);b[2]=Math.round(a[2]);b[3]=Math.round(a[3]);return b};q.toString=a=>`(${a[0]}, ${a[1]}, ${a[2]}, ${a[3]})`;q.transformMatrix4=(a,b,c=new q)=>{ca=a[0];da=a[1];ea=a[2];fa=a[3];c[0]=b[0]*ca+b[4]*da+b[8]*ea+b[12]*fa;c[1]=b[1]*ca+b[5]*da+b[9]*ea+b[13]*fa;c[2]=b[2]*ca+b[6]*da+b[10]*ea+b[14]*fa;c[3]=b[3]*ca+b[7]*da+b[11]*ea+b[15]*fa;return c};q.transformQuat=(a,b,c=new q)=>{Vb=a[0];Wb=
a[1];Xb=a[2];ca=b[0];da=b[1];ea=b[2];fa=b[3];kc=fa*Vb+da*Xb-ea*Wb;lc=fa*Wb+ea*Vb-ca*Xb;mc=fa*Xb+ca*Wb-da*Vb;nc=-ca*Vb-da*Wb-ea*Xb;c[0]=kc*fa+nc*-ca+lc*-ea-mc*-da;c[1]=lc*fa+nc*-da+mc*-ca-kc*-ea;c[2]=mc*fa+nc*-ea+kc*-da-lc*-ca;c[3]=a[3];return c};l.COLOR_HEX_MAP=xb;l.ColorGPU=ha;l.ColorRGB=la;l.ColorRGBA=ka;l.Constants=$c;l.Cube=L;l.Easing=ad;l.EulerAngle=Qb;l.Matrix2=x;l.Matrix3=r;l.Matrix4=m;l.Polar=Uc;l.Quaternion=w;l.Ray3=ab;l.Rectangle2=za;l.Sphere=Pb;l.Triangle3=gb;l.Vector2=g;l.Vector3=e;l.Vector4=
q;l.ceilPowerOfTwo=a=>Math.pow(2,Math.ceil(Math.log(a)/Math.LN2));l.clamp=ta;l.clampCircle=(a,b,c)=>{Db=c-b;Eb=Zb(b/Db)*Db+a%Db;return Eb<b?Eb+Db:Eb>c?Eb-Db:Eb};l.clampSafe=mb;l.closeTo=Aa;l.floorPowerOfTwo=a=>Math.pow(2,Math.floor(Math.log(a)/Math.LN2));l.floorToZero=Zb;l.isPowerOfTwo=a=>0===(a&a-1)&&0!==a;l.lerp=(a,b,c)=>(b-a)*c+a;l.mapRange=(a,b,c)=>{vc=b[1]-b[0];Qc=c[1]-c[0];return(a-.5*vc)/Qc/vc};l.randFloat=(a=0,b=1)=>a+Math.random()*(b-a);l.randInt=(a=0,b=1)=>a+Math.floor(Math.random()*(b-
a+1));l.rndFloat=(a,b)=>a+Math.random()*(b-a);l.rndFloatRange=a=>a*(.5-Math.random());l.rndInt=(a,b)=>a+Math.floor(Math.random()*(b-a+1));l.sum=(...a)=>Sc(a);l.sumArray=Sc;Object.defineProperty(l,"__esModule",{value:!0})});

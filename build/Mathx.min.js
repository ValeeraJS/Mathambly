(function(m,Bb){"object"===typeof exports&&"undefined"!==typeof module?Bb(exports):"function"===typeof define&&define.amd?define(["exports"],Bb):(m="undefined"!==typeof globalThis?globalThis:m||self,Bb(m.Mathx={}))})(this,function(m){function Bb(a,b,c,d,f){ac=0;for(Nc=a.length-3;ac<=Nc;ac+=3)if(e.fromArray(a,ac,Cb),Oc=f[0]*Math.abs(Cb[0])+f[1]*Math.abs(Cb[1])+f[2]*Math.abs(Cb[2]),sc=e.dot(b,Cb),tc=e.dot(c,Cb),uc=e.dot(d,Cb),Math.max(-Math.max(sc,tc,uc),Math.min(sc,tc,uc))>Oc)return!1;return!0}const Pc=
2*Math.PI,Xa=Math.pow(2,-52);var $c=Object.freeze({__proto__:null,DEG_TO_RAD:Math.PI/180,DEG_360_RAD:Pc,DEG_90_RAD:Math.PI/2,DEG_60_RAD:Math.PI/3,DEG_45_RAD:Math.PI/4,DEG_30_RAD:Math.PI/6,EPSILON:Xa,RAD_TO_DEG:180/Math.PI});const Db={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,
coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,
dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,
lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,
midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,
salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};class qa extends Uint8Array{constructor(a=0,b=0,c=0,d=1){super(4);this[0]=a;this[1]=b;this[2]=c;this[3]=
d}get r(){return this[0]}set r(a){this[0]=a}get g(){return this[1]}set g(a){this[1]=a}get b(){return this[2]}set b(a){this[2]=a}get a(){return this[4]}set a(a){this[4]=a}}qa.average=a=>(a[0]+a[1]+a[2])/3;qa.averageWeighted=(a,b=.299,c=.587,d=.114)=>a[0]*b+a[1]*c+a[2]*d;qa.clone=a=>new qa(a[0],a[1],a[2],a[3]);qa.create=(a=0,b=0,c=0,d=1)=>new qa(a,b,c,d);qa.equals=(a,b)=>(a.r??a[0])===(b.r??b[0])&&(a.g??a[1])===(b.g??b[1])&&(a.b??a[2])===(b.b??b[2])&&(a.a??a[3])===(b.a??b[3]);qa.fromArray=(a,b=new qa)=>
{b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b};qa.fromHex=(a,b=255,c=new qa)=>{c[0]=a>>16;c[1]=a>>8&255;c[2]=a&255;c[3]=b;return c};qa.fromJson=(a,b=new qa)=>{b[0]=a.r;b[1]=a.g;b[2]=a.b;b[3]=a.a;return b};qa.fromScalar=(a,b=255,c=new qa)=>{c[0]=a;c[1]=a;c[2]=a;c[3]=b;return c};qa.fromString=(a,b=new qa)=>{if(a in Db)return qa.fromHex(Db[a],255,b);if(a.startsWith("#"))return a=a.substr(1),qa.fromScalar(parseInt(a,16),255,b);a.startsWith("rgba(")&&(a=a.substring(4,a.length-1),a=a.split(","),b[0]=
parseInt(a[0],10),b[1]=parseInt(a[1],10),b[2]=parseInt(a[2],10),b[3]=parseInt(a[3],10));return b};qa.grayscale=(a,b=.299,c=.587,d=.114,f=new qa)=>{b=qa.averageWeighted(a,b,c,d);qa.fromScalar(b,a[3],f);return f};class ra extends Uint8Array{constructor(a=0,b=0,c=0){super(3);this[0]=a;this[1]=b;this[2]=c}get r(){return this[0]}set r(a){this[0]=a}get g(){return this[1]}set g(a){this[1]=a}get b(){return this[2]}set b(a){this[2]=a}}ra.average=a=>(a[0]+a[1]+a[2])/3;ra.averageWeighted=(a,b=.299,c=.587,d=
.114)=>a[0]*b+a[1]*c+a[2]*d;ra.clone=a=>new ra(a[0],a[1],a[2]);ra.create=(a=0,b=0,c=0)=>new ra(a,b,c);ra.equals=(a,b)=>(a.r??a[0])===(b.r??b[0])&&(a.g??a[1])===(b.g??b[1])&&(a.b??a[2])===(b.b??b[2]);ra.fromArray=(a,b=new ra)=>{b[0]=a[0];b[1]=a[1];b[2]=a[2];return b};ra.fromHex=(a,b=new ra)=>{b[0]=a>>16;b[1]=a>>8&255;b[2]=a&255;return b};ra.fromJson=(a,b=new ra)=>{b[0]=a.r;b[1]=a.g;b[2]=a.b;return b};ra.fromScalar=(a,b=new ra)=>{b[0]=a;b[1]=a;b[2]=a;return b};ra.fromString=(a,b=new ra)=>{if(a in Db)return ra.fromHex(Db[a],
b);if(a.startsWith("#"))return a=a.substr(1),ra.fromScalar(parseInt(a,16),b);a.startsWith("rgb(")&&(a=a.substring(4,a.length-1),a=a.split(","),b[0]=parseInt(a[0],10),b[1]=parseInt(a[1],10),b[2]=parseInt(a[2],10));return b};ra.grayscale=(a,b=.299,c=.587,d=.114,f=new ra)=>{a=ra.averageWeighted(a,b,c,d);ra.fromScalar(a,f);return f};class ka extends Float32Array{constructor(a=0,b=0,c=0,d=0){super(4);this[0]=a;this[1]=b;this[2]=c;this[3]=d}static fromColorRGB(a,b=new ka){b[0]=a[0]/255;b[1]=a[1]/255;b[2]=
a[2]/255;b[3]=1;return b}static fromColorRGBA(a,b=new ka){b[0]=a[0]/255;b[1]=a[1]/255;b[2]=a[2]/255;b[3]=a[3]/255;return b}get r(){return this[0]}set r(a){this[0]=a}get g(){return this[1]}set g(a){this[1]=a}get b(){return this[2]}set b(a){this[2]=a}get a(){return this[3]}set a(a){this[3]=a}}ka.average=a=>(a[0]+a[1]+a[2])/3;ka.averageWeighted=(a,b=.299,c=.587,d=.114)=>a[0]*b+a[1]*c+a[2]*d;ka.clone=a=>new ka(a[0],a[1],a[2],a[3]);ka.create=(a=0,b=0,c=0,d=0)=>new ka(a,b,c,d);ka.equals=(a,b)=>(a.r??a[0])===
(b.r??b[0])&&(a.g??a[1])===(b.g??b[1])&&(a.b??a[2])===(b.b??b[2])&&(a.a??a[3])===(b.a??b[3]);ka.fromArray=(a,b=new ka)=>{b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b};ka.fromHex=(a,b=1,c=new ka)=>{c[0]=(a>>16)/255;c[1]=(a>>8&255)/255;c[2]=(a&255)/255;c[3]=b;return c};ka.fromJson=(a,b=new ka)=>{b[0]=a.r;b[1]=a.g;b[2]=a.b;b[3]=a.a;return b};ka.fromScalar=(a,b=new ka)=>{b[0]=a;b[1]=a;b[2]=a;return b};ka.fromString=(a,b=new ka)=>{if(a in Db)return ka.fromHex(Db[a],1,b);if(a.startsWith("#"))return a=
a.substr(1),ka.fromHex(parseInt(a,16),1,b);a.startsWith("rgb(")&&(a=a.substring(4,a.length-1),a=a.split(","),b[0]=parseInt(a[0],10)/255,b[1]=parseInt(a[1],10)/255,b[2]=parseInt(a[2],10)/255);return b};ka.grayscale=(a,b=.299,c=.587,d=.114,f=new ka)=>{a=ka.averageWeighted(a,b,c,d);ka.fromScalar(a,f);return f};var Ca=(a,b,c)=>Math.max(b,Math.min(c,a)),bc=a=>0>a?Math.ceil(a):Math.floor(a);let Gb,Hb;var rb=(a,b,c)=>b>c?Math.max(c,Math.min(b,a)):c>b?Math.max(b,Math.min(c,a)):b,Ha=(a,b,c=Xa)=>Math.abs(a-
b)<=c;let vc=0,Qc=0,Rc=0,wc=0;var Sc=a=>{wc=0;Rc=a.length;for(let b=0;b<Rc;b++)wc+=a[b];return wc},cc=a=>a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375,ad=Object.freeze({__proto__:null,BackIn:a=>1===a?1:a*a*(2.70158*a-1.70158),BackOut:a=>0===a?0:--a*a*(2.70158*a+1.70158)+1,BackInOut:a=>{if(1>(a*=2))return.5*a*a*(3.5949095*a-2.5949095);a-=2;return.5*(a*a*(3.5949095*a+2.5949095)+2)},BounceIn:a=>1-cc(1-a),BounceInOut:a=>
.5>a?.5*(1-cc(1-2*a)):.5*cc(2*a-1)+.5,BounceOut:cc,CircularIn:a=>1-Math.sqrt(1-a*a),CircularInOut:a=>{if(1>(a*=2))return-.5*(Math.sqrt(1-a*a)-1);a-=2;return.5*(Math.sqrt(1-a*a)+1)},CircularOut:a=>Math.sqrt(1- --a*a),CubicIn:a=>a*a*a,CubicInOut:a=>{if(1>(a*=2))return.5*a*a*a;a-=2;return.5*(a*a*a+2)},CubicOut:a=>--a*a*a+1,ElasticIn:a=>0===a||1===a?a:-Math.pow(2,10*(a-1))*Math.sin(5*(a-1.1)*Math.PI),ElasticInOut:a=>{if(0===a||1===a)return a;a*=2;return 1>a?-.5*Math.pow(2,10*(a-1))*Math.sin(5*(a-1.1)*
Math.PI):.5*Math.pow(2,-10*(a-1))*Math.sin(5*(a-1.1)*Math.PI)+1},ElasticOut:a=>0===a||1===a?a:Math.pow(2,-10*a)*Math.sin(5*(a-.1)*Math.PI)+1,ExponentialIn:a=>0===a?0:Math.pow(1024,a-1),ExponentialInOut:a=>0===a||1===a?a:1>(a*=2)?.5*Math.pow(1024,a-1):.5*(-Math.pow(2,-10*(a-1))+2),ExponentialOut:a=>1===a?1:1-Math.pow(2,-10*a),Linear:a=>a,QuadraticIn:a=>a*a,QuadraticInOut:a=>1>(a*=2)?.5*a*a:-.5*(--a*(a-2)-1),QuadraticOut:a=>a*(2-a),QuarticIn:a=>a*a*a*a,QuarticInOut:a=>{if(1>(a*=2))return.5*a*a*a*a;
a-=2;return-.5*(a*a*a*a-2)},QuarticOut:a=>1- --a*a*a*a,QuinticIn:a=>a*a*a*a*a,QuinticInOut:a=>{if(1>(a*=2))return.5*a*a*a*a*a;a-=2;return.5*(a*a*a*a*a+2)},QuinticOut:a=>--a*a*a*a*a+1,SinusoidalIn:a=>1-Math.sin((1-a)*Math.PI/2),SinusoidalInOut:a=>.5*(1-Math.sin(Math.PI*(.5-a))),SinusoidalOut:a=>Math.sin(a*Math.PI/2)});m.EulerRotationOrders=void 0;(function(a){a.XYZ="xyz";a.ZXY="zxy";a.YZX="yzx";a.XZY="xzy";a.ZYX="zyx";a.YXZ="yxz"})(m.EulerRotationOrders||(m.EulerRotationOrders={}));class Tb extends Float32Array{constructor(a=
0,b=0,c=0,d=m.EulerRotationOrders.XYZ){super(3);this[0]=a;this[1]=b;this[2]=c;this.order=d}static clone(a){return new Tb(a.x,a.y,a.z,a.order)}static create(a=0,b=0,c=0,d=m.EulerRotationOrders.XYZ){return new Tb(a,b,c,d)}static fromMatrix4(a,b=new Tb){const c=a[0],d=a[4],f=a[8],q=a[1],h=a[5],ma=a[9],O=a[2],P=a[6];a=a[10];switch(b.order){case m.EulerRotationOrders.XYZ:b.y=Math.asin(Ca(f,-1,1));.9999999>Math.abs(f)?(b.x=Math.atan2(-ma,a),b.z=Math.atan2(-d,c)):(b.x=Math.atan2(P,h),b.z=0);break;case m.EulerRotationOrders.YXZ:b.x=
Math.asin(-Ca(ma,-1,1));.9999999>Math.abs(ma)?(b.y=Math.atan2(f,a),b.z=Math.atan2(q,h)):(b.y=Math.atan2(-O,c),b.z=0);break;case m.EulerRotationOrders.ZXY:b.x=Math.asin(Ca(P,-1,1));.9999999>Math.abs(P)?(b.y=Math.atan2(-O,a),b.z=Math.atan2(-d,h)):(b.y=0,b.z=Math.atan2(q,c));break;case m.EulerRotationOrders.ZYX:b.y=Math.asin(-Ca(O,-1,1));.9999999>Math.abs(O)?(b.x=Math.atan2(P,a),b.z=Math.atan2(q,c)):(b.x=0,b.z=Math.atan2(-d,h));break;case m.EulerRotationOrders.YZX:b.z=Math.asin(Ca(q,-1,1));.9999999>
Math.abs(q)?(b.x=Math.atan2(-ma,h),b.y=Math.atan2(-O,c)):(b.x=0,b.y=Math.atan2(f,a));break;case m.EulerRotationOrders.XZY:b.z=Math.asin(-Ca(d,-1,1)),.9999999>Math.abs(d)?(b.x=Math.atan2(P,h),b.y=Math.atan2(f,c)):(b.x=Math.atan2(-ma,a),b.y=0)}return b}get x(){return this[0]}set x(a){this[0]=a}get y(){return this[1]}set y(a){this[1]=a}get z(){return this[2]}set z(a){this[2]=a}}Tb.ORDERS=m.EulerRotationOrders;let Pa=0,Qa=0,Ya=0,Za=0,Ub=0,Vb=0,Wb=0,Xb=0,sb=0,db=0,eb=0;const xc=[1,0,0,1];class A extends Float32Array{constructor(a=
xc){super(a)}}A.UNIT_MATRIX2=new A(xc);A.add=(a,b,c)=>{c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];return c};A.adjoint=(a,b)=>{Pa=a[0];b[0]=a[3];b[1]=-a[1];b[2]=-a[2];b[3]=Pa;return b};A.clone=a=>new A(a);A.closeTo=(a,b)=>{Pa=a[0];Ya=a[1];Qa=a[2];Za=a[3];Ub=b[0];Wb=b[1];Vb=b[2];Xb=b[3];return Ha(Pa,Ub)&&Ha(Qa,Vb)&&Ha(Ya,Wb)&&Ha(Za,Xb)};A.create=(a=xc)=>new A(a);A.determinant=a=>a[0]*a[3]-a[1]*a[2];A.equals=(a,b)=>a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3];A.frobNorm=a=>Math.hypot(a[0],
a[1],a[2],a[3]);A.fromArray=(a,b=new A)=>{b.set(a);return b};A.fromRotation=(a,b=new A)=>{eb=Math.sin(a);db=Math.cos(a);b[0]=db;b[1]=eb;b[2]=-eb;b[3]=db;return b};A.fromScaling=(a,b=new A)=>{b[0]=a[0];b[1]=0;b[2]=0;b[3]=a[1];return b};A.identity=(a=new A)=>{a[0]=1;a[1]=0;a[2]=0;a[3]=1;return a};A.invert=(a,b=new A)=>{Pa=a[0];Ya=a[1];Qa=a[2];Za=a[3];sb=A.determinant(a);if(!sb)return null;sb=1/sb;b[0]=Za*sb;b[1]=-Ya*sb;b[2]=-Qa*sb;b[3]=Pa*sb;return b};A.minus=(a,b,c=new A)=>{c[0]=a[0]-b[0];c[1]=a[1]-
b[1];c[2]=a[2]-b[2];c[3]=a[3]-b[3];return c};A.multiply=(a,b,c=new A)=>{Pa=a[0];Ya=a[1];Qa=a[2];Za=a[3];Ub=b[0];Wb=b[1];Vb=b[2];Xb=b[3];c[0]=Pa*Ub+Qa*Wb;c[1]=Ya*Ub+Za*Wb;c[2]=Pa*Vb+Qa*Xb;c[3]=Ya*Vb+Za*Xb;return c};A.multiplyScalar=(a,b,c=new A)=>{c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;return c};A.rotate=(a,b,c=new A)=>{Pa=a[0];Ya=a[1];Qa=a[2];Za=a[3];eb=Math.sin(b);db=Math.cos(b);c[0]=Pa*db+Qa*eb;c[1]=Ya*db+Za*eb;c[2]=Pa*-eb+Qa*db;c[3]=Ya*-eb+Za*db;return c};A.scale=(a,b,c=new A)=>{Pa=a[0];
Ya=a[1];Qa=a[2];Za=a[3];db=b[0];eb=b[1];c[0]=Pa*db;c[1]=Ya*db;c[2]=Qa*eb;c[3]=Za*eb;return c};A.toString=a=>`mat2(${a[0]}, ${a[1]}, ${a[2]}, ${a[3]})`;A.transpose=(a,b=new A)=>{b===a?(Qa=a[1],b[1]=a[2],b[2]=Qa):(b[0]=a[0],b[1]=a[2],b[2]=a[1],b[3]=a[3]);return b};let la=0,Z=0,aa=0,na=0,oa=0,ea=0,ta=0,ua=0,va=0,$a=0,fb=0,dc=0,Ka=0,gb=0,ec=0,tb=0,hb=0,fc=0,Da=0,Ea=0;const yc=[1,0,0,0,1,0,0,0,1];class p extends Float32Array{constructor(a=yc){super(a)}}p.UNIT_MATRIX3=new p(yc);p.clone=a=>new p(a);p.cofactor00=
a=>a[4]*a[8]-a[5]*a[7];p.cofactor01=a=>a[1]*a[8]-a[7]*a[2];p.cofactor02=a=>a[1]*a[5]-a[4]*a[2];p.cofactor10=a=>a[3]*a[8]-a[6]*a[5];p.cofactor11=a=>a[0]*a[8]-a[6]*a[2];p.cofactor12=a=>a[0]*a[5]-a[3]*a[2];p.cofactor20=a=>a[3]*a[7]-a[6]*a[4];p.cofactor21=a=>a[0]*a[7]-a[6]*a[1];p.cofactor22=a=>a[0]*a[4]-a[3]*a[1];p.create=()=>new p(yc);p.determinant=a=>{la=a[0];Z=a[1];aa=a[2];oa=a[3];na=a[4];ea=a[5];ta=a[6];ua=a[7];va=a[8];return la*(va*na-ea*ua)+Z*(-va*oa+ea*ta)+aa*(ua*oa-na*ta)};p.fromArray=(a,b=new p)=>
{b.set(a);return b};p.fromMatrix4=(a,b=new p)=>{b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[4];b[4]=a[5];b[5]=a[6];b[6]=a[8];b[7]=a[9];b[8]=a[10];return b};p.fromRotation=(a,b=new p)=>{Ea=Math.sin(a);Da=Math.cos(a);b[0]=Da;b[1]=Ea;b[2]=0;b[3]=-Ea;b[4]=Da;b[5]=0;b[6]=0;b[7]=0;b[8]=1;return b};p.fromScaling=(a,b=new p)=>{b[0]=a[0];b[1]=0;b[2]=0;b[3]=0;b[4]=a[1];b[5]=0;b[6]=0;b[7]=0;b[8]=1;return b};p.fromTranslation=(a,b=new p)=>{b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=1;b[5]=0;b[6]=a[0];b[7]=a[1];b[8]=1;return b};
p.identity=(a=new p)=>{a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};p.invert=(a,b=new p)=>{la=a[0];Z=a[1];aa=a[2];oa=a[3];na=a[4];ea=a[5];ta=a[6];ua=a[7];va=a[8];fb=va*na-ea*ua;Ka=-va*oa+ea*ta;hb=ua*oa-na*ta;a=la*fb+Z*Ka+aa*hb;if(!a)return null;a=1/a;b[0]=fb*a;b[1]=(-va*Z+aa*ua)*a;b[2]=(ea*Z-aa*na)*a;b[3]=Ka*a;b[4]=(va*la-aa*ta)*a;b[5]=(-ea*la+aa*oa)*a;b[6]=hb*a;b[7]=(-ua*la+Z*ta)*a;b[8]=(na*la-Z*oa)*a;return b};p.multiply=(a,b,c=new p)=>{la=a[0];Z=a[1];aa=a[2];oa=a[3];
na=a[4];ea=a[5];ta=a[6];ua=a[7];va=a[8];$a=b[0];fb=b[1];dc=b[2];gb=b[3];Ka=b[4];ec=b[5];tb=b[6];hb=b[7];fc=b[8];c[0]=$a*la+fb*oa+dc*ta;c[1]=$a*Z+fb*na+dc*ua;c[2]=$a*aa+fb*ea+dc*va;c[3]=gb*la+Ka*oa+ec*ta;c[4]=gb*Z+Ka*na+ec*ua;c[5]=gb*aa+Ka*ea+ec*va;c[6]=tb*la+hb*oa+fc*ta;c[7]=tb*Z+hb*na+fc*ua;c[8]=tb*aa+hb*ea+fc*va;return c};p.multiplyRotationMatrix=(a,b,c=new p)=>{la=a[0];Z=a[1];aa=a[2];oa=a[3];na=a[4];ea=a[5];ta=a[6];ua=a[7];va=a[8];$a=b[0];fb=b[1];gb=b[3];Ka=b[4];c[0]=$a*la+fb*oa;c[1]=$a*Z+fb*na;
c[2]=$a*aa+fb*ea;c[3]=gb*la+Ka*oa;c[4]=gb*Z+Ka*na;c[5]=gb*aa+Ka*ea;c[6]=ta;c[7]=ua;c[8]=va;return c};p.multiplyScaleMatrix=(a,b,c=new p)=>{la=a[0];Z=a[1];aa=a[2];oa=a[3];na=a[4];ea=a[5];ta=a[6];ua=a[7];va=a[8];$a=b[0];Ka=b[4];c[0]=$a*la;c[1]=$a*Z;c[2]=$a*aa;c[3]=Ka*oa;c[4]=Ka*na;c[5]=Ka*ea;c[6]=ta;c[7]=ua;c[8]=va;return c};p.multiplyTranslateMatrix=(a,b,c=new p)=>{la=a[0];Z=a[1];aa=a[2];oa=a[3];na=a[4];ea=a[5];ta=a[6];ua=a[7];va=a[8];tb=b[6];hb=b[7];c[0]=la;c[1]=Z;c[2]=aa;c[3]=gb;c[4]=gb;c[5]=gb;
c[6]=tb*la+hb*oa+ta;c[7]=tb*Z+hb*na+ua;c[8]=tb*aa+hb*ea+va;return c};p.rotate=(a,b,c=new p)=>{la=a[0];Z=a[1];aa=a[2];oa=a[3];na=a[4];ea=a[5];ta=a[6];ua=a[7];va=a[8];Ea=Math.sin(b);Da=Math.cos(b);c[0]=Da*la+Ea*oa;c[1]=Da*Z+Ea*na;c[2]=Da*aa+Ea*ea;c[3]=Ea*oa-Da*la;c[4]=Ea*na-Da*Z;c[5]=Ea*ea-Da*aa;c[6]=ta;c[7]=ua;c[8]=va;return c};p.scale=(a,b,c=new p)=>{Da=b[0];Ea=b[1];c[0]=Da*a[0];c[1]=Da*a[1];c[2]=Da*a[2];c[3]=Ea*a[3];c[4]=Ea*a[4];c[5]=Ea*a[5];c[6]=a[6];c[7]=a[7];c[8]=a[8];return c};p.translate=(a,
b,c=new p)=>{la=a[0];Z=a[1];aa=a[2];oa=a[3];na=a[4];ea=a[5];ta=a[6];ua=a[7];va=a[8];Da=b[0];Ea=b[1];c[0]=la;c[1]=Z;c[2]=aa;c[3]=oa;c[4]=na;c[5]=ea;c[6]=Da*la+Ea*oa+ta;c[7]=Da*Z+Ea*na+ua;c[8]=Da*aa+Ea*ea+va;return c};p.transpose=(a,b=new p)=>{b===a?(Z=a[1],aa=a[2],ea=a[5],b[1]=a[3],b[2]=a[6],b[3]=Z,b[5]=a[7],b[6]=aa,b[7]=ea):(b[0]=a[0],b[1]=a[3],b[2]=a[6],b[3]=a[1],b[4]=a[4],b[5]=a[7],b[6]=a[2],b[7]=a[5],b[8]=a[8]);return b};let Q,ba,ca,Ja,ab,bb,Ra,zc;class e extends Float32Array{constructor(a=0,b=
0,c=0){super(3);this[0]=a;this[1]=b;this[2]=c}get x(){return this[0]}set x(a){this[0]=a}get y(){return this[1]}set y(a){this[1]=a}get z(){return this[2]}set z(a){this[2]=a}}e.VECTOR3_ZERO=new Float32Array([0,0,0]);e.VECTOR3_ONE=new Float32Array([1,1,1]);e.VECTOR3_TOP=new Float32Array([0,1,0]);e.VECTOR3_BOTTOM=new Float32Array([0,-1,0]);e.VECTOR3_LEFT=new Float32Array([-1,0,0]);e.VECTOR3_RIGHT=new Float32Array([1,0,0]);e.VECTOR3_FRONT=new Float32Array([0,0,-1]);e.VECTOR3_BACK=new Float32Array([0,0,
1]);e.add=(a,b,c=new e)=>{c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];return c};e.addScalar=(a,b,c=new e)=>{c[0]=a[0]+b;c[1]=a[1]+b;c[2]=a[2]+b;return c};e.angle=(a,b)=>{Q=a[0];ba=a[1];ca=a[2];Ja=b[0];ab=b[1];bb=b[2];const c=Math.sqrt(Q*Q+ba*ba+ca*ca)*Math.sqrt(Ja*Ja+ab*ab+bb*bb);a=c&&e.dot(a,b)/c;return Math.acos(Ca(a,-1,1))};e.clamp=(a,b,c,d=new e)=>{d[0]=Ca(a[0],b[0],c[0]);d[1]=Ca(a[1],b[1],c[1]);d[2]=Ca(a[2],b[2],c[2]);return d};e.clampSafe=(a,b,c,d=new e)=>{d[0]=rb(a[0],b[0],c[0]);d[1]=rb(a[1],
b[1],c[1]);d[1]=rb(a[2],b[2],c[2]);return d};e.clampScalar=(a,b,c,d=new e)=>{d[0]=Ca(a[0],b,c);d[1]=Ca(a[1],b,c);d[2]=Ca(a[2],b,c);return d};e.clone=(a,b=new e)=>{b[0]=a[0];b[1]=a[1];b[2]=a[2];return b};e.closeTo=(a,b)=>Ha(a[0],b[0])&&Ha(a[1],b[1])&&Ha(a[2],b[2]);e.create=(a=0,b=0,c=0,d=new e)=>{d[0]=a;d[1]=b;d[2]=c;return d};e.cross=(a,b,c=new e)=>{Q=a[0];ba=a[1];ca=a[2];Ja=b[0];ab=b[1];bb=b[2];c[0]=ba*bb-ca*ab;c[1]=ca*Ja-Q*bb;c[2]=Q*ab-ba*Ja;return c};e.distanceTo=(a,b)=>{Q=b[0]-a[0];ba=b[1]-a[1];
ca=b[2]-a[2];return Math.hypot(Q,ba,ca)};e.distanceToManhattan=(a,b)=>Math.abs(a[0]-b[0])+Math.abs(a[1]-b[1])+Math.abs(a[2]-b[2]);e.distanceToSquared=(a,b)=>{Q=a[0]-b[0];ba=a[1]-b[1];ca=a[2]-b[2];return Q*Q+ba*ba+ca*ca};e.divide=(a,b,c=new e)=>{c[0]=a[0]/b[0];c[1]=a[1]/b[1];c[2]=a[2]/b[2];return c};e.divideScalar=(a,b,c=new e)=>{c[0]=a[0]/b;c[1]=a[1]/b;c[2]=a[2]/b;return c};e.dot=(a,b)=>a[0]*b[0]+a[1]*b[1]+a[2]*b[2];e.equals=(a,b)=>a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2];e.fromArray=(a,b=0,c=new e)=>
{c[0]=a[b];c[1]=a[b+1];c[2]=a[b+2];return c};e.fromScalar=(a,b=new e(3))=>{b[0]=b[1]=b[2]=a;return b};e.fromValues=(a,b,c,d=new e(3))=>{d[0]=a;d[1]=b;d[2]=c;return d};e.hermite=(a,b,c,d,f,q=new e)=>{Ra=f*f;const h=Ra*(2*f-3)+1,ma=Ra*(f-2)+f,O=Ra*(f-1);f=Ra*(3-2*f);q[0]=a[0]*h+b[0]*ma+c[0]*O+d[0]*f;q[1]=a[1]*h+b[1]*ma+c[1]*O+d[1]*f;q[2]=a[2]*h+b[2]*ma+c[2]*O+d[2]*f;return q};e.inverse=(a,b=new e)=>{b[0]=1/a[0];b[1]=1/a[1];b[2]=1/a[2];return b};e.norm=a=>Math.sqrt(e.lengthSquared(a));e.lengthManhattan=
a=>Math.abs(a[0])+Math.abs(a[1])+Math.abs(a[2]);e.lengthSquared=a=>a[0]*a[0]+a[1]*a[1]+a[2]*a[2];e.lerp=(a,b,c,d=new e)=>{d[0]+=(b[0]-a[0])*c;d[1]+=(b[1]-a[1])*c;d[2]+=(b[2]-a[2])*c;return d};e.max=(a,b,c=new e)=>{c[0]=Math.max(a[0],b[0]);c[1]=Math.max(a[1],b[1]);c[2]=Math.max(a[2],b[2]);return c};e.min=(a,b,c=new e)=>{c[0]=Math.min(a[0],b[0]);c[1]=Math.min(a[1],b[1]);c[2]=Math.min(a[2],b[2]);return c};e.minus=(a,b,c=new e)=>{c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];return c};e.minusScalar=(a,
b,c=new e)=>{c[0]=a[0]-b;c[1]=a[1]-b;c[2]=a[2]-b;return c};e.multiply=(a,b,c=new e)=>{c[0]=a[0]*b[0];c[1]=a[1]*b[1];c[2]=a[2]*b[2];return c};e.multiplyScalar=(a,b,c=new e)=>{c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;return c};e.negate=(a,b=new e)=>{b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];return b};e.normalize=(a,b=new e)=>e.divideScalar(a,e.norm(a)||1,b);e.rotateX=(a,b,c,d=new e)=>{Q=a[0]-b[0];ba=a[1]-b[1];ca=a[2]-b[2];Ja=Q;ab=ba*Math.cos(c)-ca*Math.sin(c);bb=ba*Math.sin(c)+ca*Math.cos(c);d[0]=Ja+b[0];d[1]=ab+
b[1];d[2]=bb+b[2];return d};e.rotateY=(a,b,c,d=new e)=>{Q=a[0]-b[0];ba=a[1]-b[1];ca=a[2]-b[2];Ja=ca*Math.sin(c)+Q*Math.cos(c);ab=ba;bb=ca*Math.cos(c)-Q*Math.sin(c);d[0]=Ja+b[0];d[1]=ab+b[1];d[2]=bb+b[2];return d};e.rotateZ=(a,b,c,d=new e)=>{Q=a[0]-b[0];ba=a[1]-b[1];ca=a[2]-b[2];Ja=Q*Math.cos(c)-ba*Math.sin(c);ab=Q*Math.sin(c)+ba*Math.cos(c);bb=ca;d[0]=Ja+b[0];d[1]=ab+b[1];d[2]=bb+b[2];return d};e.round=(a,b=new e)=>{b[0]=Math.round(a[0]);b[1]=Math.round(a[1]);b[2]=Math.round(a[2]);return b};e.set=
(a=0,b=0,c=0,d=new e)=>{d[0]=a;d[1]=b;d[2]=c;return d};e.setNorm=(a,b,c=new e)=>e.multiplyScalar(e.normalize(a,c),b,c);e.slerp=(a,b,c,d=new e)=>{Ra=Math.acos(Math.min(Math.max(e.dot(a,b),-1),1));zc=Math.sin(Ra);Q=Math.sin((1-c)*Ra)/zc;Ja=Math.sin(c*Ra)/zc;d[0]=Q*a[0]+Ja*b[0];d[1]=Q*a[1]+Ja*b[1];d[2]=Q*a[2]+Ja*b[2];return d};e.toString=a=>`(${a[0]}, ${a[1]}, ${a[2]})`;e.transformMatrix3=(a,b,c=new e)=>{Q=a[0];ba=a[1];ca=a[2];c[0]=Q*b[0]+ba*b[3]+ca*b[6];c[1]=Q*b[1]+ba*b[4]+ca*b[7];c[2]=Q*b[2]+ba*b[5]+
ca*b[8];return c};e.transformMatrix4=(a,b,c=new e)=>{Q=a[0];ba=a[1];ca=a[2];Ra=(Ra=b[3]*Q+b[7]*ba+b[11]*ca+b[15])||1;c[0]=(b[0]*Q+b[4]*ba+b[8]*ca+b[12])/Ra;c[1]=(b[1]*Q+b[5]*ba+b[9]*ca+b[13])/Ra;c[2]=(b[2]*Q+b[6]*ba+b[10]*ca+b[14])/Ra;return c};e.transformQuat=(a,b,c=new e)=>{const d=b[0],f=b[1],q=b[2],h=a[0],ma=a[1];a=a[2];let O=f*a-q*ma,P=q*h-d*a,V=d*ma-f*h;b=2*b[3];c[0]=h+O*b+2*(f*V-q*P);c[1]=ma+P*b+2*(q*O-d*V);c[2]=a+V*b+2*(d*P-f*O);return c};let E=0,B=0,C=0,F=0,G=0,H=0,D=0,I=0,J=0,K=0,L=0,M=
0,xa=0,ya=0,za=0,Fa=0,t=0,u=0,v=0,W=0,ub=0,vb=0,Eb=0,Tc=0,Va=0,Wa=0,ib=0,Ib=0,Jb=0,Kb=0,Lb=0,Mb=0,w=0,x=0,y=0,Aa=0,Sa=0,n=0,Ba=0,N=0,X=0,k=0,sa=0,wa=0,Y=0;const Ac=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];class l extends Float32Array{constructor(a=Ac){super(a)}}l.UNIT_MATRIX4=new l(Ac);l.clone=a=>new l(a);l.create=()=>new l(Ac);l.determinant=a=>{E=a[0];B=a[1];C=a[2];F=a[3];H=a[4];G=a[5];D=a[6];I=a[7];J=a[8];K=a[9];L=a[10];M=a[11];ya=a[12];xa=a[13];za=a[14];Fa=a[15];t=E*G-B*H;u=E*D-C*H;v=B*D-C*G;W=J*xa-K*
ya;vb=J*za-L*ya;ub=K*za-L*xa;Eb=E*ub-B*vb+C*W;Tc=H*ub-G*vb+D*W;Va=J*v-K*u+L*t;Wa=ya*v-xa*u+za*t;return I*Eb-F*Tc+Fa*Va-M*Wa};l.fromArray=(a,b=new l)=>{b.set(a);return b};l.fromEuler=(a,b=new l)=>{w=a.x;x=a.y;y=a.z;N=Math.cos(w);X=Math.sin(w);k=Math.cos(x);sa=Math.sin(x);wa=Math.cos(y);Y=Math.sin(y);if(a.order===m.EulerRotationOrders.XYZ){a=N*wa;var c=N*Y,d=X*wa,f=X*Y;b[0]=k*wa;b[4]=-k*Y;b[8]=sa;b[1]=c+d*sa;b[5]=a-f*sa;b[9]=-X*k;b[2]=f-a*sa;b[6]=d+c*sa;b[10]=N*k}else a.order===m.EulerRotationOrders.YXZ?
(a=k*wa,c=k*Y,d=sa*wa,f=sa*Y,b[0]=a+f*X,b[4]=d*X-c,b[8]=N*sa,b[1]=N*Y,b[5]=N*wa,b[9]=-X,b[2]=c*X-d,b[6]=f+a*X,b[10]=N*k):a.order===m.EulerRotationOrders.ZXY?(a=k*wa,c=k*Y,d=sa*wa,f=sa*Y,b[0]=a-f*X,b[4]=-N*Y,b[8]=d+c*X,b[1]=c+d*X,b[5]=N*wa,b[9]=f-a*X,b[2]=-N*sa,b[6]=X,b[10]=N*k):a.order===m.EulerRotationOrders.ZYX?(a=N*wa,c=N*Y,d=X*wa,f=X*Y,b[0]=k*wa,b[4]=d*sa-c,b[8]=a*sa+f,b[1]=k*Y,b[5]=f*sa+a,b[9]=c*sa-d,b[2]=-sa,b[6]=X*k,b[10]=N*k):a.order===m.EulerRotationOrders.YZX?(a=N*k,c=N*sa,d=X*k,f=X*sa,
b[0]=k*wa,b[4]=f-a*Y,b[8]=d*Y+c,b[1]=Y,b[5]=N*wa,b[9]=-X*wa,b[2]=-sa*wa,b[6]=c*Y+d,b[10]=a-f*Y):a.order===m.EulerRotationOrders.XZY&&(a=N*k,c=N*sa,d=X*k,f=X*sa,b[0]=k*wa,b[4]=-Y,b[8]=sa*wa,b[1]=a*Y+f,b[5]=N*wa,b[9]=c*Y-d,b[2]=d*Y-c,b[6]=X*wa,b[10]=f*Y+a);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};l.fromQuaternion=(a,b=new l)=>{var c=a[0],d=a[1],f=a[2];a=a[3];var q=c+c,h=d+d;const ma=f+f;c*=q;const O=d*q;d*=h;const P=f*q,V=f*h;f*=ma;q*=a;h*=a;a*=ma;b[0]=1-d-f;b[1]=O+a;b[2]=P-h;
b[3]=0;b[4]=O-a;b[5]=1-c-f;b[6]=V+q;b[7]=0;b[8]=P+h;b[9]=V-q;b[10]=1-c-d;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};l.fromRotation=(a,b,c=new l)=>{w=b[0];x=b[1];y=b[2];Sa=Math.hypot(w,x,y);if(Sa<Xa)return null;Sa=1/Sa;w*=Sa;x*=Sa;y*=Sa;n=Math.sin(a);k=Math.cos(a);Ba=1-k;c[0]=w*w*Ba+k;c[1]=x*w*Ba+y*n;c[2]=y*w*Ba-x*n;c[3]=0;c[4]=w*x*Ba-y*n;c[5]=x*x*Ba+k;c[6]=y*x*Ba+w*n;c[7]=0;c[8]=w*y*Ba+x*n;c[9]=x*y*Ba-w*n;c[10]=y*y*Ba+k;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c};l.fromRotationX=(a,b=
new l)=>{n=Math.sin(a);k=Math.cos(a);b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=k;b[6]=n;b[7]=0;b[8]=0;b[9]=-n;b[10]=k;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};l.fromRotationY=(a,b=new l)=>{n=Math.sin(a);k=Math.cos(a);b[0]=k;b[1]=0;b[2]=-n;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=n;b[9]=0;b[10]=k;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};l.fromRotationZ=(a,b=new l)=>{n=Math.sin(a);k=Math.cos(a);b[0]=k;b[1]=n;b[2]=0;b[3]=0;b[4]=-n;b[5]=k;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=
0;b[13]=0;b[14]=0;b[15]=1;return b};l.fromScaling=(a,b=new l)=>{b[0]=a[0];b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=a[1];b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=a[2];b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};l.fromTranslation=(a,b=new l)=>{b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=a[0];b[13]=a[1];b[14]=a[2];b[15]=1;return b};l.identity=(a=new l)=>{a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=
0;a[15]=1;return a};l.invert=(a,b=new l)=>{E=a[0];B=a[1];C=a[2];F=a[3];H=a[4];G=a[5];D=a[6];I=a[7];J=a[8];K=a[9];L=a[10];M=a[11];ya=a[12];xa=a[13];za=a[14];Fa=a[15];t=E*G-B*H;u=E*D-C*H;v=E*I-F*H;W=B*D-C*G;Va=B*I-F*G;Wa=C*I-F*D;ib=J*xa-K*ya;Ib=J*za-L*ya;Kb=J*Fa-M*ya;Jb=K*za-L*xa;Lb=K*Fa-M*xa;Mb=L*Fa-M*za;Aa=t*Mb-u*Lb+v*Jb+W*Kb-Va*Ib+Wa*ib;if(!Aa)return null;Aa=1/Aa;b[0]=(G*Mb-D*Lb+I*Jb)*Aa;b[1]=(C*Lb-B*Mb-F*Jb)*Aa;b[2]=(xa*Wa-za*Va+Fa*W)*Aa;b[3]=(L*Va-K*Wa-M*W)*Aa;b[4]=(D*Kb-H*Mb-I*Ib)*Aa;b[5]=(E*
Mb-C*Kb+F*Ib)*Aa;b[6]=(za*v-ya*Wa-Fa*u)*Aa;b[7]=(J*Wa-L*v+M*u)*Aa;b[8]=(H*Lb-G*Kb+I*ib)*Aa;b[9]=(B*Kb-E*Lb-F*ib)*Aa;b[10]=(ya*Va-xa*v+Fa*t)*Aa;b[11]=(K*v-J*Va-M*t)*Aa;b[12]=(G*Ib-H*Jb-D*ib)*Aa;b[13]=(E*Jb-B*Ib+C*ib)*Aa;b[14]=(xa*u-ya*W-za*t)*Aa;b[15]=(J*W-K*u+L*t)*Aa;return b};l.lookAt=(a,b,c=e.VECTOR3_TOP,d=new l)=>{let f,q;let h;const ma=a[0],O=a[1];a=a[2];var P=c[0];var V=c[1];var Ia=c[2];var jb=b[0];c=b[1];var mb=b[2];if(Ha(ma,jb)&&Ha(O,c)&&Ha(a,mb))return l.identity(d);b=ma-jb;c=O-c;jb=a-mb;
h=1/Math.hypot(b,c,jb);b*=h;c*=h;jb*=h;mb=V*jb-Ia*c;Ia=Ia*b-P*jb;P=P*c-V*b;(h=Math.hypot(mb,Ia,P))?(h=1/h,mb*=h,Ia*=h,P*=h):P=Ia=mb=0;V=c*P-jb*Ia;f=jb*mb-b*P;q=b*Ia-c*mb;(h=Math.hypot(V,f,q))?(h=1/h,V*=h,f*=h,q*=h):q=f=V=0;d[0]=mb;d[1]=V;d[2]=b;d[3]=0;d[4]=Ia;d[5]=f;d[6]=c;d[7]=0;d[8]=P;d[9]=q;d[10]=jb;d[11]=0;d[12]=-(mb*ma+Ia*O+P*a);d[13]=-(V*ma+f*O+q*a);d[14]=-(b*ma+c*O+jb*a);d[15]=1;return d};l.multiply=(a,b,c=new l)=>{E=a[0];B=a[1];C=a[2];F=a[3];H=a[4];G=a[5];D=a[6];I=a[7];J=a[8];K=a[9];L=a[10];
M=a[11];ya=a[12];xa=a[13];za=a[14];Fa=a[15];t=b[0];u=b[1];v=b[2];W=b[3];c[0]=t*E+u*H+v*J+W*ya;c[1]=t*B+u*G+v*K+W*xa;c[2]=t*C+u*D+v*L+W*za;c[3]=t*F+u*I+v*M+W*Fa;t=b[4];u=b[5];v=b[6];W=b[7];c[4]=t*E+u*H+v*J+W*ya;c[5]=t*B+u*G+v*K+W*xa;c[6]=t*C+u*D+v*L+W*za;c[7]=t*F+u*I+v*M+W*Fa;t=b[8];u=b[9];v=b[10];W=b[11];c[8]=t*E+u*H+v*J+W*ya;c[9]=t*B+u*G+v*K+W*xa;c[10]=t*C+u*D+v*L+W*za;c[11]=t*F+u*I+v*M+W*Fa;t=b[12];u=b[13];v=b[14];W=b[15];c[12]=t*E+u*H+v*J+W*ya;c[13]=t*B+u*G+v*K+W*xa;c[14]=t*C+u*D+v*L+W*za;c[15]=
t*F+u*I+v*M+W*Fa;return c};l.multiplyScaleMatrix=(a,b,c=new l)=>{E=a[0];B=a[1];C=a[2];F=a[3];H=a[4];G=a[5];D=a[6];I=a[7];J=a[8];K=a[9];L=a[10];M=a[11];ya=a[12];xa=a[13];za=a[14];Fa=a[15];t=b[0];c[0]=t*E;c[1]=t*B;c[2]=t*C;c[3]=t*F;u=b[5];c[4]=u*H;c[5]=u*G;c[6]=u*D;c[7]=u*I;v=b[10];c[8]=v*J;c[9]=v*K;c[10]=v*L;c[11]=v*M;c[12]=ya;c[13]=xa;c[14]=za;c[15]=Fa;return c};l.multiplyTranslateMatrix=(a,b,c=new l)=>{E=a[0];B=a[1];C=a[2];F=a[3];H=a[4];G=a[5];D=a[6];I=a[7];J=a[8];K=a[9];L=a[10];M=a[11];ya=a[12];
xa=a[13];za=a[14];Fa=a[15];c[0]=E;c[1]=B;c[2]=C;c[3]=F;c[4]=H;c[5]=G;c[6]=D;c[7]=I;c[8]=J;c[9]=K;c[10]=L;c[11]=M;t=b[12];u=b[13];v=b[14];c[12]=t*E+u*H+v*J+ya;c[13]=t*B+u*G+v*K+xa;c[14]=t*C+u*D+v*L+za;c[15]=t*F+u*I+v*M+Fa;return c};l.orthogonal=(a,b,c,d,f,q,h=new l)=>{k=1/(a-b);X=1/(c-d);N=1/(f-q);h[0]=-2*k;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=-2*X;h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[10]=2*N;h[11]=0;h[12]=(a+b)*k;h[13]=(d+c)*X;h[14]=(q+f)*N;h[15]=1;return h};l.orthogonalZ0=(a,b,c,d,f,q,h=new l)=>{k=1/(a-b);
X=1/(c-d);N=1/(f-q);h[0]=-2*k;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=-2*X;h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[10]=N;h[11]=0;h[12]=(a+b)*k;h[13]=(d+c)*X;h[14]=f*N;h[15]=1;return h};l.perspective=(a,b,c,d,f=new l)=>{Y=1/Math.tan(a/2);f[0]=Y/b;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=Y;f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[11]=-1;f[12]=0;f[13]=0;f[15]=0;null!==d&&Infinity!==d?(N=1/(c-d),f[10]=(d+c)*N,f[14]=2*d*c*N):(f[10]=-1,f[14]=-2*c);return f};l.perspectiveZ0=(a,b,c,d,f=new l)=>{Y=1/Math.tan(a/2);f[0]=Y/b;f[1]=0;f[2]=0;f[3]=
0;f[4]=0;f[5]=Y;f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[11]=-1;f[12]=0;f[13]=0;f[15]=0;null!==d&&Infinity!==d?(N=1/(c-d),f[10]=d*N,f[14]=d*c*N):(f[10]=-1,f[14]=-c);return f};l.rotate=(a,b,c,d=new l)=>{w=c[0];x=c[1];y=c[2];Sa=Math.hypot(w,x,y);if(Sa<Xa)return null;Sa=1/Sa;w*=Sa;x*=Sa;y*=Sa;n=Math.sin(b);k=Math.cos(b);Ba=1-k;E=a[0];B=a[1];C=a[2];F=a[3];H=a[4];G=a[5];D=a[6];I=a[7];J=a[8];K=a[9];L=a[10];M=a[11];t=w*w*Ba+k;u=x*w*Ba+y*n;v=y*w*Ba-x*n;vb=w*x*Ba-y*n;ub=x*x*Ba+k;Eb=y*x*Ba+w*n;Va=w*y*Ba+x*n;Wa=x*y*Ba-
w*n;ib=y*y*Ba+k;d[0]=E*t+H*u+J*v;d[1]=B*t+G*u+K*v;d[2]=C*t+D*u+L*v;d[3]=F*t+I*u+M*v;d[4]=E*vb+H*ub+J*Eb;d[5]=B*vb+G*ub+K*Eb;d[6]=C*vb+D*ub+L*Eb;d[7]=F*vb+I*ub+M*Eb;d[8]=E*Va+H*Wa+J*ib;d[9]=B*Va+G*Wa+K*ib;d[10]=C*Va+D*Wa+L*ib;d[11]=F*Va+I*Wa+M*ib;a!==d&&(d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15]);return d};l.rotateX=(a,b,c=new l)=>{n=Math.sin(b);k=Math.cos(b);H=a[4];G=a[5];D=a[6];I=a[7];J=a[8];K=a[9];L=a[10];M=a[11];a!==c&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[12]=a[12],c[13]=a[13],c[14]=
a[14],c[15]=a[15]);c[4]=H*k+J*n;c[5]=G*k+K*n;c[6]=D*k+L*n;c[7]=I*k+M*n;c[8]=J*k-H*n;c[9]=K*k-G*n;c[10]=L*k-D*n;c[11]=M*k-I*n;return c};l.rotateY=(a,b,c=new l)=>{n=Math.sin(b);k=Math.cos(b);E=a[0];B=a[1];C=a[2];F=a[3];J=a[8];K=a[9];L=a[10];M=a[11];a!==c&&(c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]);c[0]=E*k-J*n;c[1]=B*k-K*n;c[2]=C*k-L*n;c[3]=F*k-M*n;c[8]=E*n+J*k;c[9]=B*n+K*k;c[10]=C*n+L*k;c[11]=F*n+M*k;return c};l.rotateZ=(a,b,c=new l)=>{n=Math.sin(b);k=
Math.cos(b);E=a[0];B=a[1];C=a[2];F=a[3];H=a[4];G=a[5];D=a[6];I=a[7];a!==c&&(c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]);c[0]=E*k+H*n;c[1]=B*k+G*n;c[2]=C*k+D*n;c[3]=F*k+I*n;c[4]=H*k-E*n;c[5]=G*k-B*n;c[6]=D*k-C*n;c[7]=I*k-F*n;return c};l.scale=(a,b,c=new l)=>{w=b[0];x=b[1];y=b[2];c[0]=a[0]*w;c[1]=a[1]*w;c[2]=a[2]*w;c[3]=a[3]*w;c[4]=a[4]*x;c[5]=a[5]*x;c[6]=a[6]*x;c[7]=a[7]*x;c[8]=a[8]*y;c[9]=a[9]*y;c[10]=a[10]*y;c[11]=a[11]*y;c!==a&&(c[12]=a[12],c[13]=
a[13],c[14]=a[14],c[15]=a[15]);return c};l.targetTo=(a,b,c=e.VECTOR3_TOP,d=new l)=>{const f=a[0],q=a[1];a=a[2];var h=c[0];const ma=c[1];var O=c[2];c=f-b[0];let P=q-b[1];b=a-b[2];let V=c*c+P*P+b*b;0<V&&(V=1/Math.sqrt(V),c*=V,P*=V,b*=V);let Ia=ma*b-O*P;O=O*c-h*b;h=h*P-ma*c;V=Ia*Ia+O*O+h*h;0<V&&(V=1/Math.sqrt(V),Ia*=V,O*=V,h*=V);d[0]=Ia;d[1]=O;d[2]=h;d[3]=0;d[4]=P*h-b*O;d[5]=b*Ia-c*h;d[6]=c*O-P*Ia;d[7]=0;d[8]=c;d[9]=P;d[10]=b;d[11]=0;d[12]=f;d[13]=q;d[14]=a;d[15]=1;return d};l.translate=(a,b,c=new l)=>
{w=b[0];x=b[1];y=b[2];a===c?(c[12]=a[0]*w+a[4]*x+a[8]*y+a[12],c[13]=a[1]*w+a[5]*x+a[9]*y+a[13],c[14]=a[2]*w+a[6]*x+a[10]*y+a[14],c[15]=a[3]*w+a[7]*x+a[11]*y+a[15]):(E=a[0],B=a[1],C=a[2],F=a[3],H=a[4],G=a[5],D=a[6],I=a[7],J=a[8],K=a[9],L=a[10],M=a[11],c[0]=E,c[1]=B,c[2]=C,c[3]=F,c[4]=H,c[5]=G,c[6]=D,c[7]=I,c[8]=J,c[9]=K,c[10]=L,c[11]=M,c[12]=E*w+H*x+J*y+a[12],c[13]=B*w+G*x+K*y+a[13],c[14]=C*w+D*x+L*y+a[14],c[15]=F*w+I*x+M*y+a[15]);return c};l.transpose=(a,b=new l)=>{b===a?(B=a[1],C=a[2],F=a[3],D=a[6],
I=a[7],M=a[11],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=B,b[6]=a[9],b[7]=a[13],b[8]=C,b[9]=D,b[11]=a[14],b[12]=F,b[13]=I,b[14]=M):(b[0]=a[0],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=a[1],b[5]=a[5],b[6]=a[9],b[7]=a[13],b[8]=a[2],b[9]=a[6],b[10]=a[10],b[11]=a[14],b[12]=a[3],b[13]=a[7],b[14]=a[11],b[15]=a[15]);return b};let gc,hc;class Uc{constructor(a=0,b=0){this.r=a;this.a=b}static create(a=0,b=0){return new Uc(a,b)}distanceTo(a){return Math.sqrt(this.distanceToSquared(a))}distanceToManhattan({r:a,a:b}){return Math.cos(b)*
a-this.x()+Math.sin(b)*a-this.y()}distanceToSquared({r:a,a:b}){return this.r*this.r+a*a-2*a*this.r*Math.cos(b-this.a)}fromVector2(a){gc=a[0];hc=a[1];this.r=Math.sqrt(gc*gc+hc*hc);this.a=Math.atan2(hc,gc);return this}lengthManhattan(){return(Math.cos(this.a)+Math.sin(this.a))*this.r}set(a=0,b=0){this.r=a;this.a=b;return this}setA(a=0){this.a=a;return this}setR(a=0){this.r=a;return this}toJson(a={a:0,r:0}){a.r=this.r;a.a=this.a;return a}toString(){return`(${this.r}, ${this.a})`}toVector2Json(a){a[0]=
this.x();a[1]=this.y();return a}x(){return Math.cos(this.a)*this.r}y(){return Math.sin(this.a)*this.r}}let R,S,T,da,La,Ma,Na,pa,Oa=0,Ta=0,Bc=0,pb=0,ic=0,wb=0,Nb=0,Ob=0;const nb=new Float32Array(3);class z extends Float32Array{constructor(a=0,b=0,c=0,d=0){super(4);this[0]=a;this[1]=b;this[2]=c;this[3]=d}get x(){return this[0]}set x(a){this[0]=a}get y(){return this[1]}set y(a){this[1]=a}get z(){return this[2]}set z(a){this[2]=a}get w(){return this[3]}set w(a){this[3]=a}}z.angleTo=(a,b)=>{pb=z.dot(a,
b);return Math.acos(2*pb*pb-1)};z.conjugate=(a,b=new z)=>{b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=a[3];return b};z.create=(a=0,b=0,c=0,d=1,f=new z)=>{f[0]=a;f[1]=b;f[2]=c;f[3]=d;return f};z.dot=(a,b)=>a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3];z.fromAxisAngle=(a,b,c=new z)=>{b*=.5;Oa=Math.sin(b);c[0]=Oa*a[0];c[1]=Oa*a[1];c[2]=Oa*a[2];c[3]=Math.cos(b);return c};z.fromMatrix3=(a,b=new z)=>{var c=a[0]+a[4]+a[8];if(0<c)c=Math.sqrt(c+1),b[3]=.5*c,c=.5/c,b[0]=(a[5]-a[7])*c,b[1]=(a[6]-a[2])*c,b[2]=(a[1]-a[3])*
c;else{let d=0;a[4]>a[0]&&(d=1);a[8]>a[3*d+d]&&(d=2);const f=(d+1)%3,q=(d+2)%3;c=Math.sqrt(a[3*d+d]-a[3*f+f]-a[3*q+q]+1);b[d]=.5*c;c=.5/c;b[3]=(a[3*f+q]-a[3*q+f])*c;b[f]=(a[3*f+d]+a[3*d+f])*c;b[q]=(a[3*q+d]+a[3*d+q])*c}return b};z.identity=(a=new z)=>{a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};z.invert=(a,b=new z)=>{R=a[0];S=a[1];T=a[2];da=a[3];(pb=R*R+S*S+T*T+da*da)?(Ta=1/pb,b[0]=-R*Ta,b[1]=-S*Ta,b[2]=-T*Ta,b[3]=da*Ta):(b[0]=0,b[1]=0,b[2]=0,b[3]=0);return b};z.lerp=(a,b,c,d=new z)=>{R=a[0];S=a[1];T=a[2];
da=a[3];d[0]=R+c*(b[0]-R);d[1]=S+c*(b[1]-S);d[2]=T+c*(b[2]-T);d[3]=da+c*(b[3]-da);return d};z.multiply=(a,b,c=new z)=>{R=a[0];S=a[1];T=a[2];da=a[3];La=b[0];Ma=b[1];Na=b[2];pa=b[3];c[0]=R*pa+da*La+S*Na-T*Ma;c[1]=S*pa+da*Ma+T*La-R*Na;c[2]=T*pa+da*Na+R*Ma-S*La;c[3]=da*pa-R*La-S*Ma-T*Na;return c};z.normalize=(a,b=new z)=>{R=a[0];S=a[1];T=a[2];da=a[3];wb=R*R+S*S+T*T+da*da;0<wb&&(wb=1/Math.sqrt(wb));b[0]=R*wb;b[1]=S*wb;b[2]=T*wb;b[3]=da*wb;return b};z.random=(a=new z)=>{R=Math.random();S=Math.random();
T=Math.random();Ta=Math.sqrt(1-R);Oa=Math.sqrt(R);a[0]=Ta*Math.sin(2*Math.PI*S);a[1]=Ta*Math.cos(2*Math.PI*S);a[2]=Oa*Math.sin(2*Math.PI*T);a[3]=Oa*Math.cos(2*Math.PI*T);return a};z.rotationTo=(a,b,c=new z)=>{pb=e.dot(a,b);if(pb<-1+Xa)return e.cross(e.VECTOR3_LEFT,a,nb),e.norm(nb)<Xa&&e.cross(e.VECTOR3_TOP,a,nb),e.normalize(nb,nb),z.fromAxisAngle(nb,Math.PI,c),c;if(pb>1-Xa)return c[0]=0,c[1]=0,c[2]=0,c[3]=1,c;e.cross(nb,a,b);c[0]=nb[0];c[1]=nb[1];c[2]=nb[2];c[3]=1+pb;return z.normalize(c,c)};z.rotateX=
(a,b,c=new z)=>{b*=.5;R=a[0];S=a[1];T=a[2];da=a[3];La=Math.sin(b);pa=Math.cos(b);c[0]=R*pa+da*La;c[1]=S*pa+T*La;c[2]=T*pa-S*La;c[3]=da*pa-R*La;return c};z.rotateY=(a,b,c=new z)=>{b*=.5;R=a[0];S=a[1];T=a[2];da=a[3];Ma=Math.sin(b);pa=Math.cos(b);c[0]=R*pa-T*Ma;c[1]=S*pa+da*Ma;c[2]=T*pa+R*Ma;c[3]=da*pa-S*Ma;return c};z.rotateZ=(a,b,c=new z)=>{b*=.5;R=a[0];S=a[1];T=a[2];da=a[3];Na=Math.sin(b);pa=Math.cos(b);c[0]=R*pa+S*Na;c[1]=S*pa-R*Na;c[2]=T*pa+da*Na;c[3]=da*pa-T*Na;return c};z.slerp=(a,b,c,d=new z)=>
{R=a[0];S=a[1];T=a[2];da=a[3];La=b[0];Ma=b[1];Na=b[2];pa=b[3];Ta=R*La+S*Ma+T*Na+da*pa;0>Ta&&(Ta=-Ta,La=-La,Ma=-Ma,Na=-Na,pa=-pa);1-Ta>Xa?(ic=Math.acos(Ta),Oa=Math.sin(ic),Nb=Math.sin((1-c)*ic)/Oa,Ob=Math.sin(c*ic)/Oa):(Nb=1-c,Ob=c);d[0]=Nb*R+Ob*La;d[1]=Nb*S+Ob*Ma;d[2]=Nb*T+Ob*Na;d[3]=Nb*da+Ob*pa;return d};z.toAxisAngle=(a,b)=>{Bc=2*Math.acos(a[3]);Oa=Math.sin(Bc/2);Oa>Xa?(b[0]=a[0]/Oa,b[1]=a[1]/Oa,b[2]=a[2]/Oa):(b[0]=1,b[1]=0,b[2]=0);return Bc};z.toString=a=>`quat("${a[0]}, ${a[1]}, ${a[2]}, ${a[3]})`;
const Pb=new e,Qb=new e,Rb=new e,xb=new e,Fb=new e,yb=new e,qb=new e,jc=new e,Cb=new e,bd=[1,1,1];class U{constructor(a=new e,b=e.fromArray(bd)){this.min=new e;this.max=new e;e.min(a,b,this.min);e.max(a,b,this.max)}}U.clampPoint=(a,b,c=new e)=>e.clamp(b,a.min,a.max,c);U.containsPoint=(a,b)=>b[0]>=a.min[0]&&b[0]<=a.max[0]&&b[1]>=a.min[1]&&b[1]<=a.max[1]&&b[2]>=a.min[2]&&b[2]<=a.max[2];U.containsCube=(a,b)=>a.min[0]<=b.min[0]&&b.max[0]<=a.max[0]&&a.min[1]<=b.min[1]&&b.max[1]<=a.max[1]&&a.min[2]<=b.min[2]&&
b.max[2]<=a.max[2];U.depth=a=>a.max[2]-a.min[2];U.equals=(a,b)=>e.equals(a.min,b.min)&&e.equals(a.max,b.max);U.getCenter=(a,b=new e)=>{e.add(a.min,a.max,b);return e.multiplyScalar(b,.5,b)};U.getSize=(a,b=new e)=>e.minus(a.max,a.min,b);U.height=a=>a.max[1]-a.min[1];U.intersect=(a,b,c=new U)=>{e.max(a.min,b.min,c.min);e.min(a.max,b.max,c.max);return c};U.intersectsBox=(a,b)=>!(b.max[0]<a.min[0]||b.min[0]>a.max[0]||b.max[1]<a.min[1]||b.min[1]>a.max[1]||b.max[2]<a.min[2]||b.min[2]>a.max[2]);U.intersectsSphere=
(a,b)=>{U.clampPoint(a,b.position,qb);return e.distanceToSquared(qb,b.position)<=b.radius*b.radius};U.intersectsTriangle=(a,b)=>{if(U.isEmpty(a))return!1;U.getCenter(a,qb);e.minus(a.max,qb,jc);e.minus(b.a,qb,Rb);e.minus(b.b,qb,Pb);e.minus(b.c,qb,Qb);e.minus(Pb,Rb,yb);e.minus(Qb,Pb,xb);e.minus(Rb,Qb,Fb);a=[0,-yb[2],yb[1],0,-xb[2],xb[1],0,-Fb[2],Fb[1],yb[2],0,-yb[0],xb[2],0,-xb[0],Fb[2],0,-Fb[0],-yb[1],yb[0],0,-xb[1],xb[0],0,-Fb[1],Fb[0],0];if(!Bb(a,Rb,Pb,Qb,jc)||!Bb(a,Rb,Pb,Qb,jc))return!1;e.cross(yb,
xb,qb);return Bb(qb,Rb,Pb,Qb,jc)};U.isEmpty=a=>a.max[0]<a.min[0]||a.max[0]<a.min[0]||a.max[0]<a.min[0];U.round=(a,b=new U)=>{e.round(a.min,b.min);e.round(a.max,b.max);return b};U.size=(a,b=new e)=>e.minus(a.max,a.min,b);U.stretch=(a,b,c,d=new U)=>{e.add(a.min,b,d.min);e.add(a.max,c,d.max);return d};U.translate=(a,b,c=new U)=>{e.add(a.min,b,c.min);e.add(a.max,b,c.max);return c};U.union=(a,b,c=new U)=>{e.min(a.min,b.min,c.min);e.max(a.max,b.max,c.max);return c};U.volume=a=>(a.max[0]-a.min[0])*(a.max[1]-
a.min[1])*(a.max[2]-a.min[2]);U.width=a=>a.max[0]-a.min[0];let ac,Nc,sc,tc,uc,Oc,Ua=0,kb=0,Cc=0,Dc=0;class g extends Float32Array{constructor(a=0,b=0){super(2);this[0]=a;this[1]=b}get x(){return this[0]}set x(a){this[0]=a}get y(){return this[1]}set y(a){this[1]=a}}g.VECTOR2_ZERO=new Float32Array([0,0]);g.VECTOR2_TOP=new Float32Array([0,1]);g.VECTOR2_BOTTOM=new Float32Array([0,-1]);g.VECTOR2_LEFT=new Float32Array([-1,0]);g.VECTOR2_RIGHT=new Float32Array([1,0]);g.add=(a,b,c=new g)=>{c[0]=a[0]+b[0];
c[1]=a[1]+b[1];return c};g.addScalar=(a,b,c=new g(2))=>{c[0]=a[0]+b;c[1]=a[1]+b;return c};g.angle=a=>Math.atan2(a[1],a[0]);g.ceil=(a,b=new g)=>{b[0]=Math.ceil(a[0]);b[1]=Math.ceil(a[1]);return b};g.clamp=(a,b,c,d=new g)=>{d[0]=Ca(a[0],b[0],c[0]);d[1]=Ca(a[1],b[1],c[1]);return d};g.clampSafe=(a,b,c,d=new g)=>{d[0]=rb(a[0],b[0],c[0]);d[1]=rb(a[1],b[1],c[1]);return d};g.clampLength=(a,b,c,d=new g)=>{d[0]=rb(a[0],b[0],c[0]);d[1]=rb(a[1],b[1],c[1]);return d};g.clampScalar=(a,b,c,d=new g)=>{d[0]=Ca(a[0],
b,c);d[1]=Ca(a[1],b,c);return d};g.closeTo=(a,b,c=Xa)=>g.distanceTo(a,b)<=c;g.closeToRect=(a,b,c=Xa)=>Ha(a[0],b[0],c)&&Ha(a[1],b[1],c);g.closeToManhattan=(a,b,c=Xa)=>g.distanceToManhattan(a,b)<=c;g.clone=(a,b=new g)=>{b[0]=a[0];b[1]=a[1];return b};g.cross=(a,b)=>a[0]*b[1]-a[1]*b[0];g.create=(a=0,b=0,c=new g)=>{c[0]=a;c[1]=b;return c};g.distanceTo=(a,b)=>{Ua=b[0]-a[0];kb=b[1]-a[1];return Math.hypot(Ua,kb)};g.distanceToManhattan=(a,b)=>Math.abs(a[0]-b[0])+Math.abs(a[1]-b[1]);g.distanceToSquared=(a,
b)=>{Ua=a[0]-b[0];kb=a[1]-b[1];return Ua*Ua+kb*kb};g.divide=(a,b,c=new g)=>{c[0]=a[0]/b[0];c[1]=a[1]/b[1];return c};g.divideScalar=(a,b,c=new g)=>g.multiplyScalar(a,1/b,c);g.dot=(a,b)=>a[0]*b[0]+a[1]*b[1];g.equals=(a,b)=>a[0]===b[0]&&a[1]===b[1];g.floor=(a,b=new g)=>{b[0]=Math.floor(a[0]);b[1]=Math.floor(a[1]);return b};g.floorToZero=(a,b=new g)=>{b[0]=bc(a[0]);b[1]=bc(a[1]);return b};g.fromArray=(a,b=0,c=new g)=>{c[0]=a[b];c[1]=a[b+1];return c};g.fromJson=(a,b=new g)=>{b[0]=a.x;b[1]=a.y;return b};
g.fromPolar=(a,b=new g)=>{b[0]=Math.cos(a.a)*a.r;b[1]=Math.sin(a.a)*a.r;return b};g.fromScalar=(a=0,b=new g)=>{b[0]=b[1]=a;return b};g.inverse=(a,b=new g)=>{b[0]=1/a[0]||0;b[1]=1/a[1]||0;return b};g.norm=a=>Math.sqrt(a[0]*a[0]+a[1]*a[1]);g.lengthManhattan=a=>Math.abs(a[0])+Math.abs(a[1]);g.lengthSquared=a=>a[0]*a[0]+a[1]*a[1];g.lerp=(a,b,c,d=new g)=>{d[0]=(b[0]-a[0])*c+a[0];d[1]=(b[1]-a[1])*c+a[1];return d};g.max=(a,b,c=new g)=>{c[0]=Math.max(a[0],b[0]);c[1]=Math.max(a[1],b[1]);return c};g.min=(a,
b,c=new g)=>{c[0]=Math.min(a[0],b[0]);c[1]=Math.min(a[1],b[1]);return c};g.minus=(a,b,c=new g)=>{c[0]=a[0]-b[0];c[1]=a[1]-b[0];return c};g.minusScalar=(a,b,c=new g)=>{c[0]=a[0]-b;c[1]=a[1]-b;return c};g.multiply=(a,b,c=new g)=>{c[0]=a[0]*b[0];c[1]=a[1]*b[1];return c};g.multiplyScalar=(a,b,c=new g)=>{c[0]=a[0]*b;c[1]=a[1]*b;return c};g.negate=(a,b=new g)=>{b[0]=-a[0];b[1]=-a[1];return b};g.normalize=(a,b=new g)=>g.divideScalar(a,g.norm(a)||1,b);g.random=(a=1,b=new g)=>{Ua=Math.random()*Pc;b[0]=Math.cos(Ua)*
a;b[1]=Math.sin(Ua)*a;return b};g.rotate=(a,b,c=g.VECTOR2_ZERO,d=new g(2))=>{Cc=Math.cos(b);Dc=Math.sin(b);Ua=a[0]-c[0];kb=a[1]-c[1];d[0]=Ua*Cc-kb*Dc+c[0];d[1]=Ua*Dc+kb*Cc+c[1];return d};g.round=(a,b=new g)=>{b[0]=Math.round(a[0]);b[1]=Math.round(a[1]);return b};g.set=(a=0,b=0,c=new g)=>{c[0]=a;c[1]=b;return c};g.setLength=(a,b,c=new g(2))=>{g.normalize(a,c);g.multiplyScalar(c,b,c);return c};g.toArray=(a,b=[])=>{b[0]=a[0];b[1]=a[1];return b};g.toPalorJson=(a,b={a:0,r:0})=>{b.r=g.norm(a);b.a=g.angle(a);
return b};g.toString=a=>`(${a[0]}, ${a[1]})`;g.transformMatrix3=(a,b,c)=>{Ua=a[0];kb=a[1];c[0]=b[0]*Ua+b[3]*kb+b[6];c[1]=b[1]*Ua+b[4]*kb+b[7];return c};class Ga{constructor(a=g.create(),b=g.create(1,1)){this.min=g.create();this.max=g.create();g.min(a,b,this.min);g.max(a,b,this.max)}}Ga.area=a=>(a.max[0]-a.min[0])*(a.max[1]-a.min[1]);Ga.containsPoint=(a,b)=>b[0]>=a.min[0]&&b[0]<=a.max[0]&&b[1]>=a.min[1]&&b[1]<=a.max[1];Ga.containsRectangle=(a,b)=>a.min[0]<=b.min[0]&&b.max[0]<=a.max[0]&&a.min[1]<=b.min[1]&&
b.max[1]<=a.max[1];Ga.create=(a=g.create(),b=g.create(1,1))=>({max:g.max(a,b),min:g.min(a,b)});Ga.equals=(a,b)=>g.equals(a.min,b.min)&&g.equals(a.max,b.max);Ga.getCenter=(a,b=g.create())=>{g.add(a.min,a.max,b);return g.multiplyScalar(b,.5,b)};Ga.getSize=(a,b=g.create())=>g.minus(a.max,a.min,b);Ga.height=a=>a.max[1]-a.min[1];Ga.intersect=(a,b,c=new Ga)=>{g.max(a.min,b.min,c.min);g.min(a.max,b.max,c.max);return c};Ga.stretch=(a,b,c,d=new Ga)=>{g.add(a.min,b,d.min);g.add(a.max,c,d.max);return d};Ga.translate=
(a,b,c=new Ga)=>{g.add(a.min,b,c.min);g.add(a.max,b,c.max);return c};Ga.union=(a,b,c=new Ga)=>{g.min(a.min,b.min,c.min);g.max(a.max,b.max,c.max);return c};Ga.width=a=>a.max[0]-a.min[0];let Ec=0;class Sb{constructor(a=new e,b=1){this.position=a;this.radius=b}}Sb.boundingBox=(a,b=new U)=>{e.minusScalar(a.position,a.radius,b.min);e.addScalar(a.position,a.radius,b.max);return b};Sb.containsPoint=(a,b)=>e.distanceToSquared(a.position,b)<=a.radius*a.radius;Sb.distanceToPoint=(a,b)=>e.distanceTo(a.position,
b)-a.radius;Sb.equals=(a,b)=>e.equals(a.position,b.position)&&a.radius===b.radius;Sb.intersectsSphere=(a,b)=>{Ec=a.radius+b.radius;return e.distanceToSquared(a.position,b.position)<=Ec*Ec};const Vc=[-1,-1,0],Wc=[1,-1,0],Xc=[0,1,0],Yc=new e,Zc=new e;class lb{constructor(a=new Float32Array(Vc),b=new Float32Array(Wc),c=new Float32Array(Xc)){this.a=a;this.b=b;this.c=c}}lb.area=a=>{const b=lb.getABLength(a),c=lb.getBCLength(a);a=lb.getCALength(a);const d=(b+c+a)/2;return Math.sqrt(d*(d-c)*(d-a)*(d-b))};
lb.create=(a=new Float32Array(Vc),b=new Float32Array(Wc),c=new Float32Array(Xc))=>({a,b,c});lb.getABLength=a=>e.distanceTo(a.a,a.b);lb.getBCLength=a=>e.distanceTo(a.b,a.c);lb.getCALength=a=>e.distanceTo(a.c,a.a);lb.normal=(a,b=e.create())=>{e.minus(a.c,a.b,Zc);e.minus(a.b,a.a,Yc);e.cross(Yc,Zc,b);return e.normalize(b)};lb.toFloat32Array=(a,b=new Float32Array(3))=>{b.set(a.a,0);b.set(a.b,3);b.set(a.c,6);return e.normalize(b)};let zb,Fc,Gc;const ob=new e;class cb{constructor(a=new e,b=new e(0,0,-1)){this.position=
a;this.direction=e.normalize(b)}}cb.at=(a,b,c=new e)=>e.multiplyScalar(a.direction,b,c);cb.distanceToPoint=(a,b)=>Math.sqrt(cb.distanceSqToPoint(a,b));cb.distanceSqToPoint=(a,b)=>{e.minus(b,a.position,ob);zb=e.dot(ob,a.direction);if(0>zb)return e.distanceToSquared(a.position,b);e.multiplyScalar(a.direction,zb,ob);e.add(ob,a.position,ob);return e.distanceToSquared(ob,b)};cb.lookAt=(a,b,c=new cb)=>{a!==c&&e.fromArray(a.position,0,c.position);e.normalize(e.minus(b,a.position,c.direction));return c};
cb.intersectSphere=(a,b,c)=>{e.minus(b.position,a.position,ob);zb=e.dot(ob,a.direction);Gc=e.dot(ob,ob)-zb*zb;Fc=b.radius*b.radius;if(Gc>Fc)return null;var d=Math.sqrt(Fc-Gc);b=zb-d;d=zb+d;return 0>b&&0>d?null:0>b?cb.at(a,d,c):cb.at(a,b,c)};cb.intersectsSphere=(a,b)=>cb.distanceSqToPoint(a,b.position)<=b.radius*b.radius;let fa,ha,ia,ja,Yb,Zb,$b,Ab,kc,lc,mc,nc,Hc,Ic,Jc,Kc,Lc,Mc,oc,pc,qc,rc;class r extends Float32Array{constructor(a=0,b=0,c=0,d=0){super(4);this[0]=a;this[1]=b;this[2]=c;this[3]=d}get x(){return this[0]}set x(a){this[0]=
a}get y(){return this[1]}set y(a){this[1]=a}get z(){return this[2]}set z(a){this[2]=a}get w(){return this[3]}set w(a){this[3]=a}}r.add=(a,b,c=new r)=>{c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];return c};r.ceil=(a,b=new r)=>{b[0]=Math.ceil(a[0]);b[1]=Math.ceil(a[1]);b[2]=Math.ceil(a[2]);b[3]=Math.ceil(a[3]);return b};r.closeTo=(a,b)=>Ha(a[0],b[0])&&Ha(a[1],b[1])&&Ha(a[2],b[2])&&Ha(a[3],b[3]);r.create=(a=0,b=0,c=0,d=0,f=new r)=>{f[0]=a;f[1]=b;f[2]=c;f[3]=d;return f};r.cross=(a,b,c,
d=new Float32Array(4))=>{Hc=b[0]*c[1]-b[1]*c[0];Ic=b[0]*c[2]-b[2]*c[0];Jc=b[0]*c[3]-b[3]*c[0];Kc=b[1]*c[2]-b[2]*c[1];Lc=b[1]*c[3]-b[3]*c[1];Mc=b[2]*c[3]-b[3]*c[2];oc=a[0];pc=a[1];qc=a[2];rc=a[3];d[0]=pc*Mc-qc*Lc+rc*Kc;d[1]=-(oc*Mc)+qc*Jc-rc*Ic;d[2]=oc*Lc-pc*Jc+rc*Hc;d[3]=-(oc*Kc)+pc*Ic-qc*Hc;return d};r.distanceTo=(a,b)=>{fa=b[0]-a[0];ha=b[1]-a[1];ia=b[2]-a[2];ja=b[3]-a[3];return Math.hypot(fa,ha,ia,ja)};r.distanceToSquared=(a,b)=>{fa=b[0]-a[0];ha=b[1]-a[1];ia=b[2]-a[2];ja=b[3]-a[3];return fa*fa+
ha*ha+ia*ia+ja*ja};r.divide=(a,b,c=new r)=>{c[0]=a[0]/b[0];c[1]=a[1]/b[1];c[2]=a[2]/b[2];c[3]=a[3]/b[3];return c};r.dot=(a,b)=>a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3];r.equals=(a,b)=>a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3];r.floor=(a,b=new r)=>{b[0]=Math.floor(a[0]);b[1]=Math.floor(a[1]);b[2]=Math.floor(a[2]);b[3]=Math.floor(a[3]);return b};r.fromValues=(a,b,c,d,f=new r)=>{f[0]=a;f[1]=b;f[2]=c;f[3]=d;return f};r.inverse=(a,b=new r)=>{b[0]=1/a[0];b[1]=1/a[1];b[2]=1/a[2];b[3]=1/a[3];return b};
r.norm=a=>Math.hypot(a[0],a[1],a[2],a[3]);r.lengthSquared=a=>{fa=a[0];ha=a[1];ia=a[2];ja=a[3];return fa*fa+ha*ha+ia*ia+ja*ja};r.lerp=(a,b,c,d=new r)=>{fa=a[0];ha=a[1];ia=a[2];ja=a[3];d[0]=fa+c*(b[0]-fa);d[1]=ha+c*(b[1]-ha);d[2]=ia+c*(b[2]-ia);d[3]=ja+c*(b[3]-ja);return d};r.max=(a,b,c=new r)=>{c[0]=Math.max(a[0],b[0]);c[1]=Math.max(a[1],b[1]);c[2]=Math.max(a[2],b[2]);c[3]=Math.max(a[3],b[3]);return c};r.min=(a,b,c=new r)=>{c[0]=Math.min(a[0],b[0]);c[1]=Math.min(a[1],b[1]);c[2]=Math.min(a[2],b[2]);
c[3]=Math.min(a[3],b[3]);return c};r.minus=(a,b,c=new r)=>{c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];c[3]=a[3]-b[3];return c};r.multiply=(a,b,c=new r)=>{c[0]=a[0]*b[0];c[1]=a[1]*b[1];c[2]=a[2]*b[2];c[3]=a[3]*b[3];return c};r.multiplyScalar=(a,b,c=new r)=>{c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;return c};r.negate=(a,b=new r)=>{b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=-a[3];return b};r.normalize=(a,b=new r)=>{fa=a[0];ha=a[1];ia=a[2];ja=a[3];Ab=fa*fa+ha*ha+ia*ia+ja*ja;0<Ab&&(Ab=1/Math.sqrt(Ab));
b[0]=fa*Ab;b[1]=ha*Ab;b[2]=ia*Ab;b[3]=ja*Ab;return b};r.round=(a,b=new r)=>{b[0]=Math.round(a[0]);b[1]=Math.round(a[1]);b[2]=Math.round(a[2]);b[3]=Math.round(a[3]);return b};r.toString=a=>`(${a[0]}, ${a[1]}, ${a[2]}, ${a[3]})`;r.transformMatrix4=(a,b,c=new r)=>{fa=a[0];ha=a[1];ia=a[2];ja=a[3];c[0]=b[0]*fa+b[4]*ha+b[8]*ia+b[12]*ja;c[1]=b[1]*fa+b[5]*ha+b[9]*ia+b[13]*ja;c[2]=b[2]*fa+b[6]*ha+b[10]*ia+b[14]*ja;c[3]=b[3]*fa+b[7]*ha+b[11]*ia+b[15]*ja;return c};r.transformQuat=(a,b,c=new r)=>{Yb=a[0];Zb=
a[1];$b=a[2];fa=b[0];ha=b[1];ia=b[2];ja=b[3];kc=ja*Yb+ha*$b-ia*Zb;lc=ja*Zb+ia*Yb-fa*$b;mc=ja*$b+fa*Zb-ha*Yb;nc=-fa*Yb-ha*Zb-ia*$b;c[0]=kc*ja+nc*-fa+lc*-ia-mc*-ha;c[1]=lc*ja+nc*-ha+mc*-fa-kc*-ia;c[2]=mc*ja+nc*-ia+kc*-ha-lc*-fa;c[3]=a[3];return c};m.COLOR_HEX_MAP=Db;m.ColorGPU=ka;m.ColorRGB=ra;m.ColorRGBA=qa;m.Constants=$c;m.Cube=U;m.Easing=ad;m.EulerAngle=Tb;m.Matrix2=A;m.Matrix3=p;m.Matrix4=l;m.Polar=Uc;m.Quaternion=z;m.Ray3=cb;m.Rectangle2=Ga;m.Sphere=Sb;m.Triangle3=lb;m.Vector2=g;m.Vector3=e;m.Vector4=
r;m.ceilPowerOfTwo=a=>Math.pow(2,Math.ceil(Math.log(a)/Math.LN2));m.clamp=Ca;m.clampCircle=(a,b,c)=>{Gb=c-b;Hb=bc(b/Gb)*Gb+a%Gb;return Hb<b?Hb+Gb:Hb>c?Hb-Gb:Hb};m.clampSafe=rb;m.closeTo=Ha;m.floorPowerOfTwo=a=>Math.pow(2,Math.floor(Math.log(a)/Math.LN2));m.floorToZero=bc;m.isPowerOfTwo=a=>0===(a&a-1)&&0!==a;m.lerp=(a,b,c)=>(b-a)*c+a;m.mapRange=(a,b,c)=>{vc=b[1]-b[0];Qc=c[1]-c[0];return(a-.5*vc)/Qc/vc};m.randFloat=(a=0,b=1)=>a+Math.random()*(b-a);m.randInt=(a=0,b=1)=>a+Math.floor(Math.random()*(b-
a+1));m.rndFloat=(a,b)=>a+Math.random()*(b-a);m.rndFloatRange=a=>a*(.5-Math.random());m.rndInt=(a,b)=>a+Math.floor(Math.random()*(b-a+1));m.sum=(...a)=>Sc(a);m.sumArray=Sc;Object.defineProperty(m,"__esModule",{value:!0})});

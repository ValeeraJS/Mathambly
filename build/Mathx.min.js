(function(m,vb){"object"===typeof exports&&"undefined"!==typeof module?vb(exports):"function"===typeof define&&define.amd?define(["exports"],vb):(m="undefined"!==typeof globalThis?globalThis:m||self,vb(m.Mathx={}))})(this,function(m){function vb(a,b,c,d,f){Yb=0;for(Nc=a.length-3;Yb<=Nc;Yb+=3)if(e.fromArray(a,Yb,wb),Oc=f[0]*Math.abs(wb[0])+f[1]*Math.abs(wb[1])+f[2]*Math.abs(wb[2]),sc=e.dot(b,wb),tc=e.dot(c,wb),uc=e.dot(d,wb),Math.max(-Math.max(sc,tc,uc),Math.min(sc,tc,uc))>Oc)return!1;return!0}const Pc=
2*Math.PI,Wa=Math.pow(2,-52);var $c=Object.freeze({__proto__:null,DEG_TO_RAD:Math.PI/180,DEG_360_RAD:Pc,DEG_90_RAD:Math.PI/2,DEG_60_RAD:Math.PI/3,DEG_45_RAD:Math.PI/4,DEG_30_RAD:Math.PI/6,EPSILON:Wa,RAD_TO_DEG:180/Math.PI});const xb={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,
coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,
dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,
lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,
midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,
salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};class ka extends Uint8Array{constructor(a=0,b=0,c=0,d=1){super(4);this[0]=a;this[1]=b;this[2]=c;this[3]=
d}get r(){return this[0]}set r(a){this[0]=a}get g(){return this[1]}set g(a){this[1]=a}get b(){return this[2]}set b(a){this[2]=a}get a(){return this[4]}set a(a){this[4]=a}}ka.average=a=>(a[0]+a[1]+a[2])/3;ka.averageWeighted=(a,b=.299,c=.587,d=.114)=>a[0]*b+a[1]*c+a[2]*d;ka.clone=a=>new ka(a[0],a[1],a[2],a[3]);ka.create=(a=0,b=0,c=0,d=1)=>new ka(a,b,c,d);ka.equals=(a,b)=>(a.r??a[0])===(b.r??b[0])&&(a.g??a[1])===(b.g??b[1])&&(a.b??a[2])===(b.b??b[2])&&(a.a??a[3])===(b.a??b[3]);ka.fromArray=(a,b=new ka)=>
{b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b};ka.fromHex=(a,b=255,c=new ka)=>{c[0]=a>>16;c[1]=a>>8&255;c[2]=a&255;c[3]=b;return c};ka.fromJson=(a,b=new ka)=>{b[0]=a.r;b[1]=a.g;b[2]=a.b;b[3]=a.a;return b};ka.fromScalar=(a,b=255,c=new ka)=>{c[0]=a;c[1]=a;c[2]=a;c[3]=b;return c};ka.fromString=(a,b=new ka)=>{if(a in xb)return ka.fromHex(xb[a],255,b);if(a.startsWith("#"))return a=a.substr(1),ka.fromScalar(parseInt(a,16),255,b);a.startsWith("rgba(")&&(a=a.substring(4,a.length-1),a=a.split(","),b[0]=
parseInt(a[0],10),b[1]=parseInt(a[1],10),b[2]=parseInt(a[2],10),b[3]=parseInt(a[3],10));return b};ka.grayscale=(a,b=.299,c=.587,d=.114,f=new ka)=>{b=ka.averageWeighted(a,b,c,d);ka.fromScalar(b,a[3],f);return f};class la extends Uint8Array{constructor(a=0,b=0,c=0){super(3);this[0]=a;this[1]=b;this[2]=c}get r(){return this[0]}set r(a){this[0]=a}get g(){return this[1]}set g(a){this[1]=a}get b(){return this[2]}set b(a){this[2]=a}}la.average=a=>(a[0]+a[1]+a[2])/3;la.averageWeighted=(a,b=.299,c=.587,d=
.114)=>a[0]*b+a[1]*c+a[2]*d;la.clone=a=>new la(a[0],a[1],a[2]);la.create=(a=0,b=0,c=0)=>new la(a,b,c);la.equals=(a,b)=>(a.r??a[0])===(b.r??b[0])&&(a.g??a[1])===(b.g??b[1])&&(a.b??a[2])===(b.b??b[2]);la.fromArray=(a,b=new la)=>{b[0]=a[0];b[1]=a[1];b[2]=a[2];return b};la.fromHex=(a,b=new la)=>{b[0]=a>>16;b[1]=a>>8&255;b[2]=a&255;return b};la.fromJson=(a,b=new la)=>{b[0]=a.r;b[1]=a.g;b[2]=a.b;return b};la.fromScalar=(a,b=new la)=>{b[0]=a;b[1]=a;b[2]=a;return b};la.fromString=(a,b=new la)=>{if(a in xb)return la.fromHex(xb[a],
b);if(a.startsWith("#"))return a=a.substr(1),la.fromScalar(parseInt(a,16),b);a.startsWith("rgb(")&&(a=a.substring(4,a.length-1),a=a.split(","),b[0]=parseInt(a[0],10),b[1]=parseInt(a[1],10),b[2]=parseInt(a[2],10));return b};la.grayscale=(a,b=.299,c=.587,d=.114,f=new la)=>{a=la.averageWeighted(a,b,c,d);la.fromScalar(a,f);return f};class ha extends Float32Array{constructor(a=0,b=0,c=0,d=0){super(4);this[0]=a;this[1]=b;this[2]=c;this[3]=d}static fromColorRGB(a,b=new ha){b[0]=a[0]/255;b[1]=a[1]/255;b[2]=
a[2]/255;b[3]=1;return b}static fromColorRGBA(a,b=new ha){b[0]=a[0]/255;b[1]=a[1]/255;b[2]=a[2]/255;b[3]=a[3]/255;return b}get r(){return this[0]}set r(a){this[0]=a}get g(){return this[1]}set g(a){this[1]=a}get b(){return this[2]}set b(a){this[2]=a}get a(){return this[3]}set a(a){this[3]=a}}ha.average=a=>(a[0]+a[1]+a[2])/3;ha.averageWeighted=(a,b=.299,c=.587,d=.114)=>a[0]*b+a[1]*c+a[2]*d;ha.clone=a=>new ha(a[0],a[1],a[2],a[3]);ha.create=(a=0,b=0,c=0,d=0)=>new ha(a,b,c,d);ha.equals=(a,b)=>(a.r??a[0])===
(b.r??b[0])&&(a.g??a[1])===(b.g??b[1])&&(a.b??a[2])===(b.b??b[2])&&(a.a??a[3])===(b.a??b[3]);ha.fromArray=(a,b=new ha)=>{b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b};ha.fromHex=(a,b=1,c=new ha)=>{c[0]=(a>>16)/255;c[1]=(a>>8&255)/255;c[2]=(a&255)/255;c[3]=b;return c};ha.fromJson=(a,b=new ha)=>{b[0]=a.r;b[1]=a.g;b[2]=a.b;b[3]=a.a;return b};ha.fromScalar=(a,b=new ha)=>{b[0]=a;b[1]=a;b[2]=a;return b};ha.fromString=(a,b=new ha)=>{if(a in xb)return ha.fromHex(xb[a],1,b);if(a.startsWith("#"))return a=
a.substr(1),ha.fromHex(parseInt(a,16),1,b);a.startsWith("rgb(")&&(a=a.substring(4,a.length-1),a=a.split(","),b[0]=parseInt(a[0],10)/255,b[1]=parseInt(a[1],10)/255,b[2]=parseInt(a[2],10)/255);return b};ha.grayscale=(a,b=.299,c=.587,d=.114,f=new ha)=>{a=ha.averageWeighted(a,b,c,d);ha.fromScalar(a,f);return f};var wa=(a,b,c)=>Math.max(b,Math.min(c,a)),Zb=a=>0>a?Math.ceil(a):Math.floor(a);let Db,Eb;var mb=(a,b,c)=>b>c?Math.max(c,Math.min(b,a)):c>b?Math.max(b,Math.min(c,a)):b,Ea=(a,b,c=Wa)=>Math.abs(a-
b)<=c;let vc=0,Qc=0,Rc=0,wc=0;var Sc=a=>{wc=0;Rc=a.length;for(let b=0;b<Rc;b++)wc+=a[b];return wc},$b=a=>a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375,ad=Object.freeze({__proto__:null,BackIn:a=>1===a?1:a*a*(2.70158*a-1.70158),BackOut:a=>0===a?0:--a*a*(2.70158*a+1.70158)+1,BackInOut:a=>{if(1>(a*=2))return.5*a*a*(3.5949095*a-2.5949095);a-=2;return.5*(a*a*(3.5949095*a+2.5949095)+2)},BounceIn:a=>1-$b(1-a),BounceInOut:a=>
.5>a?.5*(1-$b(1-2*a)):.5*$b(2*a-1)+.5,BounceOut:$b,CircularIn:a=>1-Math.sqrt(1-a*a),CircularInOut:a=>{if(1>(a*=2))return-.5*(Math.sqrt(1-a*a)-1);a-=2;return.5*(Math.sqrt(1-a*a)+1)},CircularOut:a=>Math.sqrt(1- --a*a),CubicIn:a=>a*a*a,CubicInOut:a=>{if(1>(a*=2))return.5*a*a*a;a-=2;return.5*(a*a*a+2)},CubicOut:a=>--a*a*a+1,ElasticIn:a=>0===a||1===a?a:-Math.pow(2,10*(a-1))*Math.sin(5*(a-1.1)*Math.PI),ElasticInOut:a=>{if(0===a||1===a)return a;a*=2;return 1>a?-.5*Math.pow(2,10*(a-1))*Math.sin(5*(a-1.1)*
Math.PI):.5*Math.pow(2,-10*(a-1))*Math.sin(5*(a-1.1)*Math.PI)+1},ElasticOut:a=>0===a||1===a?a:Math.pow(2,-10*a)*Math.sin(5*(a-.1)*Math.PI)+1,ExponentialIn:a=>0===a?0:Math.pow(1024,a-1),ExponentialInOut:a=>0===a||1===a?a:1>(a*=2)?.5*Math.pow(1024,a-1):.5*(-Math.pow(2,-10*(a-1))+2),ExponentialOut:a=>1===a?1:1-Math.pow(2,-10*a),Linear:a=>a,QuadraticIn:a=>a*a,QuadraticInOut:a=>1>(a*=2)?.5*a*a:-.5*(--a*(a-2)-1),QuadraticOut:a=>a*(2-a),QuarticIn:a=>a*a*a*a,QuarticInOut:a=>{if(1>(a*=2))return.5*a*a*a*a;
a-=2;return-.5*(a*a*a*a-2)},QuarticOut:a=>1- --a*a*a*a,QuinticIn:a=>a*a*a*a*a,QuinticInOut:a=>{if(1>(a*=2))return.5*a*a*a*a*a;a-=2;return.5*(a*a*a*a*a+2)},QuinticOut:a=>--a*a*a*a*a+1,SinusoidalIn:a=>1-Math.sin((1-a)*Math.PI/2),SinusoidalInOut:a=>.5*(1-Math.sin(Math.PI*(.5-a))),SinusoidalOut:a=>Math.sin(a*Math.PI/2)});m.EulerRotationOrders=void 0;(function(a){a.XYZ="xyz";a.ZXY="zxy";a.YZX="yzx";a.XZY="xzy";a.ZYX="zyx";a.YXZ="yxz"})(m.EulerRotationOrders||(m.EulerRotationOrders={}));class Qb extends Float32Array{constructor(a=
0,b=0,c=0,d=m.EulerRotationOrders.XYZ){super(3);this[0]=a;this[1]=b;this[2]=c;this.order=d}static clone(a){return new Qb(a.x,a.y,a.z,a.order)}static create(a=0,b=0,c=0,d=m.EulerRotationOrders.XYZ){return new Qb(a,b,c,d)}static fromMatrix4(a,b=new Qb){const c=a[0],d=a[4],f=a[8],p=a[1],h=a[5],ia=a[9],O=a[2],P=a[6];a=a[10];switch(b.order){case m.EulerRotationOrders.XYZ:b.y=Math.asin(wa(f,-1,1));.9999999>Math.abs(f)?(b.x=Math.atan2(-ia,a),b.z=Math.atan2(-d,c)):(b.x=Math.atan2(P,h),b.z=0);break;case m.EulerRotationOrders.YXZ:b.x=
Math.asin(-wa(ia,-1,1));.9999999>Math.abs(ia)?(b.y=Math.atan2(f,a),b.z=Math.atan2(p,h)):(b.y=Math.atan2(-O,c),b.z=0);break;case m.EulerRotationOrders.ZXY:b.x=Math.asin(wa(P,-1,1));.9999999>Math.abs(P)?(b.y=Math.atan2(-O,a),b.z=Math.atan2(-d,h)):(b.y=0,b.z=Math.atan2(p,c));break;case m.EulerRotationOrders.ZYX:b.y=Math.asin(-wa(O,-1,1));.9999999>Math.abs(O)?(b.x=Math.atan2(P,a),b.z=Math.atan2(p,c)):(b.x=0,b.z=Math.atan2(-d,h));break;case m.EulerRotationOrders.YZX:b.z=Math.asin(wa(p,-1,1));.9999999>
Math.abs(p)?(b.x=Math.atan2(-ia,h),b.y=Math.atan2(-O,c)):(b.x=0,b.y=Math.atan2(f,a));break;case m.EulerRotationOrders.XZY:b.z=Math.asin(-wa(d,-1,1)),.9999999>Math.abs(d)?(b.x=Math.atan2(P,h),b.y=Math.atan2(f,c)):(b.x=Math.atan2(-ia,a),b.y=0)}return b}get x(){return this[0]}set x(a){this[0]=a}get y(){return this[1]}set y(a){this[1]=a}get z(){return this[2]}set z(a){this[2]=a}}Qb.ORDERS=m.EulerRotationOrders;let Oa=0,Pa=0,Xa=0,Ya=0,Rb=0,Sb=0,Tb=0,Ub=0,nb=0,bb=0,cb=0;const xc=[1,0,0,1];class A extends Float32Array{constructor(a=
xc){super(a)}}A.UNIT_MATRIX2=new A(xc);A.add=(a,b,c)=>{c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];return c};A.adjoint=(a,b)=>{Oa=a[0];b[0]=a[3];b[1]=-a[1];b[2]=-a[2];b[3]=Oa;return b};A.clone=a=>new A(a);A.closeTo=(a,b)=>{Oa=a[0];Xa=a[1];Pa=a[2];Ya=a[3];Rb=b[0];Tb=b[1];Sb=b[2];Ub=b[3];return Ea(Oa,Rb)&&Ea(Pa,Sb)&&Ea(Xa,Tb)&&Ea(Ya,Ub)};A.create=(a=xc)=>new A(a);A.determinant=a=>a[0]*a[3]-a[1]*a[2];A.equals=(a,b)=>a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3];A.frobNorm=a=>Math.hypot(a[0],
a[1],a[2],a[3]);A.fromArray=(a,b=new A)=>{b.set(a);return b};A.fromRotation=(a,b=new A)=>{cb=Math.sin(a);bb=Math.cos(a);b[0]=bb;b[1]=cb;b[2]=-cb;b[3]=bb;return b};A.fromScaling=(a,b=new A)=>{b[0]=a[0];b[1]=0;b[2]=0;b[3]=a[1];return b};A.identity=(a=new A)=>{a[0]=1;a[1]=0;a[2]=0;a[3]=1;return a};A.invert=(a,b=new A)=>{Oa=a[0];Xa=a[1];Pa=a[2];Ya=a[3];nb=A.determinant(a);if(!nb)return null;nb=1/nb;b[0]=Ya*nb;b[1]=-Xa*nb;b[2]=-Pa*nb;b[3]=Oa*nb;return b};A.minus=(a,b,c=new A)=>{c[0]=a[0]-b[0];c[1]=a[1]-
b[1];c[2]=a[2]-b[2];c[3]=a[3]-b[3];return c};A.multiply=(a,b,c=new A)=>{Oa=a[0];Xa=a[1];Pa=a[2];Ya=a[3];Rb=b[0];Tb=b[1];Sb=b[2];Ub=b[3];c[0]=Oa*Rb+Pa*Tb;c[1]=Xa*Rb+Ya*Tb;c[2]=Oa*Sb+Pa*Ub;c[3]=Xa*Sb+Ya*Ub;return c};A.multiplyScalar=(a,b,c=new A)=>{c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;return c};A.rotate=(a,b,c=new A)=>{Oa=a[0];Xa=a[1];Pa=a[2];Ya=a[3];cb=Math.sin(b);bb=Math.cos(b);c[0]=Oa*bb+Pa*cb;c[1]=Xa*bb+Ya*cb;c[2]=Oa*-cb+Pa*bb;c[3]=Xa*-cb+Ya*bb;return c};A.scale=(a,b,c=new A)=>{Oa=a[0];
Xa=a[1];Pa=a[2];Ya=a[3];bb=b[0];cb=b[1];c[0]=Oa*bb;c[1]=Xa*bb;c[2]=Pa*cb;c[3]=Ya*cb;return c};A.toString=a=>`mat2(${a[0]}, ${a[1]}, ${a[2]}, ${a[3]})`;A.transpose=(a,b=new A)=>{b===a?(Pa=a[1],b[1]=a[2],b[2]=Pa):(b[0]=a[0],b[1]=a[2],b[2]=a[1],b[3]=a[3]);return b};let xa=0,oa=0,pa=0,ya=0,za=0,qa=0,Ga=0,Ha=0,Ia=0,ac=0,yb=0,bc=0,zb=0,cc=0,dc=0,ec=0,Ab=0,fc=0,Aa=0,Ba=0;const yc=[1,0,0,0,1,0,0,0,1];class v extends Float32Array{constructor(a=yc){super(a)}}v.UNIT_MATRIX3=new v(yc);v.clone=a=>new v(a);v.cofactor00=
a=>a[4]*a[8]-a[5]*a[7];v.cofactor01=a=>a[1]*a[8]-a[7]*a[2];v.cofactor02=a=>a[1]*a[5]-a[4]*a[2];v.cofactor10=a=>a[3]*a[8]-a[6]*a[5];v.cofactor11=a=>a[0]*a[8]-a[6]*a[2];v.cofactor12=a=>a[0]*a[5]-a[3]*a[2];v.cofactor20=a=>a[3]*a[7]-a[6]*a[4];v.cofactor21=a=>a[0]*a[7]-a[6]*a[1];v.cofactor22=a=>a[0]*a[4]-a[3]*a[1];v.create=()=>new v(yc);v.determinant=a=>{xa=a[0];oa=a[1];pa=a[2];za=a[3];ya=a[4];qa=a[5];Ga=a[6];Ha=a[7];Ia=a[8];return xa*(Ia*ya-qa*Ha)+oa*(-Ia*za+qa*Ga)+pa*(Ha*za-ya*Ga)};v.fromArray=(a,b=
new v)=>{b.set(a);return b};v.fromMatrix4=(a,b=new v)=>{b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[4];b[4]=a[5];b[5]=a[6];b[6]=a[8];b[7]=a[9];b[8]=a[10];return b};v.fromRotation=(a,b=new v)=>{Ba=Math.sin(a);Aa=Math.cos(a);b[0]=Aa;b[1]=Ba;b[2]=0;b[3]=-Ba;b[4]=Aa;b[5]=0;b[6]=0;b[7]=0;b[8]=1;return b};v.fromScaling=(a,b=new v)=>{b[0]=a[0];b[1]=0;b[2]=0;b[3]=0;b[4]=a[1];b[5]=0;b[6]=0;b[7]=0;b[8]=1;return b};v.fromTranslation=(a,b=new v)=>{b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=1;b[5]=0;b[6]=a[0];b[7]=a[1];b[8]=1;
return b};v.identity=(a=new v)=>{a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};v.invert=(a,b=new v)=>{xa=a[0];oa=a[1];pa=a[2];za=a[3];ya=a[4];qa=a[5];Ga=a[6];Ha=a[7];Ia=a[8];yb=Ia*ya-qa*Ha;zb=-Ia*za+qa*Ga;Ab=Ha*za-ya*Ga;a=xa*yb+oa*zb+pa*Ab;if(!a)return null;a=1/a;b[0]=yb*a;b[1]=(-Ia*oa+pa*Ha)*a;b[2]=(qa*oa-pa*ya)*a;b[3]=zb*a;b[4]=(Ia*xa-pa*Ga)*a;b[5]=(-qa*xa+pa*za)*a;b[6]=Ab*a;b[7]=(-Ha*xa+oa*Ga)*a;b[8]=(ya*xa-oa*za)*a;return b};v.multiply=()=>(a,b,c=new v)=>{xa=a[0];oa=
a[1];pa=a[2];za=a[3];ya=a[4];qa=a[5];Ga=a[6];Ha=a[7];Ia=a[8];ac=b[0];yb=b[1];bc=b[2];cc=b[3];zb=b[4];dc=b[5];ec=b[6];Ab=b[7];fc=b[8];c[0]=ac*xa+yb*za+bc*Ga;c[1]=ac*oa+yb*ya+bc*Ha;c[2]=ac*pa+yb*qa+bc*Ia;c[3]=cc*xa+zb*za+dc*Ga;c[4]=cc*oa+zb*ya+dc*Ha;c[5]=cc*pa+zb*qa+dc*Ia;c[6]=ec*xa+Ab*za+fc*Ga;c[7]=ec*oa+Ab*ya+fc*Ha;c[8]=ec*pa+Ab*qa+fc*Ia;return c};v.rotate=(a,b,c=new v)=>{xa=a[0];oa=a[1];pa=a[2];za=a[3];ya=a[4];qa=a[5];Ga=a[6];Ha=a[7];Ia=a[8];Ba=Math.sin(b);Aa=Math.cos(b);c[0]=Aa*xa+Ba*za;c[1]=Aa*
oa+Ba*ya;c[2]=Aa*pa+Ba*qa;c[3]=Ba*za-Aa*xa;c[4]=Ba*ya-Aa*oa;c[5]=Ba*qa-Aa*pa;c[6]=Ga;c[7]=Ha;c[8]=Ia;return c};v.scale=(a,b,c=new v)=>{Aa=b[0];Ba=b[1];c[0]=Aa*a[0];c[1]=Aa*a[1];c[2]=Aa*a[2];c[3]=Ba*a[3];c[4]=Ba*a[4];c[5]=Ba*a[5];c[6]=a[6];c[7]=a[7];c[8]=a[8];return c};v.translate=(a,b,c=new v)=>{xa=a[0];oa=a[1];pa=a[2];za=a[3];ya=a[4];qa=a[5];Ga=a[6];Ha=a[7];Ia=a[8];Aa=b[0];Ba=b[1];c[0]=xa;c[1]=oa;c[2]=pa;c[3]=za;c[4]=ya;c[5]=qa;c[6]=Aa*xa+Ba*za+Ga;c[7]=Aa*oa+Ba*ya+Ha;c[8]=Aa*pa+Ba*qa+Ia;return c};
v.transpose=(a,b=new v)=>{b===a?(oa=a[1],pa=a[2],qa=a[5],b[1]=a[3],b[2]=a[6],b[3]=oa,b[5]=a[7],b[6]=pa,b[7]=qa):(b[0]=a[0],b[1]=a[3],b[2]=a[6],b[3]=a[1],b[4]=a[4],b[5]=a[7],b[6]=a[2],b[7]=a[5],b[8]=a[8]);return b};let Q,Z,aa,Ja,Za,$a,Qa,zc;class e extends Float32Array{constructor(a=0,b=0,c=0){super(3);this[0]=a;this[1]=b;this[2]=c}get x(){return this[0]}set x(a){this[0]=a}get y(){return this[1]}set y(a){this[1]=a}get z(){return this[2]}set z(a){this[2]=a}}e.VECTOR3_ZERO=new Float32Array([0,0,0]);
e.VECTOR3_ONE=new Float32Array([1,1,1]);e.VECTOR3_TOP=new Float32Array([0,1,0]);e.VECTOR3_BOTTOM=new Float32Array([0,-1,0]);e.VECTOR3_LEFT=new Float32Array([-1,0,0]);e.VECTOR3_RIGHT=new Float32Array([1,0,0]);e.VECTOR3_FRONT=new Float32Array([0,0,-1]);e.VECTOR3_BACK=new Float32Array([0,0,1]);e.add=(a,b,c=new e)=>{c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];return c};e.addScalar=(a,b,c=new e)=>{c[0]=a[0]+b;c[1]=a[1]+b;c[2]=a[2]+b;return c};e.angle=(a,b)=>{Q=a[0];Z=a[1];aa=a[2];Ja=b[0];Za=b[1];$a=b[2];
const c=Math.sqrt(Q*Q+Z*Z+aa*aa)*Math.sqrt(Ja*Ja+Za*Za+$a*$a);a=c&&e.dot(a,b)/c;return Math.acos(wa(a,-1,1))};e.clamp=(a,b,c,d=new e)=>{d[0]=wa(a[0],b[0],c[0]);d[1]=wa(a[1],b[1],c[1]);d[2]=wa(a[2],b[2],c[2]);return d};e.clampSafe=(a,b,c,d=new e)=>{d[0]=mb(a[0],b[0],c[0]);d[1]=mb(a[1],b[1],c[1]);d[1]=mb(a[2],b[2],c[2]);return d};e.clampScalar=(a,b,c,d=new e)=>{d[0]=wa(a[0],b,c);d[1]=wa(a[1],b,c);d[2]=wa(a[2],b,c);return d};e.clone=(a,b=new e)=>{b[0]=a[0];b[1]=a[1];b[2]=a[2];return b};e.closeTo=(a,
b)=>Ea(a[0],b[0])&&Ea(a[1],b[1])&&Ea(a[2],b[2]);e.create=(a=0,b=0,c=0,d=new e)=>{d[0]=a;d[1]=b;d[2]=c;return d};e.cross=(a,b,c=new e)=>{Q=a[0];Z=a[1];aa=a[2];Ja=b[0];Za=b[1];$a=b[2];c[0]=Z*$a-aa*Za;c[1]=aa*Ja-Q*$a;c[2]=Q*Za-Z*Ja;return c};e.distanceTo=(a,b)=>{Q=b[0]-a[0];Z=b[1]-a[1];aa=b[2]-a[2];return Math.hypot(Q,Z,aa)};e.distanceToManhattan=(a,b)=>Math.abs(a[0]-b[0])+Math.abs(a[1]-b[1])+Math.abs(a[2]-b[2]);e.distanceToSquared=(a,b)=>{Q=a[0]-b[0];Z=a[1]-b[1];aa=a[2]-b[2];return Q*Q+Z*Z+aa*aa};e.divide=
(a,b,c=new e)=>{c[0]=a[0]/b[0];c[1]=a[1]/b[1];c[2]=a[2]/b[2];return c};e.divideScalar=(a,b,c=new e)=>{c[0]=a[0]/b;c[1]=a[1]/b;c[2]=a[2]/b;return c};e.dot=(a,b)=>a[0]*b[0]+a[1]*b[1]+a[2]*b[2];e.equals=(a,b)=>a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2];e.fromArray=(a,b=0,c=new e)=>{c[0]=a[b];c[1]=a[b+1];c[2]=a[b+2];return c};e.fromScalar=(a,b=new e(3))=>{b[0]=b[1]=b[2]=a;return b};e.fromValues=(a,b,c,d=new e(3))=>{d[0]=a;d[1]=b;d[2]=c;return d};e.hermite=(a,b,c,d,f,p=new e)=>{Qa=f*f;const h=Qa*(2*f-3)+1,
ia=Qa*(f-2)+f,O=Qa*(f-1);f=Qa*(3-2*f);p[0]=a[0]*h+b[0]*ia+c[0]*O+d[0]*f;p[1]=a[1]*h+b[1]*ia+c[1]*O+d[1]*f;p[2]=a[2]*h+b[2]*ia+c[2]*O+d[2]*f;return p};e.inverse=(a,b=new e)=>{b[0]=1/a[0];b[1]=1/a[1];b[2]=1/a[2];return b};e.norm=a=>Math.sqrt(e.lengthSquared(a));e.lengthManhattan=a=>Math.abs(a[0])+Math.abs(a[1])+Math.abs(a[2]);e.lengthSquared=a=>a[0]*a[0]+a[1]*a[1]+a[2]*a[2];e.lerp=(a,b,c,d=new e)=>{d[0]+=(b[0]-a[0])*c;d[1]+=(b[1]-a[1])*c;d[2]+=(b[2]-a[2])*c;return d};e.max=(a,b,c=new e)=>{c[0]=Math.max(a[0],
b[0]);c[1]=Math.max(a[1],b[1]);c[2]=Math.max(a[2],b[2]);return c};e.min=(a,b,c=new e)=>{c[0]=Math.min(a[0],b[0]);c[1]=Math.min(a[1],b[1]);c[2]=Math.min(a[2],b[2]);return c};e.minus=(a,b,c=new e)=>{c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];return c};e.minusScalar=(a,b,c=new e)=>{c[0]=a[0]-b;c[1]=a[1]-b;c[2]=a[2]-b;return c};e.multiply=(a,b,c=new e)=>{c[0]=a[0]*b[0];c[1]=a[1]*b[1];c[2]=a[2]*b[2];return c};e.multiplyScalar=(a,b,c=new e)=>{c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;return c};e.negate=(a,
b=new e)=>{b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];return b};e.normalize=(a,b=new e)=>e.divideScalar(a,e.norm(a)||1,b);e.rotateX=(a,b,c,d=new e)=>{Q=a[0]-b[0];Z=a[1]-b[1];aa=a[2]-b[2];Ja=Q;Za=Z*Math.cos(c)-aa*Math.sin(c);$a=Z*Math.sin(c)+aa*Math.cos(c);d[0]=Ja+b[0];d[1]=Za+b[1];d[2]=$a+b[2];return d};e.rotateY=(a,b,c,d=new e)=>{Q=a[0]-b[0];Z=a[1]-b[1];aa=a[2]-b[2];Ja=aa*Math.sin(c)+Q*Math.cos(c);Za=Z;$a=aa*Math.cos(c)-Q*Math.sin(c);d[0]=Ja+b[0];d[1]=Za+b[1];d[2]=$a+b[2];return d};e.rotateZ=(a,b,c,d=new e)=>
{Q=a[0]-b[0];Z=a[1]-b[1];aa=a[2]-b[2];Ja=Q*Math.cos(c)-Z*Math.sin(c);Za=Q*Math.sin(c)+Z*Math.cos(c);$a=aa;d[0]=Ja+b[0];d[1]=Za+b[1];d[2]=$a+b[2];return d};e.round=(a,b=new e)=>{b[0]=Math.round(a[0]);b[1]=Math.round(a[1]);b[2]=Math.round(a[2]);return b};e.set=(a=0,b=0,c=0,d=new e)=>{d[0]=a;d[1]=b;d[2]=c;return d};e.setNorm=(a,b,c=new e)=>e.multiplyScalar(e.normalize(a,c),b,c);e.slerp=(a,b,c,d=new e)=>{Qa=Math.acos(Math.min(Math.max(e.dot(a,b),-1),1));zc=Math.sin(Qa);Q=Math.sin((1-c)*Qa)/zc;Ja=Math.sin(c*
Qa)/zc;d[0]=Q*a[0]+Ja*b[0];d[1]=Q*a[1]+Ja*b[1];d[2]=Q*a[2]+Ja*b[2];return d};e.toString=a=>`(${a[0]}, ${a[1]}, ${a[2]})`;e.transformMatrix3=(a,b,c=new e)=>{Q=a[0];Z=a[1];aa=a[2];c[0]=Q*b[0]+Z*b[3]+aa*b[6];c[1]=Q*b[1]+Z*b[4]+aa*b[7];c[2]=Q*b[2]+Z*b[5]+aa*b[8];return c};e.transformMatrix4=(a,b,c=new e)=>{Q=a[0];Z=a[1];aa=a[2];Qa=(Qa=b[3]*Q+b[7]*Z+b[11]*aa+b[15])||1;c[0]=(b[0]*Q+b[4]*Z+b[8]*aa+b[12])/Qa;c[1]=(b[1]*Q+b[5]*Z+b[9]*aa+b[13])/Qa;c[2]=(b[2]*Q+b[6]*Z+b[10]*aa+b[14])/Qa;return c};e.transformQuat=
(a,b,c=new e)=>{const d=b[0],f=b[1],p=b[2],h=a[0],ia=a[1];a=a[2];let O=f*a-p*ia,P=p*h-d*a,V=d*ia-f*h;b=2*b[3];c[0]=h+O*b+2*(f*V-p*P);c[1]=ia+P*b+2*(p*O-d*V);c[2]=a+V*b+2*(d*P-f*O);return c};let E=0,B=0,C=0,F=0,G=0,H=0,D=0,I=0,J=0,K=0,L=0,M=0,ra=0,sa=0,ta=0,Ca=0,r=0,t=0,u=0,W=0,ob=0,pb=0,Bb=0,Tc=0,Ua=0,Va=0,db=0,Fb=0,Gb=0,Hb=0,Ib=0,Jb=0,w=0,x=0,y=0,ua=0,Ra=0,n=0,va=0,N=0,X=0,k=0,ma=0,na=0,Y=0;const Ac=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];class l extends Float32Array{constructor(a=Ac){super(a)}}l.UNIT_MATRIX4=
new l(Ac);l.clone=a=>new l(a);l.create=()=>new l(Ac);l.determinant=a=>{E=a[0];B=a[1];C=a[2];F=a[3];H=a[4];G=a[5];D=a[6];I=a[7];J=a[8];K=a[9];L=a[10];M=a[11];sa=a[12];ra=a[13];ta=a[14];Ca=a[15];r=E*G-B*H;t=E*D-C*H;u=B*D-C*G;W=J*ra-K*sa;pb=J*ta-L*sa;ob=K*ta-L*ra;Bb=E*ob-B*pb+C*W;Tc=H*ob-G*pb+D*W;Ua=J*u-K*t+L*r;Va=sa*u-ra*t+ta*r;return I*Bb-F*Tc+Ca*Ua-M*Va};l.fromArray=(a,b=new l)=>{b.set(a);return b};l.fromEuler=(a,b=new l)=>{w=a.x;x=a.y;y=a.z;N=Math.cos(w);X=Math.sin(w);k=Math.cos(x);ma=Math.sin(x);
na=Math.cos(y);Y=Math.sin(y);if(a.order===m.EulerRotationOrders.XYZ){a=N*na;var c=N*Y,d=X*na,f=X*Y;b[0]=k*na;b[4]=-k*Y;b[8]=ma;b[1]=c+d*ma;b[5]=a-f*ma;b[9]=-X*k;b[2]=f-a*ma;b[6]=d+c*ma;b[10]=N*k}else a.order===m.EulerRotationOrders.YXZ?(a=k*na,c=k*Y,d=ma*na,f=ma*Y,b[0]=a+f*X,b[4]=d*X-c,b[8]=N*ma,b[1]=N*Y,b[5]=N*na,b[9]=-X,b[2]=c*X-d,b[6]=f+a*X,b[10]=N*k):a.order===m.EulerRotationOrders.ZXY?(a=k*na,c=k*Y,d=ma*na,f=ma*Y,b[0]=a-f*X,b[4]=-N*Y,b[8]=d+c*X,b[1]=c+d*X,b[5]=N*na,b[9]=f-a*X,b[2]=-N*ma,b[6]=
X,b[10]=N*k):a.order===m.EulerRotationOrders.ZYX?(a=N*na,c=N*Y,d=X*na,f=X*Y,b[0]=k*na,b[4]=d*ma-c,b[8]=a*ma+f,b[1]=k*Y,b[5]=f*ma+a,b[9]=c*ma-d,b[2]=-ma,b[6]=X*k,b[10]=N*k):a.order===m.EulerRotationOrders.YZX?(a=N*k,c=N*ma,d=X*k,f=X*ma,b[0]=k*na,b[4]=f-a*Y,b[8]=d*Y+c,b[1]=Y,b[5]=N*na,b[9]=-X*na,b[2]=-ma*na,b[6]=c*Y+d,b[10]=a-f*Y):a.order===m.EulerRotationOrders.XZY&&(a=N*k,c=N*ma,d=X*k,f=X*ma,b[0]=k*na,b[4]=-Y,b[8]=ma*na,b[1]=a*Y+f,b[5]=N*na,b[9]=c*Y-d,b[2]=d*Y-c,b[6]=X*na,b[10]=f*Y+a);b[3]=0;b[7]=
0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};l.fromQuaternion=(a,b=new l)=>{var c=a[0],d=a[1],f=a[2];a=a[3];var p=c+c,h=d+d;const ia=f+f;c*=p;const O=d*p;d*=h;const P=f*p,V=f*h;f*=ia;p*=a;h*=a;a*=ia;b[0]=1-d-f;b[1]=O+a;b[2]=P-h;b[3]=0;b[4]=O-a;b[5]=1-c-f;b[6]=V+p;b[7]=0;b[8]=P+h;b[9]=V-p;b[10]=1-c-d;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};l.fromRotation=(a,b,c=new l)=>{w=b[0];x=b[1];y=b[2];Ra=Math.hypot(w,x,y);if(Ra<Wa)return null;Ra=1/Ra;w*=Ra;x*=Ra;y*=Ra;n=Math.sin(a);k=Math.cos(a);
va=1-k;c[0]=w*w*va+k;c[1]=x*w*va+y*n;c[2]=y*w*va-x*n;c[3]=0;c[4]=w*x*va-y*n;c[5]=x*x*va+k;c[6]=y*x*va+w*n;c[7]=0;c[8]=w*y*va+x*n;c[9]=x*y*va-w*n;c[10]=y*y*va+k;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c};l.fromRotationX=(a,b=new l)=>{n=Math.sin(a);k=Math.cos(a);b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=k;b[6]=n;b[7]=0;b[8]=0;b[9]=-n;b[10]=k;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};l.fromRotationY=(a,b=new l)=>{n=Math.sin(a);k=Math.cos(a);b[0]=k;b[1]=0;b[2]=-n;b[3]=0;b[4]=0;b[5]=1;b[6]=
0;b[7]=0;b[8]=n;b[9]=0;b[10]=k;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};l.fromRotationZ=(a,b=new l)=>{n=Math.sin(a);k=Math.cos(a);b[0]=k;b[1]=n;b[2]=0;b[3]=0;b[4]=-n;b[5]=k;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};l.fromScaling=(a,b=new l)=>{b[0]=a[0];b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=a[1];b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=a[2];b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};l.fromTranslation=(a,b=new l)=>{b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=
1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=a[0];b[13]=a[1];b[14]=a[2];b[15]=1;return b};l.identity=(a=new l)=>{a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};l.invert=(a,b=new l)=>{E=a[0];B=a[1];C=a[2];F=a[3];H=a[4];G=a[5];D=a[6];I=a[7];J=a[8];K=a[9];L=a[10];M=a[11];sa=a[12];ra=a[13];ta=a[14];Ca=a[15];r=E*G-B*H;t=E*D-C*H;u=E*I-F*H;W=B*D-C*G;Ua=B*I-F*G;Va=C*I-F*D;db=J*ra-K*sa;Fb=J*ta-L*sa;Hb=J*Ca-M*sa;Gb=K*ta-
L*ra;Ib=K*Ca-M*ra;Jb=L*Ca-M*ta;ua=r*Jb-t*Ib+u*Gb+W*Hb-Ua*Fb+Va*db;if(!ua)return null;ua=1/ua;b[0]=(G*Jb-D*Ib+I*Gb)*ua;b[1]=(C*Ib-B*Jb-F*Gb)*ua;b[2]=(ra*Va-ta*Ua+Ca*W)*ua;b[3]=(L*Ua-K*Va-M*W)*ua;b[4]=(D*Hb-H*Jb-I*Fb)*ua;b[5]=(E*Jb-C*Hb+F*Fb)*ua;b[6]=(ta*u-sa*Va-Ca*t)*ua;b[7]=(J*Va-L*u+M*t)*ua;b[8]=(H*Ib-G*Hb+I*db)*ua;b[9]=(B*Hb-E*Ib-F*db)*ua;b[10]=(sa*Ua-ra*u+Ca*r)*ua;b[11]=(K*u-J*Ua-M*r)*ua;b[12]=(G*Fb-H*Gb-D*db)*ua;b[13]=(E*Gb-B*Fb+C*db)*ua;b[14]=(ra*t-sa*W-ta*r)*ua;b[15]=(J*W-K*t+L*r)*ua;return b};
l.lookAt=(a,b,c=e.VECTOR3_TOP,d=new l)=>{let f,p;let h;const ia=a[0],O=a[1];a=a[2];var P=c[0];var V=c[1];var Fa=c[2];var eb=b[0];c=b[1];var hb=b[2];if(Ea(ia,eb)&&Ea(O,c)&&Ea(a,hb))return l.identity(d);b=ia-eb;c=O-c;eb=a-hb;h=1/Math.hypot(b,c,eb);b*=h;c*=h;eb*=h;hb=V*eb-Fa*c;Fa=Fa*b-P*eb;P=P*c-V*b;(h=Math.hypot(hb,Fa,P))?(h=1/h,hb*=h,Fa*=h,P*=h):P=Fa=hb=0;V=c*P-eb*Fa;f=eb*hb-b*P;p=b*Fa-c*hb;(h=Math.hypot(V,f,p))?(h=1/h,V*=h,f*=h,p*=h):p=f=V=0;d[0]=hb;d[1]=V;d[2]=b;d[3]=0;d[4]=Fa;d[5]=f;d[6]=c;d[7]=
0;d[8]=P;d[9]=p;d[10]=eb;d[11]=0;d[12]=-(hb*ia+Fa*O+P*a);d[13]=-(V*ia+f*O+p*a);d[14]=-(b*ia+c*O+eb*a);d[15]=1;return d};l.multiply=(a,b,c=new l)=>{E=a[0];B=a[1];C=a[2];F=a[3];H=a[4];G=a[5];D=a[6];I=a[7];J=a[8];K=a[9];L=a[10];M=a[11];sa=a[12];ra=a[13];ta=a[14];Ca=a[15];r=b[0];t=b[1];u=b[2];W=b[3];c[0]=r*E+t*H+u*J+W*sa;c[1]=r*B+t*G+u*K+W*ra;c[2]=r*C+t*D+u*L+W*ta;c[3]=r*F+t*I+u*M+W*Ca;r=b[4];t=b[5];u=b[6];W=b[7];c[4]=r*E+t*H+u*J+W*sa;c[5]=r*B+t*G+u*K+W*ra;c[6]=r*C+t*D+u*L+W*ta;c[7]=r*F+t*I+u*M+W*Ca;
r=b[8];t=b[9];u=b[10];W=b[11];c[8]=r*E+t*H+u*J+W*sa;c[9]=r*B+t*G+u*K+W*ra;c[10]=r*C+t*D+u*L+W*ta;c[11]=r*F+t*I+u*M+W*Ca;r=b[12];t=b[13];u=b[14];W=b[15];c[12]=r*E+t*H+u*J+W*sa;c[13]=r*B+t*G+u*K+W*ra;c[14]=r*C+t*D+u*L+W*ta;c[15]=r*F+t*I+u*M+W*Ca;return c};l.multiplyScaleMatrix=(a,b,c=new l)=>{E=a[0];B=a[1];C=a[2];F=a[3];H=a[4];G=a[5];D=a[6];I=a[7];J=a[8];K=a[9];L=a[10];M=a[11];sa=a[12];ra=a[13];ta=a[14];Ca=a[15];r=b[0];c[0]=r*E;c[1]=r*B;c[2]=r*C;c[3]=r*F;t=b[5];c[4]=t*H;c[5]=t*G;c[6]=t*D;c[7]=t*I;u=
b[10];c[8]=u*J;c[9]=u*K;c[10]=u*L;c[11]=u*M;c[12]=sa;c[13]=ra;c[14]=ta;c[15]=Ca;return c};l.multiplyTranslateMatrix=(a,b,c=new l)=>{E=a[0];B=a[1];C=a[2];F=a[3];H=a[4];G=a[5];D=a[6];I=a[7];J=a[8];K=a[9];L=a[10];M=a[11];sa=a[12];ra=a[13];ta=a[14];Ca=a[15];c[0]=E;c[1]=B;c[2]=C;c[3]=F;c[4]=H;c[5]=G;c[6]=D;c[7]=I;c[8]=J;c[9]=K;c[10]=L;c[11]=M;r=b[12];t=b[13];u=b[14];c[12]=r*E+t*H+u*J+sa;c[13]=r*B+t*G+u*K+ra;c[14]=r*C+t*D+u*L+ta;c[15]=r*F+t*I+u*M+Ca;return c};l.orthogonal=(a,b,c,d,f,p,h=new l)=>{k=1/(a-
b);X=1/(c-d);N=1/(f-p);h[0]=-2*k;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=-2*X;h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[10]=2*N;h[11]=0;h[12]=(a+b)*k;h[13]=(d+c)*X;h[14]=(p+f)*N;h[15]=1;return h};l.orthogonalZ0=(a,b,c,d,f,p,h=new l)=>{k=1/(a-b);X=1/(c-d);N=1/(f-p);h[0]=-2*k;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=-2*X;h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[10]=N;h[11]=0;h[12]=(a+b)*k;h[13]=(d+c)*X;h[14]=f*N;h[15]=1;return h};l.perspective=(a,b,c,d,f=new l)=>{Y=1/Math.tan(a/2);f[0]=Y/b;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=Y;f[6]=0;f[7]=
0;f[8]=0;f[9]=0;f[11]=-1;f[12]=0;f[13]=0;f[15]=0;null!==d&&Infinity!==d?(N=1/(c-d),f[10]=(d+c)*N,f[14]=2*d*c*N):(f[10]=-1,f[14]=-2*c);return f};l.perspectiveZ0=(a,b,c,d,f=new l)=>{Y=1/Math.tan(a/2);f[0]=Y/b;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=Y;f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[11]=-1;f[12]=0;f[13]=0;f[15]=0;null!==d&&Infinity!==d?(N=1/(c-d),f[10]=d*N,f[14]=d*c*N):(f[10]=-1,f[14]=-c);return f};l.rotate=(a,b,c,d=new l)=>{w=c[0];x=c[1];y=c[2];Ra=Math.hypot(w,x,y);if(Ra<Wa)return null;Ra=1/Ra;w*=Ra;x*=Ra;y*=
Ra;n=Math.sin(b);k=Math.cos(b);va=1-k;E=a[0];B=a[1];C=a[2];F=a[3];H=a[4];G=a[5];D=a[6];I=a[7];J=a[8];K=a[9];L=a[10];M=a[11];r=w*w*va+k;t=x*w*va+y*n;u=y*w*va-x*n;pb=w*x*va-y*n;ob=x*x*va+k;Bb=y*x*va+w*n;Ua=w*y*va+x*n;Va=x*y*va-w*n;db=y*y*va+k;d[0]=E*r+H*t+J*u;d[1]=B*r+G*t+K*u;d[2]=C*r+D*t+L*u;d[3]=F*r+I*t+M*u;d[4]=E*pb+H*ob+J*Bb;d[5]=B*pb+G*ob+K*Bb;d[6]=C*pb+D*ob+L*Bb;d[7]=F*pb+I*ob+M*Bb;d[8]=E*Ua+H*Va+J*db;d[9]=B*Ua+G*Va+K*db;d[10]=C*Ua+D*Va+L*db;d[11]=F*Ua+I*Va+M*db;a!==d&&(d[12]=a[12],d[13]=a[13],
d[14]=a[14],d[15]=a[15]);return d};l.rotateX=(a,b,c=new l)=>{n=Math.sin(b);k=Math.cos(b);H=a[4];G=a[5];D=a[6];I=a[7];J=a[8];K=a[9];L=a[10];M=a[11];a!==c&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]);c[4]=H*k+J*n;c[5]=G*k+K*n;c[6]=D*k+L*n;c[7]=I*k+M*n;c[8]=J*k-H*n;c[9]=K*k-G*n;c[10]=L*k-D*n;c[11]=M*k-I*n;return c};l.rotateY=(a,b,c=new l)=>{n=Math.sin(b);k=Math.cos(b);E=a[0];B=a[1];C=a[2];F=a[3];J=a[8];K=a[9];L=a[10];M=a[11];a!==c&&(c[4]=a[4],c[5]=a[5],c[6]=
a[6],c[7]=a[7],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]);c[0]=E*k-J*n;c[1]=B*k-K*n;c[2]=C*k-L*n;c[3]=F*k-M*n;c[8]=E*n+J*k;c[9]=B*n+K*k;c[10]=C*n+L*k;c[11]=F*n+M*k;return c};l.rotateZ=(a,b,c=new l)=>{n=Math.sin(b);k=Math.cos(b);E=a[0];B=a[1];C=a[2];F=a[3];H=a[4];G=a[5];D=a[6];I=a[7];a!==c&&(c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]);c[0]=E*k+H*n;c[1]=B*k+G*n;c[2]=C*k+D*n;c[3]=F*k+I*n;c[4]=H*k-E*n;c[5]=G*k-B*n;c[6]=D*k-C*n;c[7]=I*k-F*n;return c};
l.scale=(a,b,c=new l)=>{w=b[0];x=b[1];y=b[2];c[0]=a[0]*w;c[1]=a[1]*w;c[2]=a[2]*w;c[3]=a[3]*w;c[4]=a[4]*x;c[5]=a[5]*x;c[6]=a[6]*x;c[7]=a[7]*x;c[8]=a[8]*y;c[9]=a[9]*y;c[10]=a[10]*y;c[11]=a[11]*y;c!==a&&(c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]);return c};l.targetTo=(a,b,c=e.VECTOR3_TOP,d=new l)=>{const f=a[0],p=a[1];a=a[2];var h=c[0];const ia=c[1];var O=c[2];c=f-b[0];let P=p-b[1];b=a-b[2];let V=c*c+P*P+b*b;0<V&&(V=1/Math.sqrt(V),c*=V,P*=V,b*=V);let Fa=ia*b-O*P;O=O*c-h*b;h=h*P-ia*c;V=Fa*Fa+O*
O+h*h;0<V&&(V=1/Math.sqrt(V),Fa*=V,O*=V,h*=V);d[0]=Fa;d[1]=O;d[2]=h;d[3]=0;d[4]=P*h-b*O;d[5]=b*Fa-c*h;d[6]=c*O-P*Fa;d[7]=0;d[8]=c;d[9]=P;d[10]=b;d[11]=0;d[12]=f;d[13]=p;d[14]=a;d[15]=1;return d};l.translate=(a,b,c=new l)=>{w=b[0];x=b[1];y=b[2];a===c?(c[12]=a[0]*w+a[4]*x+a[8]*y+a[12],c[13]=a[1]*w+a[5]*x+a[9]*y+a[13],c[14]=a[2]*w+a[6]*x+a[10]*y+a[14],c[15]=a[3]*w+a[7]*x+a[11]*y+a[15]):(E=a[0],B=a[1],C=a[2],F=a[3],H=a[4],G=a[5],D=a[6],I=a[7],J=a[8],K=a[9],L=a[10],M=a[11],c[0]=E,c[1]=B,c[2]=C,c[3]=F,
c[4]=H,c[5]=G,c[6]=D,c[7]=I,c[8]=J,c[9]=K,c[10]=L,c[11]=M,c[12]=E*w+H*x+J*y+a[12],c[13]=B*w+G*x+K*y+a[13],c[14]=C*w+D*x+L*y+a[14],c[15]=F*w+I*x+M*y+a[15]);return c};l.transpose=(a,b=new l)=>{b===a?(B=a[1],C=a[2],F=a[3],D=a[6],I=a[7],M=a[11],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=B,b[6]=a[9],b[7]=a[13],b[8]=C,b[9]=D,b[11]=a[14],b[12]=F,b[13]=I,b[14]=M):(b[0]=a[0],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=a[1],b[5]=a[5],b[6]=a[9],b[7]=a[13],b[8]=a[2],b[9]=a[6],b[10]=a[10],b[11]=a[14],b[12]=a[3],b[13]=a[7],b[14]=
a[11],b[15]=a[15]);return b};let gc,hc;class Uc{constructor(a=0,b=0){this.r=a;this.a=b}static create(a=0,b=0){return new Uc(a,b)}distanceTo(a){return Math.sqrt(this.distanceToSquared(a))}distanceToManhattan({r:a,a:b}){return Math.cos(b)*a-this.x()+Math.sin(b)*a-this.y()}distanceToSquared({r:a,a:b}){return this.r*this.r+a*a-2*a*this.r*Math.cos(b-this.a)}fromVector2(a){gc=a[0];hc=a[1];this.r=Math.sqrt(gc*gc+hc*hc);this.a=Math.atan2(hc,gc);return this}lengthManhattan(){return(Math.cos(this.a)+Math.sin(this.a))*
this.r}set(a=0,b=0){this.r=a;this.a=b;return this}setA(a=0){this.a=a;return this}setR(a=0){this.r=a;return this}toJson(a={a:0,r:0}){a.r=this.r;a.a=this.a;return a}toString(){return`(${this.r}, ${this.a})`}toVector2Json(a){a[0]=this.x();a[1]=this.y();return a}x(){return Math.cos(this.a)*this.r}y(){return Math.sin(this.a)*this.r}}let R,S,T,ba,Ka,La,Ma,ja,Na=0,Sa=0,Bc=0,kb=0,ic=0,qb=0,Kb=0,Lb=0;const ib=new Float32Array(3);class z extends Float32Array{constructor(a=0,b=0,c=0,d=0){super(4);this[0]=a;
this[1]=b;this[2]=c;this[3]=d}get x(){return this[0]}set x(a){this[0]=a}get y(){return this[1]}set y(a){this[1]=a}get z(){return this[2]}set z(a){this[2]=a}get w(){return this[3]}set w(a){this[3]=a}}z.angleTo=(a,b)=>{kb=z.dot(a,b);return Math.acos(2*kb*kb-1)};z.conjugate=(a,b=new z)=>{b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=a[3];return b};z.create=(a=0,b=0,c=0,d=1,f=new z)=>{f[0]=a;f[1]=b;f[2]=c;f[3]=d;return f};z.dot=(a,b)=>a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3];z.fromAxisAngle=(a,b,c=new z)=>{b*=
.5;Na=Math.sin(b);c[0]=Na*a[0];c[1]=Na*a[1];c[2]=Na*a[2];c[3]=Math.cos(b);return c};z.fromMatrix3=(a,b=new z)=>{var c=a[0]+a[4]+a[8];if(0<c)c=Math.sqrt(c+1),b[3]=.5*c,c=.5/c,b[0]=(a[5]-a[7])*c,b[1]=(a[6]-a[2])*c,b[2]=(a[1]-a[3])*c;else{let d=0;a[4]>a[0]&&(d=1);a[8]>a[3*d+d]&&(d=2);const f=(d+1)%3,p=(d+2)%3;c=Math.sqrt(a[3*d+d]-a[3*f+f]-a[3*p+p]+1);b[d]=.5*c;c=.5/c;b[3]=(a[3*f+p]-a[3*p+f])*c;b[f]=(a[3*f+d]+a[3*d+f])*c;b[p]=(a[3*p+d]+a[3*d+p])*c}return b};z.identity=(a=new z)=>{a[0]=0;a[1]=0;a[2]=0;
a[3]=1;return a};z.invert=(a,b=new z)=>{R=a[0];S=a[1];T=a[2];ba=a[3];(kb=R*R+S*S+T*T+ba*ba)?(Sa=1/kb,b[0]=-R*Sa,b[1]=-S*Sa,b[2]=-T*Sa,b[3]=ba*Sa):(b[0]=0,b[1]=0,b[2]=0,b[3]=0);return b};z.lerp=(a,b,c,d=new z)=>{R=a[0];S=a[1];T=a[2];ba=a[3];d[0]=R+c*(b[0]-R);d[1]=S+c*(b[1]-S);d[2]=T+c*(b[2]-T);d[3]=ba+c*(b[3]-ba);return d};z.multiply=(a,b,c=new z)=>{R=a[0];S=a[1];T=a[2];ba=a[3];Ka=b[0];La=b[1];Ma=b[2];ja=b[3];c[0]=R*ja+ba*Ka+S*Ma-T*La;c[1]=S*ja+ba*La+T*Ka-R*Ma;c[2]=T*ja+ba*Ma+R*La-S*Ka;c[3]=ba*ja-
R*Ka-S*La-T*Ma;return c};z.normalize=(a,b=new z)=>{R=a[0];S=a[1];T=a[2];ba=a[3];qb=R*R+S*S+T*T+ba*ba;0<qb&&(qb=1/Math.sqrt(qb));b[0]=R*qb;b[1]=S*qb;b[2]=T*qb;b[3]=ba*qb;return b};z.random=(a=new z)=>{R=Math.random();S=Math.random();T=Math.random();Sa=Math.sqrt(1-R);Na=Math.sqrt(R);a[0]=Sa*Math.sin(2*Math.PI*S);a[1]=Sa*Math.cos(2*Math.PI*S);a[2]=Na*Math.sin(2*Math.PI*T);a[3]=Na*Math.cos(2*Math.PI*T);return a};z.rotationTo=(a,b,c=new z)=>{kb=e.dot(a,b);if(kb<-1+Wa)return e.cross(e.VECTOR3_LEFT,a,ib),
e.norm(ib)<Wa&&e.cross(e.VECTOR3_TOP,a,ib),e.normalize(ib,ib),z.fromAxisAngle(ib,Math.PI,c),c;if(kb>1-Wa)return c[0]=0,c[1]=0,c[2]=0,c[3]=1,c;e.cross(ib,a,b);c[0]=ib[0];c[1]=ib[1];c[2]=ib[2];c[3]=1+kb;return z.normalize(c,c)};z.rotateX=(a,b,c=new z)=>{b*=.5;R=a[0];S=a[1];T=a[2];ba=a[3];Ka=Math.sin(b);ja=Math.cos(b);c[0]=R*ja+ba*Ka;c[1]=S*ja+T*Ka;c[2]=T*ja-S*Ka;c[3]=ba*ja-R*Ka;return c};z.rotateY=(a,b,c=new z)=>{b*=.5;R=a[0];S=a[1];T=a[2];ba=a[3];La=Math.sin(b);ja=Math.cos(b);c[0]=R*ja-T*La;c[1]=S*
ja+ba*La;c[2]=T*ja+R*La;c[3]=ba*ja-S*La;return c};z.rotateZ=(a,b,c=new z)=>{b*=.5;R=a[0];S=a[1];T=a[2];ba=a[3];Ma=Math.sin(b);ja=Math.cos(b);c[0]=R*ja+S*Ma;c[1]=S*ja-R*Ma;c[2]=T*ja+ba*Ma;c[3]=ba*ja-T*Ma;return c};z.slerp=(a,b,c,d=new z)=>{R=a[0];S=a[1];T=a[2];ba=a[3];Ka=b[0];La=b[1];Ma=b[2];ja=b[3];Sa=R*Ka+S*La+T*Ma+ba*ja;0>Sa&&(Sa=-Sa,Ka=-Ka,La=-La,Ma=-Ma,ja=-ja);1-Sa>Wa?(ic=Math.acos(Sa),Na=Math.sin(ic),Kb=Math.sin((1-c)*ic)/Na,Lb=Math.sin(c*ic)/Na):(Kb=1-c,Lb=c);d[0]=Kb*R+Lb*Ka;d[1]=Kb*S+Lb*La;
d[2]=Kb*T+Lb*Ma;d[3]=Kb*ba+Lb*ja;return d};z.toAxisAngle=(a,b)=>{Bc=2*Math.acos(a[3]);Na=Math.sin(Bc/2);Na>Wa?(b[0]=a[0]/Na,b[1]=a[1]/Na,b[2]=a[2]/Na):(b[0]=1,b[1]=0,b[2]=0);return Bc};z.toString=a=>`quat("${a[0]}, ${a[1]}, ${a[2]}, ${a[3]})`;const Mb=new e,Nb=new e,Ob=new e,rb=new e,Cb=new e,sb=new e,lb=new e,jc=new e,wb=new e,bd=[1,1,1];class U{constructor(a=new e,b=e.fromArray(bd)){this.min=new e;this.max=new e;e.min(a,b,this.min);e.max(a,b,this.max)}}U.clampPoint=(a,b,c=new e)=>e.clamp(b,a.min,
a.max,c);U.containsPoint=(a,b)=>b[0]>=a.min[0]&&b[0]<=a.max[0]&&b[1]>=a.min[1]&&b[1]<=a.max[1]&&b[2]>=a.min[2]&&b[2]<=a.max[2];U.containsCube=(a,b)=>a.min[0]<=b.min[0]&&b.max[0]<=a.max[0]&&a.min[1]<=b.min[1]&&b.max[1]<=a.max[1]&&a.min[2]<=b.min[2]&&b.max[2]<=a.max[2];U.depth=a=>a.max[2]-a.min[2];U.equals=(a,b)=>e.equals(a.min,b.min)&&e.equals(a.max,b.max);U.getCenter=(a,b=new e)=>{e.add(a.min,a.max,b);return e.multiplyScalar(b,.5,b)};U.getSize=(a,b=new e)=>e.minus(a.max,a.min,b);U.height=a=>a.max[1]-
a.min[1];U.intersect=(a,b,c=new U)=>{e.max(a.min,b.min,c.min);e.min(a.max,b.max,c.max);return c};U.intersectsBox=(a,b)=>!(b.max[0]<a.min[0]||b.min[0]>a.max[0]||b.max[1]<a.min[1]||b.min[1]>a.max[1]||b.max[2]<a.min[2]||b.min[2]>a.max[2]);U.intersectsSphere=(a,b)=>{U.clampPoint(a,b.position,lb);return e.distanceToSquared(lb,b.position)<=b.radius*b.radius};U.intersectsTriangle=(a,b)=>{if(U.isEmpty(a))return!1;U.getCenter(a,lb);e.minus(a.max,lb,jc);e.minus(b.a,lb,Ob);e.minus(b.b,lb,Mb);e.minus(b.c,lb,
Nb);e.minus(Mb,Ob,sb);e.minus(Nb,Mb,rb);e.minus(Ob,Nb,Cb);a=[0,-sb[2],sb[1],0,-rb[2],rb[1],0,-Cb[2],Cb[1],sb[2],0,-sb[0],rb[2],0,-rb[0],Cb[2],0,-Cb[0],-sb[1],sb[0],0,-rb[1],rb[0],0,-Cb[1],Cb[0],0];if(!vb(a,Ob,Mb,Nb,jc)||!vb(a,Ob,Mb,Nb,jc))return!1;e.cross(sb,rb,lb);return vb(lb,Ob,Mb,Nb,jc)};U.isEmpty=a=>a.max[0]<a.min[0]||a.max[0]<a.min[0]||a.max[0]<a.min[0];U.round=(a,b=new U)=>{e.round(a.min,b.min);e.round(a.max,b.max);return b};U.size=(a,b=new e)=>e.minus(a.max,a.min,b);U.stretch=(a,b,c,d=new U)=>
{e.add(a.min,b,d.min);e.add(a.max,c,d.max);return d};U.translate=(a,b,c=new U)=>{e.add(a.min,b,c.min);e.add(a.max,b,c.max);return c};U.union=(a,b,c=new U)=>{e.min(a.min,b.min,c.min);e.max(a.max,b.max,c.max);return c};U.volume=a=>(a.max[0]-a.min[0])*(a.max[1]-a.min[1])*(a.max[2]-a.min[2]);U.width=a=>a.max[0]-a.min[0];let Yb,Nc,sc,tc,uc,Oc,Ta=0,fb=0,Cc=0,Dc=0;class g extends Float32Array{constructor(a=0,b=0){super(2);this[0]=a;this[1]=b}get x(){return this[0]}set x(a){this[0]=a}get y(){return this[1]}set y(a){this[1]=
a}}g.VECTOR2_ZERO=new Float32Array([0,0]);g.VECTOR2_TOP=new Float32Array([0,1]);g.VECTOR2_BOTTOM=new Float32Array([0,-1]);g.VECTOR2_LEFT=new Float32Array([-1,0]);g.VECTOR2_RIGHT=new Float32Array([1,0]);g.add=(a,b,c=new g)=>{c[0]=a[0]+b[0];c[1]=a[1]+b[1];return c};g.addScalar=(a,b,c=new g(2))=>{c[0]=a[0]+b;c[1]=a[1]+b;return c};g.angle=a=>Math.atan2(a[1],a[0]);g.ceil=(a,b=new g)=>{b[0]=Math.ceil(a[0]);b[1]=Math.ceil(a[1]);return b};g.clamp=(a,b,c,d=new g)=>{d[0]=wa(a[0],b[0],c[0]);d[1]=wa(a[1],b[1],
c[1]);return d};g.clampSafe=(a,b,c,d=new g)=>{d[0]=mb(a[0],b[0],c[0]);d[1]=mb(a[1],b[1],c[1]);return d};g.clampLength=(a,b,c,d=new g)=>{d[0]=mb(a[0],b[0],c[0]);d[1]=mb(a[1],b[1],c[1]);return d};g.clampScalar=(a,b,c,d=new g)=>{d[0]=wa(a[0],b,c);d[1]=wa(a[1],b,c);return d};g.closeTo=(a,b,c=Wa)=>g.distanceTo(a,b)<=c;g.closeToRect=(a,b,c=Wa)=>Ea(a[0],b[0],c)&&Ea(a[1],b[1],c);g.closeToManhattan=(a,b,c=Wa)=>g.distanceToManhattan(a,b)<=c;g.clone=(a,b=new g)=>{b[0]=a[0];b[1]=a[1];return b};g.cross=(a,b)=>
a[0]*b[1]-a[1]*b[0];g.create=(a=0,b=0,c=new g)=>{c[0]=a;c[1]=b;return c};g.distanceTo=(a,b)=>{Ta=b[0]-a[0];fb=b[1]-a[1];return Math.hypot(Ta,fb)};g.distanceToManhattan=(a,b)=>Math.abs(a[0]-b[0])+Math.abs(a[1]-b[1]);g.distanceToSquared=(a,b)=>{Ta=a[0]-b[0];fb=a[1]-b[1];return Ta*Ta+fb*fb};g.divide=(a,b,c=new g)=>{c[0]=a[0]/b[0];c[1]=a[1]/b[1];return c};g.divideScalar=(a,b,c=new g)=>g.multiplyScalar(a,1/b,c);g.dot=(a,b)=>a[0]*b[0]+a[1]*b[1];g.equals=(a,b)=>a[0]===b[0]&&a[1]===b[1];g.floor=(a,b=new g)=>
{b[0]=Math.floor(a[0]);b[1]=Math.floor(a[1]);return b};g.floorToZero=(a,b=new g)=>{b[0]=Zb(a[0]);b[1]=Zb(a[1]);return b};g.fromArray=(a,b=0,c=new g)=>{c[0]=a[b];c[1]=a[b+1];return c};g.fromJson=(a,b=new g)=>{b[0]=a.x;b[1]=a.y;return b};g.fromPolar=(a,b=new g)=>{b[0]=Math.cos(a.a)*a.r;b[1]=Math.sin(a.a)*a.r;return b};g.fromScalar=(a=0,b=new g)=>{b[0]=b[1]=a;return b};g.inverse=(a,b=new g)=>{b[0]=1/a[0]||0;b[1]=1/a[1]||0;return b};g.norm=a=>Math.sqrt(a[0]*a[0]+a[1]*a[1]);g.lengthManhattan=a=>Math.abs(a[0])+
Math.abs(a[1]);g.lengthSquared=a=>a[0]*a[0]+a[1]*a[1];g.lerp=(a,b,c,d=new g)=>{d[0]=(b[0]-a[0])*c+a[0];d[1]=(b[1]-a[1])*c+a[1];return d};g.max=(a,b,c=new g)=>{c[0]=Math.max(a[0],b[0]);c[1]=Math.max(a[1],b[1]);return c};g.min=(a,b,c=new g)=>{c[0]=Math.min(a[0],b[0]);c[1]=Math.min(a[1],b[1]);return c};g.minus=(a,b,c=new g)=>{c[0]=a[0]-b[0];c[1]=a[1]-b[0];return c};g.minusScalar=(a,b,c=new g)=>{c[0]=a[0]-b;c[1]=a[1]-b;return c};g.multiply=(a,b,c=new g)=>{c[0]=a[0]*b[0];c[1]=a[1]*b[1];return c};g.multiplyScalar=
(a,b,c=new g)=>{c[0]=a[0]*b;c[1]=a[1]*b;return c};g.negate=(a,b=new g)=>{b[0]=-a[0];b[1]=-a[1];return b};g.normalize=(a,b=new g)=>g.divideScalar(a,g.norm(a)||1,b);g.random=(a=1,b=new g)=>{Ta=Math.random()*Pc;b[0]=Math.cos(Ta)*a;b[1]=Math.sin(Ta)*a;return b};g.rotate=(a,b,c=g.VECTOR2_ZERO,d=new g(2))=>{Cc=Math.cos(b);Dc=Math.sin(b);Ta=a[0]-c[0];fb=a[1]-c[1];d[0]=Ta*Cc-fb*Dc+c[0];d[1]=Ta*Dc+fb*Cc+c[1];return d};g.round=(a,b=new g)=>{b[0]=Math.round(a[0]);b[1]=Math.round(a[1]);return b};g.set=(a=0,b=
0,c=new g)=>{c[0]=a;c[1]=b;return c};g.setLength=(a,b,c=new g(2))=>{g.normalize(a,c);g.multiplyScalar(c,b,c);return c};g.toArray=(a,b=[])=>{b[0]=a[0];b[1]=a[1];return b};g.toPalorJson=(a,b={a:0,r:0})=>{b.r=g.norm(a);b.a=g.angle(a);return b};g.toString=a=>`(${a[0]}, ${a[1]})`;g.transformMatrix3=(a,b,c)=>{Ta=a[0];fb=a[1];c[0]=b[0]*Ta+b[3]*fb+b[6];c[1]=b[1]*Ta+b[4]*fb+b[7];return c};class Da{constructor(a=g.create(),b=g.create(1,1)){this.min=g.create();this.max=g.create();g.min(a,b,this.min);g.max(a,
b,this.max)}}Da.area=a=>(a.max[0]-a.min[0])*(a.max[1]-a.min[1]);Da.containsPoint=(a,b)=>b[0]>=a.min[0]&&b[0]<=a.max[0]&&b[1]>=a.min[1]&&b[1]<=a.max[1];Da.containsRectangle=(a,b)=>a.min[0]<=b.min[0]&&b.max[0]<=a.max[0]&&a.min[1]<=b.min[1]&&b.max[1]<=a.max[1];Da.create=(a=g.create(),b=g.create(1,1))=>({max:g.max(a,b),min:g.min(a,b)});Da.equals=(a,b)=>g.equals(a.min,b.min)&&g.equals(a.max,b.max);Da.getCenter=(a,b=g.create())=>{g.add(a.min,a.max,b);return g.multiplyScalar(b,.5,b)};Da.getSize=(a,b=g.create())=>
g.minus(a.max,a.min,b);Da.height=a=>a.max[1]-a.min[1];Da.intersect=(a,b,c=new Da)=>{g.max(a.min,b.min,c.min);g.min(a.max,b.max,c.max);return c};Da.stretch=(a,b,c,d=new Da)=>{g.add(a.min,b,d.min);g.add(a.max,c,d.max);return d};Da.translate=(a,b,c=new Da)=>{g.add(a.min,b,c.min);g.add(a.max,b,c.max);return c};Da.union=(a,b,c=new Da)=>{g.min(a.min,b.min,c.min);g.max(a.max,b.max,c.max);return c};Da.width=a=>a.max[0]-a.min[0];let Ec=0;class Pb{constructor(a=new e,b=1){this.position=a;this.radius=b}}Pb.boundingBox=
(a,b=new U)=>{e.minusScalar(a.position,a.radius,b.min);e.addScalar(a.position,a.radius,b.max);return b};Pb.containsPoint=(a,b)=>e.distanceToSquared(a.position,b)<=a.radius*a.radius;Pb.distanceToPoint=(a,b)=>e.distanceTo(a.position,b)-a.radius;Pb.equals=(a,b)=>e.equals(a.position,b.position)&&a.radius===b.radius;Pb.intersectsSphere=(a,b)=>{Ec=a.radius+b.radius;return e.distanceToSquared(a.position,b.position)<=Ec*Ec};const Vc=[-1,-1,0],Wc=[1,-1,0],Xc=[0,1,0],Yc=new e,Zc=new e;class gb{constructor(a=
new Float32Array(Vc),b=new Float32Array(Wc),c=new Float32Array(Xc)){this.a=a;this.b=b;this.c=c}}gb.area=a=>{const b=gb.getABLength(a),c=gb.getBCLength(a);a=gb.getCALength(a);const d=(b+c+a)/2;return Math.sqrt(d*(d-c)*(d-a)*(d-b))};gb.create=(a=new Float32Array(Vc),b=new Float32Array(Wc),c=new Float32Array(Xc))=>({a,b,c});gb.getABLength=a=>e.distanceTo(a.a,a.b);gb.getBCLength=a=>e.distanceTo(a.b,a.c);gb.getCALength=a=>e.distanceTo(a.c,a.a);gb.normal=(a,b=e.create())=>{e.minus(a.c,a.b,Zc);e.minus(a.b,
a.a,Yc);e.cross(Yc,Zc,b);return e.normalize(b)};gb.toFloat32Array=(a,b=new Float32Array(3))=>{b.set(a.a,0);b.set(a.b,3);b.set(a.c,6);return e.normalize(b)};let tb,Fc,Gc;const jb=new e;class ab{constructor(a=new e,b=new e(0,0,-1)){this.position=a;this.direction=e.normalize(b)}}ab.at=(a,b,c=new e)=>e.multiplyScalar(a.direction,b,c);ab.distanceToPoint=(a,b)=>Math.sqrt(ab.distanceSqToPoint(a,b));ab.distanceSqToPoint=(a,b)=>{e.minus(b,a.position,jb);tb=e.dot(jb,a.direction);if(0>tb)return e.distanceToSquared(a.position,
b);e.multiplyScalar(a.direction,tb,jb);e.add(jb,a.position,jb);return e.distanceToSquared(jb,b)};ab.lookAt=(a,b,c=new ab)=>{a!==c&&e.fromArray(a.position,0,c.position);e.normalize(e.minus(b,a.position,c.direction));return c};ab.intersectSphere=(a,b,c)=>{e.minus(b.position,a.position,jb);tb=e.dot(jb,a.direction);Gc=e.dot(jb,jb)-tb*tb;Fc=b.radius*b.radius;if(Gc>Fc)return null;var d=Math.sqrt(Fc-Gc);b=tb-d;d=tb+d;return 0>b&&0>d?null:0>b?ab.at(a,d,c):ab.at(a,b,c)};ab.intersectsSphere=(a,b)=>ab.distanceSqToPoint(a,
b.position)<=b.radius*b.radius;let ca,da,ea,fa,Vb,Wb,Xb,ub,kc,lc,mc,nc,Hc,Ic,Jc,Kc,Lc,Mc,oc,pc,qc,rc;class q extends Float32Array{constructor(a=0,b=0,c=0,d=0){super(4);this[0]=a;this[1]=b;this[2]=c;this[3]=d}get x(){return this[0]}set x(a){this[0]=a}get y(){return this[1]}set y(a){this[1]=a}get z(){return this[2]}set z(a){this[2]=a}get w(){return this[3]}set w(a){this[3]=a}}q.add=(a,b,c=new q)=>{c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];return c};q.ceil=(a,b=new q)=>{b[0]=Math.ceil(a[0]);
b[1]=Math.ceil(a[1]);b[2]=Math.ceil(a[2]);b[3]=Math.ceil(a[3]);return b};q.closeTo=(a,b)=>Ea(a[0],b[0])&&Ea(a[1],b[1])&&Ea(a[2],b[2])&&Ea(a[3],b[3]);q.create=(a=0,b=0,c=0,d=0,f=new q)=>{f[0]=a;f[1]=b;f[2]=c;f[3]=d;return f};q.cross=(a,b,c,d=new Float32Array(4))=>{Hc=b[0]*c[1]-b[1]*c[0];Ic=b[0]*c[2]-b[2]*c[0];Jc=b[0]*c[3]-b[3]*c[0];Kc=b[1]*c[2]-b[2]*c[1];Lc=b[1]*c[3]-b[3]*c[1];Mc=b[2]*c[3]-b[3]*c[2];oc=a[0];pc=a[1];qc=a[2];rc=a[3];d[0]=pc*Mc-qc*Lc+rc*Kc;d[1]=-(oc*Mc)+qc*Jc-rc*Ic;d[2]=oc*Lc-pc*Jc+rc*
Hc;d[3]=-(oc*Kc)+pc*Ic-qc*Hc;return d};q.distanceTo=(a,b)=>{ca=b[0]-a[0];da=b[1]-a[1];ea=b[2]-a[2];fa=b[3]-a[3];return Math.hypot(ca,da,ea,fa)};q.distanceToSquared=(a,b)=>{ca=b[0]-a[0];da=b[1]-a[1];ea=b[2]-a[2];fa=b[3]-a[3];return ca*ca+da*da+ea*ea+fa*fa};q.divide=(a,b,c=new q)=>{c[0]=a[0]/b[0];c[1]=a[1]/b[1];c[2]=a[2]/b[2];c[3]=a[3]/b[3];return c};q.dot=(a,b)=>a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3];q.equals=(a,b)=>a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3];q.floor=(a,b=new q)=>{b[0]=Math.floor(a[0]);
b[1]=Math.floor(a[1]);b[2]=Math.floor(a[2]);b[3]=Math.floor(a[3]);return b};q.fromValues=(a,b,c,d,f=new q)=>{f[0]=a;f[1]=b;f[2]=c;f[3]=d;return f};q.inverse=(a,b=new q)=>{b[0]=1/a[0];b[1]=1/a[1];b[2]=1/a[2];b[3]=1/a[3];return b};q.norm=a=>Math.hypot(a[0],a[1],a[2],a[3]);q.lengthSquared=a=>{ca=a[0];da=a[1];ea=a[2];fa=a[3];return ca*ca+da*da+ea*ea+fa*fa};q.lerp=(a,b,c,d=new q)=>{ca=a[0];da=a[1];ea=a[2];fa=a[3];d[0]=ca+c*(b[0]-ca);d[1]=da+c*(b[1]-da);d[2]=ea+c*(b[2]-ea);d[3]=fa+c*(b[3]-fa);return d};
q.max=(a,b,c=new q)=>{c[0]=Math.max(a[0],b[0]);c[1]=Math.max(a[1],b[1]);c[2]=Math.max(a[2],b[2]);c[3]=Math.max(a[3],b[3]);return c};q.min=(a,b,c=new q)=>{c[0]=Math.min(a[0],b[0]);c[1]=Math.min(a[1],b[1]);c[2]=Math.min(a[2],b[2]);c[3]=Math.min(a[3],b[3]);return c};q.minus=(a,b,c=new q)=>{c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];c[3]=a[3]-b[3];return c};q.multiply=(a,b,c=new q)=>{c[0]=a[0]*b[0];c[1]=a[1]*b[1];c[2]=a[2]*b[2];c[3]=a[3]*b[3];return c};q.multiplyScalar=(a,b,c=new q)=>{c[0]=a[0]*b;c[1]=
a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;return c};q.negate=(a,b=new q)=>{b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=-a[3];return b};q.normalize=(a,b=new q)=>{ca=a[0];da=a[1];ea=a[2];fa=a[3];ub=ca*ca+da*da+ea*ea+fa*fa;0<ub&&(ub=1/Math.sqrt(ub));b[0]=ca*ub;b[1]=da*ub;b[2]=ea*ub;b[3]=fa*ub;return b};q.round=(a,b=new q)=>{b[0]=Math.round(a[0]);b[1]=Math.round(a[1]);b[2]=Math.round(a[2]);b[3]=Math.round(a[3]);return b};q.toString=a=>`(${a[0]}, ${a[1]}, ${a[2]}, ${a[3]})`;q.transformMatrix4=(a,b,c=new q)=>{ca=a[0];da=
a[1];ea=a[2];fa=a[3];c[0]=b[0]*ca+b[4]*da+b[8]*ea+b[12]*fa;c[1]=b[1]*ca+b[5]*da+b[9]*ea+b[13]*fa;c[2]=b[2]*ca+b[6]*da+b[10]*ea+b[14]*fa;c[3]=b[3]*ca+b[7]*da+b[11]*ea+b[15]*fa;return c};q.transformQuat=(a,b,c=new q)=>{Vb=a[0];Wb=a[1];Xb=a[2];ca=b[0];da=b[1];ea=b[2];fa=b[3];kc=fa*Vb+da*Xb-ea*Wb;lc=fa*Wb+ea*Vb-ca*Xb;mc=fa*Xb+ca*Wb-da*Vb;nc=-ca*Vb-da*Wb-ea*Xb;c[0]=kc*fa+nc*-ca+lc*-ea-mc*-da;c[1]=lc*fa+nc*-da+mc*-ca-kc*-ea;c[2]=mc*fa+nc*-ea+kc*-da-lc*-ca;c[3]=a[3];return c};m.COLOR_HEX_MAP=xb;m.ColorGPU=
ha;m.ColorRGB=la;m.ColorRGBA=ka;m.Constants=$c;m.Cube=U;m.Easing=ad;m.EulerAngle=Qb;m.Matrix2=A;m.Matrix3=v;m.Matrix4=l;m.Polar=Uc;m.Quaternion=z;m.Ray3=ab;m.Rectangle2=Da;m.Sphere=Pb;m.Triangle3=gb;m.Vector2=g;m.Vector3=e;m.Vector4=q;m.ceilPowerOfTwo=a=>Math.pow(2,Math.ceil(Math.log(a)/Math.LN2));m.clamp=wa;m.clampCircle=(a,b,c)=>{Db=c-b;Eb=Zb(b/Db)*Db+a%Db;return Eb<b?Eb+Db:Eb>c?Eb-Db:Eb};m.clampSafe=mb;m.closeTo=Ea;m.floorPowerOfTwo=a=>Math.pow(2,Math.floor(Math.log(a)/Math.LN2));m.floorToZero=
Zb;m.isPowerOfTwo=a=>0===(a&a-1)&&0!==a;m.lerp=(a,b,c)=>(b-a)*c+a;m.mapRange=(a,b,c)=>{vc=b[1]-b[0];Qc=c[1]-c[0];return(a-.5*vc)/Qc/vc};m.randFloat=(a=0,b=1)=>a+Math.random()*(b-a);m.randInt=(a=0,b=1)=>a+Math.floor(Math.random()*(b-a+1));m.rndFloat=(a,b)=>a+Math.random()*(b-a);m.rndFloatRange=a=>a*(.5-Math.random());m.rndInt=(a,b)=>a+Math.floor(Math.random()*(b-a+1));m.sum=(...a)=>Sc(a);m.sumArray=Sc;Object.defineProperty(m,"__esModule",{value:!0})});
